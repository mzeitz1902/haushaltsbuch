import{a as x,c as U}from"./chunk-O76LYQFJ.js";import{a as w}from"./chunk-5W7D7NAE.js";import{$a as E,$b as $,Ca as C,Ea as f,Fa as l,H as m,Hc as H,Ic as g,Jb as B,Jc as O,Kc as b,L as r,M as p,Na as y,Oa as P,S as V,Sa as L,Ua as k,Xb as Q,Y as c,a as M,b as S,ba as u,bc as q,cb as j,fa as A,gc as v,hb as I,oa as D,pa as N,sa as _,ta as s,ua as d,va as F}from"./chunk-H4PADTUW.js";var R=class o{facade=m(U);revenue=this.facade.revenue;isLoading=this.facade.isLoading;isSaving=this.facade.isSaving;isAdded=this.facade.isAdded;constructor(){this.facade.loadRevenue()}addRevenue(){this.facade.addRevenue({category:"",value:0})}updateRevenue(n){let e=n;this.facade.updateRevenue(e)}deleteRevenue(n){this.facade.deleteRevenue(n)}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=u({type:o,selectors:[["app-revenue-table"]],decls:2,vars:4,consts:[[1,"flex","flex-col","gap-2"],["headerTitle","Einnahmen","headerIcon","BadgePlus",3,"addRow","updateRow","deleteRow","data","isLoading","isSaving","isAdded"]],template:function(e,t){e&1&&(s(0,"section",0)(1,"app-money-table",1),f("addRow",function(){return t.addRevenue()})("updateRow",function(a){return t.updateRevenue(a)})("deleteRow",function(a){return t.deleteRevenue(a)}),d()()),e&2&&(c(),_("data",t.revenue())("isLoading",t.isLoading())("isSaving",t.isSaving())("isAdded",t.isAdded()))},dependencies:[g,v,b],encapsulation:2})};var K=["dueInMonths"];function W(o,n){if(o&1){let e=C();s(0,"ng-select",6),f("change",function(){r(e);let i=l().$implicit,a=l();return p(a.updateFixedCost(i))})("close",function(){r(e);let i=l(2);return p(i.selectedRow.set(null))}),d()}if(o&2){let e=l(2);_("items",e.dueInItems)("formControl",e.dueInControl)("clearable",!1)}}function X(o,n){if(o&1){let e=C();s(0,"span",7),f("click",function(){r(e);let i=l().$implicit,a=l();return p(a.selectRow(i.id,i.due_in))}),L(1),d()}if(o&2){let e=l().$implicit;c(),k(" ",e.due_in," ")}}function Y(o,n){if(o&1&&(s(0,"div",3),D(1,W,1,3,"ng-select",4)(2,X,2,1,"span",5),d()),o&2){let e=n.$implicit,t=l();c(),N(t.selectedRow()===e.id?1:2)}}var h=class o{facade=m(x);fixedCosts=this.facade.fixedCosts;isLoading=this.facade.isLoading;isSaving=this.facade.isSaving;isAdded=this.facade.isAdded;dueInMonthsTmp=I.required("dueInMonths");selectTmpRef=I(w);additionalColumns=j(()=>[{name:"due_in_month",template:this.dueInMonthsTmp()}]);dueInItems=Object.values(B);dueInControl=new $(null);selectedRow=V(null);constructor(){this.facade.loadFixedCosts()}addFixedCost(){this.facade.addFixedCost({category:"",value:0,due_in:"Alle"})}updateFixedCost(n){let e=S(M({},n),{due_in:this.dueInControl.value??n.due_in});this.facade.updateFixedCost(e),this.selectedRow.set(null),this.dueInControl.setValue(null)}deleteFixedCost(n){this.facade.deleteFixedCost(n)}selectRow(n,e){this.selectedRow.set(n),this.dueInControl.setValue(e),setTimeout(()=>this.selectTmpRef()?.open())}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=u({type:o,selectors:[["app-fixed-costs-table"]],viewQuery:function(e,t){e&1&&(y(t.dueInMonthsTmp,K,5),y(t.selectTmpRef,w,5)),e&2&&P(2)},decls:4,vars:5,consts:[["dueInMonths",""],[1,"flex","flex-col","gap-2"],["headerTitle","Fixe Ausgaben","headerIcon","BadgeMinus",3,"addRow","updateRow","deleteRow","data","isLoading","isSaving","isAdded","customColumns"],[1,"flex","h-5","justify-end"],[1,"h-5","w-24",3,"items","formControl","clearable"],[1,"block","h-5","w-24","pl-3"],[1,"h-5","w-24",3,"change","close","items","formControl","clearable"],[1,"block","h-5","w-24","pl-3",3,"click"]],template:function(e,t){if(e&1){let i=C();s(0,"section",1)(1,"app-money-table",2),f("addRow",function(){return r(i),p(t.addFixedCost())})("updateRow",function(T){return r(i),p(t.updateFixedCost(T))})("deleteRow",function(T){return r(i),p(t.deleteFixedCost(T))}),d()(),A(2,Y,3,1,"ng-template",null,0,E)}e&2&&(c(),_("data",t.fixedCosts())("isLoading",t.isLoading())("isSaving",t.isSaving())("isAdded",t.isAdded())("customColumns",t.additionalColumns()))},dependencies:[g,b,w,v,Q,q],encapsulation:2})};var J=class o{fixedCostsFacade=m(x);constructor(){this.fixedCostsFacade.loadFixedCosts()}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=u({type:o,selectors:[["app-base"]],decls:5,vars:0,consts:[["title","Einnahmen & Ausgaben"],[1,"container-max-sm","mt-2","flex","flex-col","gap-4","p-2","md:p-6"],[1,"flex","flex-col","gap-4"]],template:function(e,t){e&1&&(F(0,"app-header",0),s(1,"section",1)(2,"cdk-accordion",2),F(3,"app-revenue-table")(4,"app-fixed-costs-table"),d()())},dependencies:[R,H,O,h],encapsulation:2})};export{J as BaseComponent};
