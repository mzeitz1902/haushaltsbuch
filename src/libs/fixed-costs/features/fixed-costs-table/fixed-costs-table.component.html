<section class="flex flex-col gap-2">
  <header class="flex items-center justify-between">
    <div class="flex items-center gap-2">
      <h2 class="text-lg font-semibold">Fixe Ausgaben</h2>
      @if (isSaving()) {
        <mat-spinner diameter="20" />
      }
    </div>

    <button maffiButton (click)="addFixedCost()" icon="CirclePlus">
      Hinzuf√ºgen
    </button>
  </header>
  <app-money-table
    [data]="fixedCosts()"
    [isLoading]="isLoading()"
    [isAdded]="isAdded()"
    [customColumns]="additionalColumns()"
    (updateRow)="updateFixedCost($event)"
    (deleteRow)="deleteFixedCost($event)"
  />
</section>

<ng-template #dueInMonths let-row>
  <div class="flex h-5 justify-end">
    @if (selectedRow() === row.id) {
      <ng-select
        [items]="dueInItems"
        class="h-5 w-24"
        [formControl]="dueInControl"
        [clearable]="false"
        (change)="updateFixedCost(row)"
        (close)="selectedRow.set(null)"
      />
    } @else {
      <span class="block h-5 w-24 pl-3" (click)="selectRow(row.id, row.due_in)">
        {{ row.due_in }}
      </span>
    }
  </div>
</ng-template>
