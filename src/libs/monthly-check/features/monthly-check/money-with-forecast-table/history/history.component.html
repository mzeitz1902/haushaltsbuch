<div class="mb-2 flex flex-col gap-1">
  @for (entry of history(); track entry.id) {
    <span
      class="grid grid-cols-[2.5rem_4rem_4rem_min-content] items-center gap-4"
    >
      @if (selectedEntry() === entry.id) {
        <input
          #value
          type="number"
          class="w-10 rounded border-1 border-blue-400 bg-gray-600 p-1 outline-none"
          [field]="form.value"
          (blur)="submitAndReset()"
        />
      } @else {
        <span
          class="self-right flex w-8 justify-end"
          (click)="editValue(entry)"
        >
          {{ entry.value | currency }}
        </span>
      }

      <span>{{ entry.date | date }}</span>
      @if (selectedEntry() === entry.id) {
        <input
          #note
          type="text"
          class="w-20 rounded border-1 border-blue-400 bg-gray-600 p-1 outline-none"
          [field]="form.note"
          (blur)="submitAndReset()"
        />
      } @else {
        <span (click)="editNote(entry)">{{ entry.note }}</span>
      }
      <button
        maffiButton
        icon="CircleMinus"
        (click)="deleteHistory.emit(entry.id)"
      ></button>
    </span>
  } @empty {
    Keine Historie vorhanden.
  }
</div>
<button
  maffiButton
  size="mini"
  class="w-full !justify-center"
  icon="CirclePlus"
  (click)="addHistory.emit()"
>
  Hinzuf√ºgen
</button>
