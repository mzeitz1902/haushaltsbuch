import{a as k}from"./chunk-UH2QVQYC.js";import{h as to,i as oo,j as io}from"./chunk-USK5RLUS.js";import{a as Ro,b as Ao,c as ko}from"./chunk-ULJSH2JO.js";import{c as We}from"./chunk-PGHH3OJE.js";import{a as Xt}from"./chunk-TA7QX6TO.js";import{$ as ce,A as V,Aa as C,Ab as Bt,Ad as ro,B as It,Ba as x,Bb as Yt,Cb as N,Cd as ao,D as Et,Da as Ot,Db as E,Dd as so,Ea as Re,Eb as ue,Ed as lo,F as Ft,Fa as Ae,Fd as co,Ga as f,Gd as po,Ha as s,Hd as mo,I as Te,Ia as l,Id as uo,Ja as b,Jb as Le,Jd as ho,K as te,Kb as W,Kd as fo,Ld as go,M as P,Mc as Kt,Md as _o,N as ve,Na as Ce,Nc as ht,Nd as vo,O as c,Oa as xe,Ob as Wt,Od as yo,Pb as jt,Pd as bo,Q as u,Qa as y,Qb as $t,Qd as Co,R as h,Ra as ct,Rb as Ve,Rd as xo,S as Ie,Sa as m,T as ye,Td as wo,Ua as d,Ub as zt,Ud as Mo,V as de,Va as ke,Vb as Ut,W as St,Wa as Oe,Wc as Zt,Wd as Do,X as Ee,Xa as Pt,Ya as Ht,Yc as Jt,Yd as To,Z as B,Za as pt,Zc as he,Zd as Io,_ as oe,_a as mt,_d as Eo,a as O,ab as Pe,b as J,ba as Fe,bb as He,be as Fo,ca as ie,cb as Ne,cd as eo,d as Ct,da as pe,db as Nt,dd as ft,de as gt,e as se,ea as p,eb as Y,ed as Be,ee as X,fb as Lt,fe as q,gb as re,gd as fe,h as _e,ha as lt,hb as g,i as st,ib as z,ie as Ye,jb as A,je as So,ka as dt,la as v,mb as ut,n as L,na as me,nb as Vt,o as xt,oa as Rt,p as wt,pa as At,qa as Se,r as le,ra as H,s as Mt,sb as w,sc as qt,t as Dt,tb as M,ua as ne,uc as Gt,v as De,va as be,w as ee,wa as kt,wc as Qt,y as Tt,ya as S,yd as no,za as R,zb as D,zd as U}from"./chunk-YGQ7UR42.js";var ot=Ct(Xt());var je=class i{facade=c(k);revenue=this.facade.revenue;total=this.facade.totalRevenue;isLoading=this.facade.isMonthLoading;isSaving=this.facade.isSavingRevenue;isAdded=this.facade.isRevenueAdded;addRevenue(){this.facade.addRevenue()}updateRevenue(n){this.facade.updateRevenue(n)}deleteRevenue(n){this.facade.deleteRevenue(n)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=v({type:i,selectors:[["app-revenue-month-table"]],decls:1,vars:5,consts:[["headerTitle","Einnahmen","headerIcon","BanknoteArrowUp",3,"addRow","updateRow","deleteRow","data","total","isLoading","isSaving","isAdded"]],template:function(e,t){e&1&&(s(0,"app-money-table-v2",0),m("addRow",function(){return t.addRevenue()})("updateRow",function(r){return t.updateRevenue(r)})("deleteRow",function(r){return t.deleteRevenue(r)}),l()),e&2&&f("data",t.revenue())("total",t.total())("isLoading",t.isLoading())("isSaving",t.isSaving())("isAdded",t.isAdded())},dependencies:[Ye],encapsulation:2})};var $e=class i{facade=c(k);fixedCosts=this.facade.fixedCosts;total=this.facade.totalFixedCosts;isLoading=this.facade.isMonthLoading;isSaving=this.facade.isSavingFixedCost;isAdded=this.facade.isFixedCostAdded;addFixedCost(){this.facade.addFixedCost()}updateFixedCost(n){this.facade.updateFixedCost(n)}deleteFixedCost(n){this.facade.deleteFixedCost(n)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=v({type:i,selectors:[["app-fixed-costs-month-table"]],decls:1,vars:5,consts:[["headerTitle","Fixkosten","headerIcon","BanknoteArrowDown",3,"addRow","updateRow","deleteRow","data","total","isLoading","isSaving","isAdded"]],template:function(e,t){e&1&&(s(0,"app-money-table-v2",0),m("addRow",function(){return t.addFixedCost()})("updateRow",function(r){return t.updateFixedCost(r)})("deleteRow",function(r){return t.deleteFixedCost(r)}),l()),e&2&&f("data",t.fixedCosts())("total",t.total())("isLoading",t.isLoading())("isSaving",t.isSaving())("isAdded",t.isAdded())},dependencies:[Ye],encapsulation:2})};var Jo=["value"],ei=["note"],ti=(i,n)=>n.id;function oi(i,n){if(i&1){let e=y();s(0,"input",9,0),m("blur",function(){u(e);let o=d(2);return h(o.submitAndReset())}),l(),S()}if(i&2){let e=d(2);R(e.form.value,"formField")}}function ii(i,n){if(i&1){let e=y();s(0,"span",10),m("click",function(){u(e);let o=d().$implicit,r=d();return h(r.editValue(o))}),g(1),w(2,"currency"),l()}if(i&2){let e=d().$implicit;p(),A(" ",M(2,1,e.value)," ")}}function ni(i,n){if(i&1){let e=y();s(0,"input",11,1),m("blur",function(){u(e);let o=d(2);return h(o.submitAndReset())}),l(),S()}if(i&2){let e=d(2);R(e.form.note,"formField")}}function ri(i,n){if(i&1){let e=y();s(0,"span",12),m("click",function(){u(e);let o=d().$implicit,r=d();return h(r.editNote(o))}),g(1),l()}if(i&2){let e=d().$implicit;p(),z(e.note)}}function ai(i,n){if(i&1){let e=y();s(0,"span",3),C(1,oi,2,2,"input",5)(2,ii,3,3,"span",6),s(3,"span"),g(4),w(5,"date"),l(),C(6,ni,2,2,"input",7)(7,ri,2,1,"span"),s(8,"button",8),m("click",function(){let o=u(e).$implicit,r=d();return h(r.deleteHistory.emit(o.id))}),l()()}if(i&2){let e=n.$implicit,t=d();p(),x(t.selectedEntry()===e.id?1:2),p(3),z(M(5,3,e.date)),p(2),x(t.selectedEntry()===e.id?6:7)}}function si(i,n){i&1&&g(0," Keine Historie vorhanden. ")}var ze=class i{facade=c(k);row=E.required();addHistory=N();updateHistory=N();deleteHistory=N();isAdded=this.facade.isHistoryEntryAdded;isMonthLoaded=this.facade.isMonthLoaded;selectedEntry=B(null);formModel=B(this.initForm());form=X(this.formModel);valueRef=ue("value");noteRef=ue("note");history=D(()=>this.row().history);focusValueOnAdd=oe(()=>{this.isAdded()&&this.isMonthLoaded()&&ce(()=>{let n=this.history();if(n.length===0)return;let e=n.at(-1);this.editValue(e)})});update(){this.updateHistory.emit(this.form().value())}editValue(n){this.setForm(n),this.selectedEntry.set(n.id),setTimeout(()=>this.valueRef()?.nativeElement.select())}editNote(n){this.setForm(n),this.selectedEntry.set(n.id),setTimeout(()=>this.noteRef()?.nativeElement.select())}submitAndReset(){this.update(),this.selectedEntry.set(null),this.formModel.set(this.initForm())}initForm(){return{id:null,value:null,date:null,note:""}}setForm(n){this.formModel.set({id:n.id,value:n.value,date:n.date,note:n.note??""})}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=v({type:i,selectors:[["app-history"]],viewQuery:function(e,t){e&1&&Pe(t.valueRef,Jo,5)(t.noteRef,ei,5),e&2&&He(2)},inputs:{row:[1,"row"]},outputs:{addHistory:"addHistory",updateHistory:"updateHistory",deleteHistory:"deleteHistory"},decls:6,vars:1,consts:[["value",""],["note",""],[1,"mb-2","flex","flex-col","gap-1"],[1,"grid","grid-cols-[2.5rem_4rem_4rem_min-content]","items-center","gap-4"],["maffiButton","","size","mini","icon","CirclePlus",1,"w-full","!justify-center",3,"click"],["type","number",1,"w-10","rounded","border-1","border-blue-400","bg-gray-600","p-1","outline-none",3,"formField"],[1,"self-right","flex","w-8","justify-end"],["type","text",1,"w-20","rounded","border-1","border-blue-400","bg-gray-600","p-1","outline-none",3,"formField"],["maffiButton","","icon","CircleMinus",3,"click"],["type","number",1,"w-10","rounded","border-1","border-blue-400","bg-gray-600","p-1","outline-none",3,"blur","formField"],[1,"self-right","flex","w-8","justify-end",3,"click"],["type","text",1,"w-20","rounded","border-1","border-blue-400","bg-gray-600","p-1","outline-none",3,"blur","formField"],[3,"click"]],template:function(e,t){e&1&&(s(0,"div",2),Re(1,ai,9,5,"span",3,ti,!1,si,1,0),l(),s(4,"button",4),m("click",function(){return t.addHistory.emit()}),g(5,` Hinzuf\xFCgen
`),l()),e&2&&(p(),Ae(t.history()))},dependencies:[U,q,Ve,jt],encapsulation:2})};var pi=["*"];function mi(i,n){if(i&1&&b(0,"div",3),i&2){let e=d(2);Lt(e.arrowStyles)}}function ui(i,n){if(i&1){let e=y();s(0,"div",0),m("keydown",function(o){u(e);let r=d();return h(r._handleKeydown(o))})("click",function(){u(e);let o=d();return h(o._handleClick())})("mouseover",function(){u(e);let o=d();return h(o._handleMouseOver())})("mouseleave",function(){u(e);let o=d();return h(o._handleMouseLeave())})("animationstart",function(o){u(e);let r=d();return h(r._onAnimationStart(o.animationName))})("animationend",function(o){u(e);let r=d();return h(r._onAnimationDone(o.animationName))})("animationcancel",function(o){u(e);let r=d();return h(r._onAnimationDone(o.animationName))}),s(1,"div",1),Oe(2),l(),C(3,mi,1,2,"div",2),l()}if(i&2){let e=d();re(e._classList),Y("mtx-popover-panel-animations-disabled",e._animationsDisabled)("mtx-popover-panel-exit-animation",e._panelAnimationState==="void")("mtx-popover-panel-animating",e._isAnimating)("mtx-popover-panel-without-arrow",e.hideArrow),f("id",e.panelId)("cdkTrapFocus",e.focusTrapEnabled)("cdkTrapFocusAutoCapture",e.focusTrapAutoCaptureEnabled),ne("aria-label",e.ariaLabel||null)("aria-labelledby",e.ariaLabelledby||null)("aria-describedby",e.ariaDescribedby||null),p(3),x(e.hideArrow?-1:3)}}var hi=new P("MtxPopoverContent");function fi(){throw Error(`mtx-popover-trigger: must pass in an mtx-popover instance.

    Example:
      <mtx-popover #popover="mtxPopover"></mtx-popover>
      <button [mtxPopoverTriggerFor]="popover"></button>`)}function gi(){throw Error(`mtxPopoverPosition[0] value must be either 'above', 'below', 'before' or 'after'.
    Example: <mtx-popover [position]="['below', 'after']" #popover="mtxPopover"></mtx-popover>`)}function _i(){throw Error(`mtxPopoverPosition[1] value must be either 'above', 'below', 'before', 'after' or 'center'.
    Example: <mtx-popover [position]="['below', 'after']" #popover="mtxPopover"></mtx-popover>`)}var vi=new P("mtx-popover-default-options",{providedIn:"root",factory:()=>({backdropClass:"cdk-overlay-transparent-backdrop"})}),yi=0,_t="_mtx-popover-enter",Ue="_mtx-popover-exit",Xe=(()=>{class i{constructor(){this._changeDetectorRef=c(Le),this._elementRef=c(ie),this._unusedNgZone=c(St),this._defaultOptions=c(vi),this._elevationPrefix="mat-elevation-z",this._baseElevation=null,this._animationsDisabled=fe(),this._classList={},this._panelAnimationState="void",this._animationDone=new _e,this._isAnimating=!1,this.closeDisabled=!1,this.overlayPanelClass=this._defaultOptions.overlayPanelClass||"",this.backdropClass=this._defaultOptions.backdropClass,this.triggerEvent=this._defaultOptions.triggerEvent??"hover",this.enterDelay=this._defaultOptions.enterDelay??100,this.leaveDelay=this._defaultOptions.leaveDelay??100,this._position=this._defaultOptions.position??["below","after"],this.xOffset=this._defaultOptions.xOffset??0,this.yOffset=this._defaultOptions.yOffset??0,this.arrowWidth=this._defaultOptions.arrowWidth??16,this.arrowHeight=this._defaultOptions.arrowHeight??16,this.arrowOffsetX=this._defaultOptions.arrowOffsetX??20,this.arrowOffsetY=this._defaultOptions.arrowOffsetY??20,this.hideArrow=this._defaultOptions.hideArrow??!1,this.closeOnPanelClick=this._defaultOptions.closeOnPanelClick??!1,this.closeOnBackdropClick=this._defaultOptions.closeOnBackdropClick??!0,this.focusTrapEnabled=this._defaultOptions.focusTrapEnabled??!1,this.focusTrapAutoCaptureEnabled=this._defaultOptions.focusTrapAutoCaptureEnabled??!1,this.hasBackdrop=this._defaultOptions.hasBackdrop,this.closed=new de,this.panelId=`mtx-popover-panel-${yi++}`}get position(){return this._position}set position(e){["before","after","above","below"].includes(e[0])||gi(),["before","after","above","below","center"].includes(e[1])||_i(),this._position=e,this.setPositionClasses()}set panelClass(e){let t=this._previousPanelClass,o=O({},this._classList);t&&t.length&&t.split(" ").forEach(r=>{o[r]=!1}),this._previousPanelClass=e,e&&e.length&&(e.split(" ").forEach(r=>{o[r]=!0}),this._elementRef.nativeElement.className="",this.setPositionClasses()),this._classList=o}get classList(){return this.panelClass}set classList(e){this.panelClass=e}ngOnInit(){this.setPositionClasses()}ngOnDestroy(){this.closed.complete(),clearTimeout(this._exitFallbackTimeout)}_handleKeydown(e){e.keyCode===27&&(Be(e)||(e.preventDefault(),this.closed.emit("keydown")))}_handleClick(){this.closeOnPanelClick&&this.closed.emit("click")}_handleMouseOver(){this.triggerEvent==="hover"&&(this.closeDisabled=!0)}_handleMouseLeave(){this.triggerEvent==="hover"&&setTimeout(()=>{this.closeDisabled=!1,this.closed.emit()},this.leaveDelay)}setCurrentStyles(e=this.position){let t=e[1]==="after"?`${this.arrowOffsetX-this.arrowWidth/2}px`:e[1]==="center"?`calc(50% - ${this.arrowWidth/2}px)`:"",o=e[1]==="before"?`${this.arrowOffsetX-this.arrowWidth/2}px`:"",r=e[1]==="above"?`${this.arrowOffsetY-this.arrowHeight/2}px`:e[1]==="center"?`calc(50% - ${this.arrowHeight/2}px)`:"",a=e[1]==="below"?`${this.arrowOffsetY-this.arrowHeight/2}px`:"";this.arrowStyles=e[0]==="above"||e[0]==="below"?{left:this.direction==="ltr"?t:o,right:this.direction==="ltr"?o:t}:{top:a,bottom:r}}setPositionClasses(e=this.position){this._classList=J(O({},this._classList),{"mtx-popover-before-above":e[0]==="before"&&e[1]==="above","mtx-popover-before-center":e[0]==="before"&&e[1]==="center","mtx-popover-before-below":e[0]==="before"&&e[1]==="below","mtx-popover-after-above":e[0]==="after"&&e[1]==="above","mtx-popover-after-center":e[0]==="after"&&e[1]==="center","mtx-popover-after-below":e[0]==="after"&&e[1]==="below","mtx-popover-above-before":e[0]==="above"&&e[1]==="before","mtx-popover-above-center":e[0]==="above"&&e[1]==="center","mtx-popover-above-after":e[0]==="above"&&e[1]==="after","mtx-popover-below-before":e[0]==="below"&&e[1]==="before","mtx-popover-below-center":e[0]==="below"&&e[1]==="center","mtx-popover-below-after":e[0]==="below"&&e[1]==="after"}),this._changeDetectorRef.markForCheck()}setElevation(){if(this._baseElevation===null){let a=(typeof getComputedStyle=="function"?getComputedStyle(this._elementRef.nativeElement):null)?.getPropertyValue("--mtx-popover-base-elevation-level")||"8";this._baseElevation=parseInt(a)}let e=Math.min(this._baseElevation,24),t=`${this._elevationPrefix}${e}`,o=Object.keys(this._classList).find(r=>r.startsWith(this._elevationPrefix));if(!o||o===this._previousElevation){let r=O({},this._classList);this._previousElevation&&(r[this._previousElevation]=!1),r[t]=!0,this._previousElevation=t,this._classList=r}}_onAnimationDone(e){let t=e===Ue;(t||e===_t)&&(t&&(clearTimeout(this._exitFallbackTimeout),this._exitFallbackTimeout=void 0),this._animationDone.next(t?"void":"enter"),this._isAnimating=!1)}_onAnimationStart(e){(e===_t||e===Ue)&&(this._isAnimating=!0)}_setIsOpen(e){this._panelAnimationState=e?"enter":"void",e||this._animationsDisabled||(this._exitFallbackTimeout=setTimeout(()=>this._onAnimationDone(Ue),200)),this._animationsDisabled&&setTimeout(()=>{this._onAnimationDone(e?_t:Ue)}),this._changeDetectorRef.markForCheck()}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=v({type:i,selectors:[["mtx-popover"]],contentQueries:function(t,o,r){if(t&1&&Pt(r,hi,5),t&2){let a;pt(a=mt())&&(o.lazyContent=a.first)}},viewQuery:function(t,o){if(t&1&&Ht(lt,5),t&2){let r;pt(r=mt())&&(o.templateRef=r.first)}},inputs:{backdropClass:"backdropClass",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],ariaDescribedby:[0,"aria-describedby","ariaDescribedby"],triggerEvent:"triggerEvent",enterDelay:"enterDelay",leaveDelay:"leaveDelay",position:"position",xOffset:"xOffset",yOffset:"yOffset",arrowWidth:"arrowWidth",arrowHeight:"arrowHeight",arrowOffsetX:"arrowOffsetX",arrowOffsetY:"arrowOffsetY",hideArrow:[2,"hideArrow","hideArrow",W],closeOnPanelClick:[2,"closeOnPanelClick","closeOnPanelClick",W],closeOnBackdropClick:[2,"closeOnBackdropClick","closeOnBackdropClick",W],focusTrapEnabled:[2,"focusTrapEnabled","focusTrapEnabled",W],focusTrapAutoCaptureEnabled:[2,"focusTrapAutoCaptureEnabled","focusTrapAutoCaptureEnabled",W],hasBackdrop:[2,"hasBackdrop","hasBackdrop",W],panelClass:[0,"class","panelClass"],classList:"classList"},outputs:{closed:"closed"},exportAs:["mtxPopover"],ngContentSelectors:pi,decls:1,vars:0,consts:[["tabindex","-1","role","dialog",1,"mtx-popover-panel",3,"keydown","click","mouseover","mouseleave","animationstart","animationend","animationcancel","id","cdkTrapFocus","cdkTrapFocusAutoCapture"],[1,"mtx-popover-content"],[1,"mtx-popover-direction-arrow",3,"style"],[1,"mtx-popover-direction-arrow"]],template:function(t,o){t&1&&(ke(),H(0,ui,4,17,"ng-template"))},dependencies:[eo],styles:[`@keyframes _mtx-popover-enter{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:none}}@keyframes _mtx-popover-exit{0%{opacity:1}to{opacity:0}}.mtx-popover-panel{position:relative;max-height:calc(100vh - 48px);padding:8px;font-size:inherit;outline:0;animation:_mtx-popover-enter .12s cubic-bezier(0,0,.2,1);border-radius:var(--mtx-popover-container-shape, var(--mat-sys-corner-extra-small));background-color:var(--mtx-popover-background-color, var(--mat-sys-surface-container));color:var(--mtx-popover-text-color, var(--mat-sys-on-surface))}.mtx-popover-panel.mtx-popover-panel-exit-animation{animation:_mtx-popover-exit .1s 25ms linear forwards}.mtx-popover-panel.mtx-popover-panel-animations-disabled{animation:none}.mtx-popover-panel.mtx-popover-panel-animating{pointer-events:none}.mtx-popover-panel[class*=mtx-popover-below]{margin-top:calc(.5em + 2px)}.mtx-popover-panel[class*=mtx-popover-above]{margin-bottom:calc(.5em + 2px)}.mtx-popover-panel[class*=mtx-popover-before]{margin-right:calc(.5em + 2px)}[dir=rtl] .mtx-popover-panel[class*=mtx-popover-before]{margin-right:auto;margin-left:calc(.5em + 2px)}.mtx-popover-panel[class*=mtx-popover-after]{margin-left:calc(.5em + 2px)}[dir=rtl] .mtx-popover-panel[class*=mtx-popover-after]{margin-left:auto;margin-right:calc(.5em + 2px)}.mtx-popover-panel.mtx-popover-panel-without-arrow{margin:0}.mtx-popover-direction-arrow{position:absolute}.mtx-popover-direction-arrow:before,.mtx-popover-direction-arrow:after{position:absolute;display:inline-block;content:"";border-width:.5em;border-style:solid}.mtx-popover-direction-arrow:before{border-color:var(--mtx-popover-outline-color, var(--mat-sys-surface-container))}.mtx-popover-direction-arrow:after{border-width:calc(.5em - 1px);border-color:var(--mtx-popover-background-color, var(--mat-sys-surface-container))}[class*=mtx-popover-below] .mtx-popover-direction-arrow,[class*=mtx-popover-above] .mtx-popover-direction-arrow{width:1em}[class*=mtx-popover-below] .mtx-popover-direction-arrow:before,[class*=mtx-popover-below] .mtx-popover-direction-arrow:after,[class*=mtx-popover-above] .mtx-popover-direction-arrow:before,[class*=mtx-popover-above] .mtx-popover-direction-arrow:after{border-left-color:transparent;border-right-color:transparent}[class*=mtx-popover-below] .mtx-popover-direction-arrow:after,[class*=mtx-popover-above] .mtx-popover-direction-arrow:after{left:1px}[dir=rtl] [class*=mtx-popover-below] .mtx-popover-direction-arrow:after,[dir=rtl] [class*=mtx-popover-above] .mtx-popover-direction-arrow:after{right:1px;left:auto}[class*=mtx-popover-below] .mtx-popover-direction-arrow{top:0}[class*=mtx-popover-below] .mtx-popover-direction-arrow:before,[class*=mtx-popover-below] .mtx-popover-direction-arrow:after{bottom:0;border-top-width:0}[class*=mtx-popover-above] .mtx-popover-direction-arrow{bottom:0}[class*=mtx-popover-above] .mtx-popover-direction-arrow:before,[class*=mtx-popover-above] .mtx-popover-direction-arrow:after{top:0;border-bottom-width:0}[class*=mtx-popover-before] .mtx-popover-direction-arrow,[class*=mtx-popover-after] .mtx-popover-direction-arrow{height:1em}[class*=mtx-popover-before] .mtx-popover-direction-arrow:before,[class*=mtx-popover-before] .mtx-popover-direction-arrow:after,[class*=mtx-popover-after] .mtx-popover-direction-arrow:before,[class*=mtx-popover-after] .mtx-popover-direction-arrow:after{border-top-color:transparent;border-bottom-color:transparent}[class*=mtx-popover-before] .mtx-popover-direction-arrow:after,[class*=mtx-popover-after] .mtx-popover-direction-arrow:after{top:1px}[class*=mtx-popover-before] .mtx-popover-direction-arrow{right:0}[class*=mtx-popover-before] .mtx-popover-direction-arrow:before,[class*=mtx-popover-before] .mtx-popover-direction-arrow:after{left:0;border-right-width:0}[dir=rtl] [class*=mtx-popover-before] .mtx-popover-direction-arrow{right:auto;left:0}[dir=rtl] [class*=mtx-popover-before] .mtx-popover-direction-arrow:before,[dir=rtl] [class*=mtx-popover-before] .mtx-popover-direction-arrow:after{left:auto;right:0;border-left-width:0}[dir=rtl] [class*=mtx-popover-before] .mtx-popover-direction-arrow:before{border-right-width:.5em}[dir=rtl] [class*=mtx-popover-before] .mtx-popover-direction-arrow:after{border-right-width:calc(.5em - 1px)}[class*=mtx-popover-after] .mtx-popover-direction-arrow{left:0}[class*=mtx-popover-after] .mtx-popover-direction-arrow:before,[class*=mtx-popover-after] .mtx-popover-direction-arrow:after{right:0;border-left-width:0}[dir=rtl] [class*=mtx-popover-after] .mtx-popover-direction-arrow{left:auto;right:0}[dir=rtl] [class*=mtx-popover-after] .mtx-popover-direction-arrow:before,[dir=rtl] [class*=mtx-popover-after] .mtx-popover-direction-arrow:after{right:auto;left:0;border-right-width:0}[dir=rtl] [class*=mtx-popover-after] .mtx-popover-direction-arrow:before{border-left-width:.5em}[dir=rtl] [class*=mtx-popover-after] .mtx-popover-direction-arrow:after{border-left-width:calc(.5em - 1px)}
`],encapsulation:2,changeDetection:0})}}return i})();var bi=new P("mtx-popover-scroll-strategy",{providedIn:"root",factory:()=>{let i=c(gt);return()=>i.scrollStrategies.reposition()}}),Oo=(()=>{class i{constructor(){this._overlay=c(gt),this._elementRef=c(ie),this._viewContainerRef=c(dt),this._dir=c(qt,{optional:!0}),this._changeDetectorRef=c(Le),this._focusMonitor=c(Jt),this._overlayRef=null,this._popoverOpen=!1,this._halt=!1,this._positionSubscription=se.EMPTY,this._popoverCloseSubscription=se.EMPTY,this._closingActionsSubscription=se.EMPTY,this._scrollStrategy=c(bi),this._openedBy=void 0,this.popoverOpened=new de,this.popoverClosed=new de}get popover(){return this._popover}set popover(e){e!==this._popover&&(this._popover=e,this._popoverCloseSubscription.unsubscribe(),e&&(this._popoverCloseSubscription=e.closed.subscribe(t=>{this._destroyPopover(t)})))}ngAfterContentInit(){this._checkPopover(),this._setCurrentConfig()}ngOnDestroy(){this._halt=!0,this._positionSubscription.unsubscribe(),this._pendingRemoval?.unsubscribe(),this._popoverCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null)}_setCurrentConfig(){this.triggerEvent&&(this.popover.triggerEvent=this.triggerEvent),this.popover.setCurrentStyles()}get popoverOpen(){return this._popoverOpen}get dir(){return this._dir&&this._dir.value==="rtl"?"rtl":"ltr"}_handleClick(e){this.popover.triggerEvent==="click"&&this.togglePopover()}_handleMouseEnter(e){this._halt=!1,this.popover.triggerEvent==="hover"&&(this._mouseoverTimer=setTimeout(()=>{this.openPopover()},this.popover.enterDelay))}_handleMouseLeave(e){this.popover.triggerEvent==="hover"&&(this._mouseoverTimer&&(clearTimeout(this._mouseoverTimer),this._mouseoverTimer=null),this._popoverOpen?setTimeout(()=>{this.popover.closeDisabled||this.closePopover()},this.popover.leaveDelay):this._halt=!0)}_handleMousedown(e){Zt(e)||(this._openedBy=e.button===0?"mouse":void 0)}_handleKeydown(e){let t=e.keyCode;(t===13||t===32)&&(this._openedBy="keyboard")}togglePopover(){return this._popoverOpen?this.closePopover():this.openPopover()}openPopover(){if(this._popoverOpen||this._halt)return;this._checkPopover(),this._pendingRemoval?.unsubscribe();let e=this._createOverlay(),t=e.getConfig();this._setPosition(t.positionStrategy),this.popover.triggerEvent==="click"&&(t.hasBackdrop=this.popover.hasBackdrop??!0),e.attach(this._getPortal()),this.popover.lazyContent&&this.popover.lazyContent.attach(this.popoverData),this._closingActionsSubscription=this._popoverClosingActions().subscribe(()=>this.closePopover()),this._initPopover(),this.popover instanceof Xe&&this.popover._setIsOpen(!0)}closePopover(){this.popover.closed.emit()}focus(e,t){this._focusMonitor&&e?this._focusMonitor.focusVia(this._elementRef,e,t):this._elementRef.nativeElement.focus(t)}_destroyPopover(e){let t=this._overlayRef;if(!t||!this.popoverOpen)return;this._mouseoverTimer&&(clearTimeout(this._mouseoverTimer),this._mouseoverTimer=null);let o=this.popover;this._closingActionsSubscription.unsubscribe(),this._pendingRemoval?.unsubscribe(),t.detach(),o instanceof Xe?this._pendingRemoval=o._animationDone.pipe(ee(r=>r==="void"),V(1)).subscribe(()=>{o.lazyContent?.detach()}):o.lazyContent?.detach(),this._openedBy=void 0,this._setIsPopoverOpen(!1)}_initPopover(){this.popover.direction=this.dir,this.popover.setElevation(),this._setIsPopoverOpen(!0)}_setIsPopoverOpen(e){e!==this._popoverOpen&&(this._popoverOpen=e,this._popoverOpen?this.popoverOpened.emit():this.popoverClosed.emit(),this._changeDetectorRef.markForCheck())}_checkPopover(){this.popover||fi()}_createOverlay(){if(this._overlayRef)this._overlayRef.getConfig().positionStrategy.setOrigin(this._getTargetElement());else{let e=this._getOverlayConfig();this._subscribeToPositions(e.positionStrategy),this._overlayRef=this._overlay.create(e)}return this._overlayRef}_getOverlayConfig(){return new Eo({positionStrategy:this._overlay.position().flexibleConnectedTo(this._getTargetElement()).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mtx-popover-panel"),backdropClass:this.popover.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:this.popover.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir||void 0})}_getTargetElement(){return this.targetElement?this.targetElement.elementRef:this._elementRef}_subscribeToPositions(e){this._positionSubscription=e.positionChanges.subscribe(t=>{let o=t.connectionPair.overlayX==="start"?"after":t.connectionPair.overlayX==="end"?"before":"center",r=t.connectionPair.overlayY==="top"?"below":t.connectionPair.overlayY==="bottom"?"above":"center",a=this.popover.position[0]==="above"||this.popover.position[0]==="below"?[r,o]:[o,r];this._changeDetectorRef.markForCheck(),this.popover.setCurrentStyles(a),this.popover.setPositionClasses(a)})}_setPosition(e){let[t,o,r]=this.popover.position[0]==="before"||this.popover.position[1]==="after"?["start","center","end"]:this.popover.position[0]==="after"||this.popover.position[1]==="before"?["end","center","start"]:["center","start","end"],[a,_,T]=this.popover.position[0]==="above"||this.popover.position[1]==="below"?["top","center","bottom"]:this.popover.position[0]==="below"||this.popover.position[1]==="above"?["bottom","center","top"]:["center","top","bottom"],[I,$]=this.popover.position[0]==="below"||this.popover.position[0]==="above"?[t,t]:this.popover.position[0]==="before"?["end","start"]:["start","end"],[Q,it]=this.popover.position[0]==="before"||this.popover.position[0]==="after"?[a,a]:this.popover.position[0]==="below"?["top","bottom"]:["bottom","top"],nt=I,rt=Q,K=this.popover.xOffset&&!isNaN(Number(this.popover.xOffset))?Number(this.dir==="ltr"?this.popover.xOffset:-this.popover.xOffset):0,Z=this.popover.yOffset&&!isNaN(Number(this.popover.yOffset))?Number(this.popover.yOffset):0,at=[{originX:t,originY:a,overlayX:I,overlayY:Q}];(this.popover.position[0]==="above"||this.popover.position[0]==="below")&&(at=[{originX:t,originY:a,overlayX:I,overlayY:Q,offsetY:Z},{originX:o,originY:a,overlayX:o,overlayY:Q,offsetY:Z},{originX:r,originY:a,overlayX:r,overlayY:Q,offsetY:Z},{originX:t,originY:rt,overlayX:I,overlayY:it,offsetY:-Z},{originX:o,originY:rt,overlayX:o,overlayY:it,offsetY:-Z},{originX:r,originY:rt,overlayX:r,overlayY:it,offsetY:-Z}]),(this.popover.position[0]==="before"||this.popover.position[0]==="after")&&(at=[{originX:t,originY:a,overlayX:I,overlayY:Q,offsetX:K},{originX:t,originY:_,overlayX:I,overlayY:_,offsetX:K},{originX:t,originY:T,overlayX:I,overlayY:T,offsetX:K},{originX:nt,originY:a,overlayX:$,overlayY:Q,offsetX:-K},{originX:nt,originY:_,overlayX:$,overlayY:_,offsetX:-K},{originX:nt,originY:T,overlayX:$,overlayY:T,offsetX:-K}]),e.withPositions(at).withDefaultOffsetX(K).withDefaultOffsetY(Z)}_popoverClosingActions(){let e=this.popover.triggerEvent==="click"&&this.popover.closeOnBackdropClick===!0?this._overlayRef.backdropClick():L(),t=this._overlayRef.detachments();return De(e,t)}_getPortal(){return(!this._portal||this._portal.templateRef!==this.popover.templateRef)&&(this._portal=new Do(this.popover.templateRef,this._viewContainerRef)),this._portal}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275dir=me({type:i,selectors:[["","mtx-popover-trigger-for",""],["","mtxPopoverTriggerFor",""]],hostAttrs:["aria-haspopup","true"],hostVars:2,hostBindings:function(t,o){t&1&&m("click",function(a){return o._handleClick(a)})("mouseenter",function(a){return o._handleMouseEnter(a)})("mouseleave",function(a){return o._handleMouseLeave(a)})("mousedown",function(a){return o._handleMousedown(a)})("keydown",function(a){return o._handleKeydown(a)}),t&2&&ne("aria-expanded",o.popoverOpen)("aria-controls",o.popoverOpen?o.popover.panelId:null)},inputs:{popover:[0,"mtxPopoverTriggerFor","popover"],popoverData:[0,"mtxPopoverTriggerData","popoverData"],targetElement:[0,"mtxPopoverTargetAt","targetElement"],triggerEvent:[0,"mtxPopoverTriggerOn","triggerEvent"]},outputs:{popoverOpened:"popoverOpened",popoverClosed:"popoverClosed"},exportAs:["mtxPopoverTrigger"]})}}return i})();var Ci=["category"],xi=["forecast"],wi=()=>["above","before"];function Mi(i,n){i&1&&b(0,"mat-spinner",11)}function Di(i,n){i&1&&b(0,"td",36)}function Ti(i,n){if(i&1){let e=y();s(0,"input",40,3),m("blur",function(){u(e);let o=d(2);return h(o.updateAndReset())})("keyup.enter",function(){u(e);let o=d(2);return h(o.onCategoryEnterPressed())}),l(),S()}if(i&2){let e=d(2);R(e.form.category,"formField")}}function Ii(i,n){if(i&1){let e=y();s(0,"div",41),m("click",function(){u(e);let o=d().$implicit,r=d();return h(r.editCategory(o))}),s(1,"span"),g(2),l()()}if(i&2){let e=d().$implicit;p(2),A(" ",e.category," ")}}function Ei(i,n){if(i&1&&(s(0,"td",37),C(1,Ti,2,2,"input",38)(2,Ii,3,1,"div",39),l()),i&2){let e=n.$implicit,t=d();p(),x(t.selectedRow()===e.id&&t.selectedField()==="category"?1:2)}}function Fi(i,n){i&1&&(s(0,"td",42),g(1," Summe "),l())}function Si(i,n){i&1&&(s(0,"td",43),g(1," Forecast "),l())}function Ri(i,n){if(i&1){let e=y();s(0,"input",47,4),m("blur",function(){u(e);let o=d(2);return h(o.updateAndReset())}),l(),S()}if(i&2){let e=d(2);R(e.form.forecast,"formField")}}function Ai(i,n){if(i&1){let e=y();s(0,"div",48),m("click",function(){u(e);let o=d().$implicit,r=d();return h(r.editForecast(o))}),s(1,"span"),g(2),w(3,"currency"),l()()}if(i&2){let e=d().$implicit;p(2),A(" ",M(3,1,e.forecast)," ")}}function ki(i,n){if(i&1&&(s(0,"td",44),C(1,Ri,2,2,"input",45)(2,Ai,4,3,"div",46),l()),i&2){let e=n.$implicit,t=d();p(),x(t.selectedRow()===e.id&&t.selectedField()==="forecast"?1:2)}}function Oi(i,n){if(i&1&&(s(0,"td",49),g(1),w(2,"currency"),l()),i&2){let e=d();p(),A(" ",M(2,1,e.forecastTotal())," ")}}function Pi(i,n){i&1&&(s(0,"td",43),g(1," Wert "),l())}function Hi(i,n){if(i&1){let e=y();s(0,"td",50)(1,"span",51),g(2),w(3,"currency"),l(),s(4,"mtx-popover",52,5)(6,"app-history",53),m("addHistory",function(){let o=u(e).$implicit,r=d();return h(r.addHistory.emit(o.id))})("deleteHistory",function(o){let r=u(e).$implicit,a=d();return h(a.deleteHistory.emit({rowId:r.id,historyId:o}))})("updateHistory",function(o){let r=u(e).$implicit,a=d();return h(a.updateHistory.emit({rowId:r.id,entry:o}))}),l()()()}if(i&2){let e=n.$implicit,t=Ne(5),o=d();p(),Y("!text-green-500",o.showForecast()&&e.value<e.forecast)("!text-red-500",o.showForecast()&&e.value>e.forecast),f("mtxPopoverTriggerFor",t)("mtxPopoverTriggerOn","click"),p(),A(" ",M(3,9,e.value)," "),p(2),f("position",Vt(11,wi)),p(2),f("row",e)}}function Ni(i,n){if(i&1&&(s(0,"td",49),g(1),w(2,"currency"),l()),i&2){let e=d();Y("!text-green-500",e.showForecast()&&e.total()<e.forecastTotal())("!text-red-500",e.showForecast()&&e.total()>e.forecastTotal()),p(),A(" ",M(2,5,e.total())," ")}}function Li(i,n){i&1&&b(0,"td",36)}function Vi(i,n){if(i&1){let e=y();s(0,"td",54)(1,"button",55),m("click",function(){let o=u(e).$implicit,r=d();return h(r.deleteRow.emit(o.id))}),l()()}}function Bi(i,n){i&1&&b(0,"td",56)}function Yi(i,n){i&1&&b(0,"tr",31)}function Wi(i,n){if(i&1&&H(0,Yi,1,0,"tr",57),i&2){let e=d();f("matHeaderRowDef",e.displayedColumns())}}function ji(i,n){i&1&&b(0,"tr",58)}function $i(i,n){i&1&&b(0,"tr",59)}function zi(i,n){if(i&1){let e=y();s(0,"button",60),kt("animate-fade-out"),be("animate-fade-in"),m("click",function(o){return u(e),d().addRow.emit(),h(o.stopPropagation())}),g(1," Hinzuf\xFCgen "),l()}}var ge=class i{title=E.required();expanded=E.required();showForecast=E.required();data=E.required();isLoading=E.required();isSaving=E.required();isAdded=E.required();total=E.required();updateRow=N();deleteRow=N();addRow=N();addHistory=N();updateHistory=N();deleteHistory=N();selectedRow=B(null);selectedField=B(null);formModel=B(this.initForm());form=X(this.formModel);categoryRef=ue("category");forecastRef=ue("forecast");category=D(()=>this.formModel().category);forecast=D(()=>this.formModel().forecast);forecastTotal=D(()=>this.data().reduce((n,e)=>n+e.forecast,0));focusCategoryOnAdd=oe(()=>{this.isAdded()&&ce(()=>{let n=this.data().at(-1);this.editCategory(n),setTimeout(()=>this.categoryRef()?.nativeElement.scrollIntoView({behavior:"smooth"}))})});trackByFn(n,e){return e?.id}editCategory(n){this.setForm(n),this.selectedRow.set(n.id),this.selectedField.set("category"),setTimeout(()=>this.categoryRef()?.nativeElement.select())}editForecast(n){this.setForm(n),this.selectedRow.set(n.id),this.selectedField.set("forecast"),setTimeout(()=>this.forecastRef()?.nativeElement.select())}updateAndReset(){this.updateRow.emit(this.formModel()),this.selectedRow.set(null),this.selectedField.set(null),this.formModel.set(this.initForm())}onCategoryEnterPressed(){this.selectedField.set("forecast"),setTimeout(()=>this.forecastRef()?.nativeElement.select())}initForm(){return{id:null,category:null,forecast:null}}setForm(n){this.formModel.set({id:n.id,category:n.category,forecast:n.forecast})}displayedColumns=D(()=>{let n=["category","forecast","value","delete_button"];return this.showForecast()?n:n.filter(e=>e!=="forecast")});static \u0275fac=function(e){return new(e||i)};static \u0275cmp=v({type:i,selectors:[["app-money-with-history-table"]],viewQuery:function(e,t){e&1&&Pe(t.categoryRef,Ci,5)(t.forecastRef,xi,5),e&2&&He(2)},inputs:{title:[1,"title"],expanded:[1,"expanded"],showForecast:[1,"showForecast"],data:[1,"data"],isLoading:[1,"isLoading"],isSaving:[1,"isSaving"],isAdded:[1,"isAdded"],total:[1,"total"]},outputs:{updateRow:"updateRow",deleteRow:"deleteRow",addRow:"addRow",addHistory:"addHistory",updateHistory:"updateHistory",deleteHistory:"deleteHistory"},decls:40,vars:15,consts:[["accItem","cdkAccordionItem"],["col1",""],["col2",""],["category",""],["forecast",""],["popover","mtxPopover"],[3,"expanded"],[1,"sticky","top-14","z-10","grid","w-full","grid-cols-[2rem_1fr_1rem]","items-center","gap-2","overflow-hidden","bg-gray-800","py-2","backdrop-blur","transition-all","duration-100","md:top-16",3,"click"],["icon","BanknoteArrowDown","size","medium"],[1,"flex","items-center","gap-2"],[1,"text-sm","font-semibold","text-gray-100"],["diameter","18"],[1,"text-(length:--text-xs)","leading-(--text-sm--line-height)","font-medium"],["size","small",1,"ml-1",3,"icon"],[1,"overflow-hidden","transition-[max-height]","duration-300","ease-in-out"],[1,"flex","w-full","flex-col","gap-3","rounded-lg","bg-gray-800","p-1"],["mat-table","",1,"mt-2","!min-w-[95%]","!bg-transparent","!p-4",3,"dataSource","trackBy"],["matColumnDef","category"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","!h-1 !w-24 !p-0.5 !text-xs !text-gray-100",4,"matCellDef"],["mat-footer-cell","","class","!h-1 !p-0 !pt-2 font-semibold !text-gray-100",4,"matFooterCellDef"],["matColumnDef","forecast"],["mat-header-cell","","class","!text-right",4,"matHeaderCellDef"],["mat-cell","","class","!h-1 !w-24 !p-0.5 !text-right !text-xs !text-gray-100",4,"matCellDef"],["mat-footer-cell","","class","!p-0 !pt-2 !text-right font-semibold !text-gray-100",4,"matFooterCellDef"],["matColumnDef","value"],["mat-cell","","class","!h-1 !w-12 !p-0 !text-right !text-xs",4,"matCellDef"],["mat-footer-cell","","class","!p-0 !pt-2 !text-right font-semibold !text-gray-100",3,"!text-green-500","!text-red-500",4,"matFooterCellDef"],["matColumnDef","delete_button"],["mat-cell","","class","self-right w-1 !p-0 !text-right",4,"matCellDef"],["mat-footer-cell","",4,"matFooterCellDef"],["mat-header-row","",1,"!h-7","*:!pr-2","**:!text-gray-100"],["mat-row","","class","!h-1 *:!pr-2",4,"matRowDef","matRowDefColumns"],["mat-footer-row","","class","!h-1 **:!pr-2",4,"matFooterRowDef"],[1,"w-5"],["maffiButton","","icon","CirclePlus","size","small",1,"w-5"],["mat-header-cell",""],["mat-cell","",1,"!h-1","!w-24","!p-0.5","!text-xs","!text-gray-100"],[1,"w-24","rounded","border-1","border-blue-400","bg-gray-600","p-1","outline-none",3,"formField"],[1,"flex","h-5","w-full","items-center","gap-1"],[1,"w-24","rounded","border-1","border-blue-400","bg-gray-600","p-1","outline-none",3,"blur","keyup.enter","formField"],[1,"flex","h-5","w-full","items-center","gap-1",3,"click"],["mat-footer-cell","",1,"!h-1","!p-0","!pt-2","font-semibold","!text-gray-100"],["mat-header-cell","",1,"!text-right"],["mat-cell","",1,"!h-1","!w-24","!p-0.5","!text-right","!text-xs","!text-gray-100"],["type","number",1,"w-24","rounded","border-1","border-blue-400","bg-gray-600","p-1","outline-none",3,"formField"],[1,"flex","h-5","w-full","justify-end"],["type","number",1,"w-24","rounded","border-1","border-blue-400","bg-gray-600","p-1","outline-none",3,"blur","formField"],[1,"flex","h-5","w-full","justify-end",3,"click"],["mat-footer-cell","",1,"!p-0","!pt-2","!text-right","font-semibold","!text-gray-100"],["mat-cell","",1,"!h-1","!w-12","!p-0","!text-right","!text-xs"],[1,"block","h-5","w-full","!text-gray-100",3,"mtxPopoverTriggerFor","mtxPopoverTriggerOn"],[1,"!p-4","**:text-xs",3,"position"],[3,"addHistory","deleteHistory","updateHistory","row"],["mat-cell","",1,"self-right","w-1","!p-0","!text-right"],["maffiButton","","icon","Trash","size","mini","theme","secondary",1,"mb-1",3,"click"],["mat-footer-cell",""],["mat-header-row","","class","!h-7 *:!pr-2 **:!text-gray-100",4,"matHeaderRowDef"],["mat-row","",1,"!h-1","*:!pr-2"],["mat-footer-row","",1,"!h-1","**:!pr-2"],["maffiButton","","icon","CirclePlus","size","small",1,"w-5",3,"click"]],template:function(e,t){if(e&1){let o=y();s(0,"mat-card")(1,"mat-card-content")(2,"cdk-accordion-item",6,0)(4,"header",7),m("click",function(){u(o);let a=Ne(3);return h(a.toggle())}),b(5,"app-icon",8,1),s(7,"div",9,2)(9,"h2",10),g(10),l(),C(11,Mi,1,0,"mat-spinner",11),s(12,"h1",12),g(13),w(14,"currency"),l()(),b(15,"app-icon",13),l(),s(16,"div",14)(17,"div",15),be("animate-fade-in"),s(18,"table",16),Ce(19,17),H(20,Di,1,0,"td",18)(21,Ei,3,1,"td",19)(22,Fi,2,0,"td",20),xe(),Ce(23,21),H(24,Si,2,0,"td",22)(25,ki,3,1,"td",23)(26,Oi,3,3,"td",24),xe(),Ce(27,25),H(28,Pi,2,0,"td",22)(29,Hi,7,12,"td",26)(30,Ni,3,7,"td",27),xe(),Ce(31,28),H(32,Li,1,0,"td",18)(33,Vi,2,0,"td",29)(34,Bi,1,0,"td",30),xe(),C(35,Wi,1,1,"tr",31),H(36,ji,1,0,"tr",32)(37,$i,1,0,"tr",33),l(),s(38,"div",34),C(39,zi,2,0,"button",35),l()()()()()()}if(e&2){let o=Ne(3);p(2),f("expanded",t.expanded()),p(8),z(t.title()),p(),x(t.isSaving()?11:-1),p(2),A(" ",M(14,13,t.total())," "),p(2),f("icon",o.expanded?"ChevronUp":"ChevronDown"),p(),Nt("max-height",o.expanded?"1000px":"0px"),p(2),f("dataSource",t.data())("trackBy",t.trackByFn),p(17),x(t.displayedColumns().includes("forecast")?35:-1),p(),f("matRowDefColumns",t.displayedColumns()),p(),f("matFooterRowDef",t.displayedColumns()),p(2),x(o.expanded?39:-1)}},dependencies:[U,Mo,ze,ro,Gt,Qt,fo,co,uo,ho,bo,_o,yo,go,xo,Co,vo,lo,Xe,mo,po,Oo,q,Ve],encapsulation:2})};var Qe=class i{facade=c(k);data=this.facade.variableCosts;total=this.facade.totalVariableCosts;isLoading=this.facade.isMonthLoading;isSaving=this.facade.isSavingVariableCost;isAdded=this.facade.isVariableCostAdded;add(){this.facade.addVariableCost()}delete(n){this.facade.deleteVariableCost(n)}update(n){this.facade.updateVariableCost(n)}addHistory(n){this.facade.addVariableCostHistoryEntry(n)}updateHistory({rowId:n,entry:e}){this.facade.updateVariableCostHistoryEntry(n,e)}deleteHistory({rowId:n,historyId:e}){this.facade.deleteVariableCostHistoryEntry(n,e)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=v({type:i,selectors:[["app-variable-costs-table"]],features:[ut([$t])],decls:1,vars:7,consts:[["title","Variabel",3,"addRow","deleteRow","updateRow","addHistory","deleteHistory","updateHistory","expanded","showForecast","data","isAdded","isLoading","isSaving","total"]],template:function(e,t){e&1&&(s(0,"app-money-with-history-table",0),m("addRow",function(){return t.add()})("deleteRow",function(r){return t.delete(r)})("updateRow",function(r){return t.update(r)})("addHistory",function(r){return t.addHistory(r)})("deleteHistory",function(r){return t.deleteHistory(r)})("updateHistory",function(r){return t.updateHistory(r)}),l()),e&2&&f("expanded",!0)("showForecast",!1)("data",t.data())("isAdded",t.isAdded())("isLoading",t.isLoading())("isSaving",t.isSaving())("total",t.total())},dependencies:[no,ge],encapsulation:2})};function Ui(i,n){}var Ze=class{viewContainerRef;injector;id;role="dialog";panelClass="";hasBackdrop=!0;backdropClass="";disableClose=!1;closePredicate;width="";height="";minWidth;minHeight;maxWidth;maxHeight;position;data=null;direction;ariaDescribedBy=null;ariaLabelledBy=null;ariaLabel=null;ariaModal=!1;autoFocus="first-tabbable";restoreFocus=!0;delayFocusTrap=!0;scrollStrategy;closeOnNavigation=!0;enterAnimationDuration;exitAnimationDuration},yt="mdc-dialog--open",Po="mdc-dialog--opening",Ho="mdc-dialog--closing",Xi=150,qi=75,Gi=(()=>{class i extends Ao{_animationStateChanged=new de;_animationsEnabled=!fe();_actionSectionCount=0;_hostElement=this._elementRef.nativeElement;_enterAnimationDuration=this._animationsEnabled?Lo(this._config.enterAnimationDuration)??Xi:0;_exitAnimationDuration=this._animationsEnabled?Lo(this._config.exitAnimationDuration)??qi:0;_animationTimer=null;_contentAttached(){super._contentAttached(),this._startOpenAnimation()}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._enterAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(No,`${this._enterAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(Po,yt)),this._waitForAnimationToComplete(this._enterAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(yt),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._exitAnimationDuration}),this._hostElement.classList.remove(yt),this._animationsEnabled?(this._hostElement.style.setProperty(No,`${this._exitAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(Ho)),this._waitForAnimationToComplete(this._exitAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_updateActionSectionCount(e){this._actionSectionCount+=e,this._changeDetectorRef.markForCheck()}_finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._enterAnimationDuration)};_finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._exitAnimationDuration})};_clearAnimationClasses(){this._hostElement.classList.remove(Po,Ho)}_waitForAnimationToComplete(e,t){this._animationTimer!==null&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(t,e)}_requestAnimationFrame(e){this._ngZone.runOutsideAngular(()=>{typeof requestAnimationFrame=="function"?requestAnimationFrame(e):e()})}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(e){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:e})}ngOnDestroy(){super.ngOnDestroy(),this._animationTimer!==null&&clearTimeout(this._animationTimer)}attachComponentPortal(e){let t=super.attachComponentPortal(e);return t.location.nativeElement.classList.add("mat-mdc-dialog-component-host"),t}static \u0275fac=(()=>{let e;return function(o){return(e||(e=Fe(i)))(o||i)}})();static \u0275cmp=v({type:i,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:10,hostBindings:function(t,o){t&2&&(ct("id",o._config.id),ne("aria-modal",o._config.ariaModal)("role",o._config.role)("aria-labelledby",o._config.ariaLabel?null:o._ariaLabelledByQueue[0])("aria-label",o._config.ariaLabel)("aria-describedby",o._config.ariaDescribedBy||null),Y("_mat-animation-noopable",!o._animationsEnabled)("mat-mdc-dialog-container-with-actions",o._actionSectionCount>0))},features:[Se],decls:3,vars:0,consts:[[1,"mat-mdc-dialog-inner-container","mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(t,o){t&1&&(s(0,"div",0)(1,"div",1),H(2,Ui,0,0,"ng-template",2),l()())},dependencies:[To],styles:[`.mat-mdc-dialog-container{width:100%;height:100%;display:block;box-sizing:border-box;max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit;outline:0}.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-max-width, 560px);min-width:var(--mat-dialog-container-min-width, 280px)}@media(max-width: 599px){.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-small-max-width, calc(100vw - 32px))}}.mat-mdc-dialog-inner-container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;opacity:0;transition:opacity linear var(--mat-dialog-transition-duration, 0ms);max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mdc-dialog--closing .mat-mdc-dialog-inner-container{transition:opacity 75ms linear;transform:none}.mdc-dialog--open .mat-mdc-dialog-inner-container{opacity:1}._mat-animation-noopable .mat-mdc-dialog-inner-container{transition:none}.mat-mdc-dialog-surface{display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;width:100%;height:100%;position:relative;overflow-y:auto;outline:0;transform:scale(0.8);transition:transform var(--mat-dialog-transition-duration, 0ms) cubic-bezier(0, 0, 0.2, 1);max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit;box-shadow:var(--mat-dialog-container-elevation-shadow, none);border-radius:var(--mat-dialog-container-shape, var(--mat-sys-corner-extra-large, 4px));background-color:var(--mat-dialog-container-color, var(--mat-sys-surface, white))}[dir=rtl] .mat-mdc-dialog-surface{text-align:right}.mdc-dialog--open .mat-mdc-dialog-surface,.mdc-dialog--closing .mat-mdc-dialog-surface{transform:none}._mat-animation-noopable .mat-mdc-dialog-surface{transition:none}.mat-mdc-dialog-surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}.mat-mdc-dialog-title{display:block;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:var(--mat-dialog-headline-padding, 6px 24px 13px)}.mat-mdc-dialog-title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mat-mdc-dialog-title{text-align:right}.mat-mdc-dialog-container .mat-mdc-dialog-title{color:var(--mat-dialog-subhead-color, var(--mat-sys-on-surface, rgba(0, 0, 0, 0.87)));font-family:var(--mat-dialog-subhead-font, var(--mat-sys-headline-small-font, inherit));line-height:var(--mat-dialog-subhead-line-height, var(--mat-sys-headline-small-line-height, 1.5rem));font-size:var(--mat-dialog-subhead-size, var(--mat-sys-headline-small-size, 1rem));font-weight:var(--mat-dialog-subhead-weight, var(--mat-sys-headline-small-weight, 400));letter-spacing:var(--mat-dialog-subhead-tracking, var(--mat-sys-headline-small-tracking, 0.03125em))}.mat-mdc-dialog-content{display:block;flex-grow:1;box-sizing:border-box;margin:0;overflow:auto;max-height:65vh}.mat-mdc-dialog-content>:first-child{margin-top:0}.mat-mdc-dialog-content>:last-child{margin-bottom:0}.mat-mdc-dialog-container .mat-mdc-dialog-content{color:var(--mat-dialog-supporting-text-color, var(--mat-sys-on-surface-variant, rgba(0, 0, 0, 0.6)));font-family:var(--mat-dialog-supporting-text-font, var(--mat-sys-body-medium-font, inherit));line-height:var(--mat-dialog-supporting-text-line-height, var(--mat-sys-body-medium-line-height, 1.5rem));font-size:var(--mat-dialog-supporting-text-size, var(--mat-sys-body-medium-size, 1rem));font-weight:var(--mat-dialog-supporting-text-weight, var(--mat-sys-body-medium-weight, 400));letter-spacing:var(--mat-dialog-supporting-text-tracking, var(--mat-sys-body-medium-tracking, 0.03125em))}.mat-mdc-dialog-container .mat-mdc-dialog-content{padding:var(--mat-dialog-content-padding, 20px 24px)}.mat-mdc-dialog-container-with-actions .mat-mdc-dialog-content{padding:var(--mat-dialog-with-actions-content-padding, 20px 24px 0)}.mat-mdc-dialog-container .mat-mdc-dialog-title+.mat-mdc-dialog-content{padding-top:0}.mat-mdc-dialog-actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;box-sizing:border-box;min-height:52px;margin:0;border-top:1px solid rgba(0,0,0,0);padding:var(--mat-dialog-actions-padding, 16px 24px);justify-content:var(--mat-dialog-actions-alignment, flex-end)}@media(forced-colors: active){.mat-mdc-dialog-actions{border-top-color:CanvasText}}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-start,.mat-mdc-dialog-actions[align=start]{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}.mat-mdc-dialog-component-host{display:contents}
`],encapsulation:2})}return i})(),No="--mat-dialog-transition-duration";function Lo(i){return i==null?null:typeof i=="number"?i:i.endsWith("ms")?ht(i.substring(0,i.length-2)):i.endsWith("s")?ht(i.substring(0,i.length-1))*1e3:i==="0"?0:null}var Ke=(function(i){return i[i.OPEN=0]="OPEN",i[i.CLOSING=1]="CLOSING",i[i.CLOSED=2]="CLOSED",i})(Ke||{}),G=class{_ref;_config;_containerInstance;componentInstance;componentRef=null;disableClose;id;_afterOpened=new st(1);_beforeClosed=new st(1);_result;_closeFallbackTimeout;_state=Ke.OPEN;_closeInteractionType;constructor(n,e,t){this._ref=n,this._config=e,this._containerInstance=t,this.disableClose=e.disableClose,this.id=n.id,n.addPanelClass("mat-mdc-dialog-panel"),t._animationStateChanged.pipe(ee(o=>o.state==="opened"),V(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),t._animationStateChanged.pipe(ee(o=>o.state==="closed"),V(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),n.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),De(this.backdropClick(),this.keydownEvents().pipe(ee(o=>o.keyCode===27&&!this.disableClose&&!Be(o)))).subscribe(o=>{this.disableClose||(o.preventDefault(),Qi(this,o.type==="keydown"?"keyboard":"mouse"))})}close(n){let e=this._config.closePredicate;e&&!e(n,this._config,this.componentInstance)||(this._result=n,this._containerInstance._animationStateChanged.pipe(ee(t=>t.state==="closing"),V(1)).subscribe(t=>{this._beforeClosed.next(n),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),t.totalTime+100)}),this._state=Ke.CLOSING,this._containerInstance._startExitAnimation())}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(n){let e=this._ref.config.positionStrategy;return n&&(n.left||n.right)?n.left?e.left(n.left):e.right(n.right):e.centerHorizontally(),n&&(n.top||n.bottom)?n.top?e.top(n.top):e.bottom(n.bottom):e.centerVertically(),this._ref.updatePosition(),this}updateSize(n="",e=""){return this._ref.updateSize(n,e),this}addPanelClass(n){return this._ref.addPanelClass(n),this}removePanelClass(n){return this._ref.removePanelClass(n),this}getState(){return this._state}_finishDialogClose(){this._state=Ke.CLOSED,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}};function Qi(i,n,e){return i._closeInteractionType=n,i.close(e)}var we=new P("MatMdcDialogData"),Ki=new P("mat-mdc-dialog-default-options"),Zi=new P("mat-mdc-dialog-scroll-strategy",{providedIn:"root",factory:()=>{let i=c(Ie);return()=>Io(i)}}),bt=(()=>{class i{_defaultOptions=c(Ki,{optional:!0});_scrollStrategy=c(Zi);_parentDialog=c(i,{optional:!0,skipSelf:!0});_idGenerator=c(ft);_injector=c(Ie);_dialog=c(ko);_animationsDisabled=fe();_openDialogsAtThisLevel=[];_afterAllClosedAtThisLevel=new _e;_afterOpenedAtThisLevel=new _e;dialogConfigClass=Ze;_dialogRefConstructor;_dialogContainerType;_dialogDataToken;get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){let e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}afterAllClosed=Mt(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Ft(void 0)));constructor(){this._dialogRefConstructor=G,this._dialogContainerType=Gi,this._dialogDataToken=we}open(e,t){let o;t=O(O({},this._defaultOptions||new Ze),t),t.id=t.id||this._idGenerator.getId("mat-mdc-dialog-"),t.scrollStrategy=t.scrollStrategy||this._scrollStrategy();let r=this._dialog.open(e,J(O({},t),{positionStrategy:Fo(this._injector).centerHorizontally().centerVertically(),disableClose:!0,closePredicate:void 0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,disableAnimations:this._animationsDisabled||t.enterAnimationDuration?.toLocaleString()==="0"||t.exitAnimationDuration?.toString()==="0",container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:t},{provide:Ro,useValue:t}]},templateContext:()=>({dialogRef:o}),providers:(a,_,T)=>(o=new this._dialogRefConstructor(a,t,T),o.updatePosition(t?.position),[{provide:this._dialogContainerType,useValue:T},{provide:this._dialogDataToken,useValue:_.data},{provide:this._dialogRefConstructor,useValue:o}])}));return o.componentRef=r.componentRef,o.componentInstance=r.componentInstance,this.openDialogs.push(o),this.afterOpened.next(o),o.afterClosed().subscribe(()=>{let a=this.openDialogs.indexOf(o);a>-1&&(this.openDialogs.splice(a,1),this.openDialogs.length||this._getAfterAllClosed().next())}),o}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(e){return this.openDialogs.find(t=>t.id===e)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(e){let t=e.length;for(;t--;)e[t].close()}static \u0275fac=function(t){return new(t||i)};static \u0275prov=te({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var Ji=(()=>{class i{_dialogRef=c(G,{optional:!0});_elementRef=c(ie);_dialog=c(bt);constructor(){}ngOnInit(){this._dialogRef||(this._dialogRef=en(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{this._onAdd()})}ngOnDestroy(){this._dialogRef?._containerInstance&&Promise.resolve().then(()=>{this._onRemove()})}static \u0275fac=function(t){return new(t||i)};static \u0275dir=me({type:i})}return i})(),Vo=(()=>{class i extends Ji{id=c(ft).getId("mat-mdc-dialog-title-");_onAdd(){this._dialogRef._containerInstance?._addAriaLabelledBy?.(this.id)}_onRemove(){this._dialogRef?._containerInstance?._removeAriaLabelledBy?.(this.id)}static \u0275fac=(()=>{let e;return function(o){return(e||(e=Fe(i)))(o||i)}})();static \u0275dir=me({type:i,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-mdc-dialog-title","mdc-dialog__title"],hostVars:1,hostBindings:function(t,o){t&2&&ct("id",o.id)},inputs:{id:"id"},exportAs:["matDialogTitle"],features:[Se]})}return i})(),Bo=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275dir=me({type:i,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-mdc-dialog-content","mdc-dialog__content"],features:[At([so])]})}return i})();function en(i,n){let e=i.nativeElement.parentElement;for(;e&&!e.classList.contains("mat-mdc-dialog-container");)e=e.parentElement;return e?n.find(t=>t.id===e.id):null}var Me=Ct(Xt());var Je=class i{dialogRef=c(G);data=c(we);formModel=B({month:(0,Me.default)().add(1,"month").format("MM"),year:(0,Me.default)().year()});form=X(this.formModel);selectedYear=D(()=>this.formModel().year);months=D(()=>{let n=this.createdSnapshots.filter(e=>e.year()===this.selectedYear());return this.allMonths.filter(e=>!n.some(t=>t.month()===e.date.month()))});submitForm(){this.dialogRef.close(this.formModel())}allMonths=Array.from({length:12},(n,e)=>{let t=(0,Me.default)().month(e);return{label:t.format("MMMM"),value:t.format("MM"),date:t}});years=[2025,2026];createdSnapshots=this.data.createdMonths.map(n=>(0,Me.default)(n.month));static \u0275fac=function(e){return new(e||i)};static \u0275cmp=v({type:i,selectors:[["app-create-month-dialog"]],decls:9,vars:8,consts:[[1,"flex","flex-col","items-center","justify-center","p-4","**:text-white!"],["mat-dialog-title",""],["mat-dialog-content","",1,"flex!","w-full","flex-col","gap-2"],[1,"grid","w-full","grid-cols-2","gap-2"],["placeholder","Jahr ausw\xE4hlen","appendTo",".mat-mdc-dialog-title",3,"items","clearable","formField"],["bindLabel","label","bindValue","value","placeholder","Monat ausw\xE4hlen","appendTo",".mat-mdc-dialog-title",3,"items","clearable","formField"],["maffiButton","","icon","CirclePlus",1,"w-full","!justify-center",3,"click"]],template:function(e,t){e&1&&(s(0,"div",0)(1,"h1",1),g(2,"Monat anlegen"),l(),s(3,"div",2)(4,"div",3),b(5,"ng-select",4),S(),b(6,"ng-select",5),S(),l(),s(7,"button",6),m("click",function(){return t.submitForm()}),g(8," Anlegen "),l()()()),e&2&&(p(5),f("items",t.years)("clearable",!1),R(t.form.year,"formField"),p(),f("items",t.months())("clearable",!1),R(t.form.month,"formField"))},dependencies:[Vo,Bo,We,U,q],encapsulation:2})};function Yo(i){return Error(`Unable to find icon with the name "${i}"`)}function tn(){return Error("Could not find HttpClient for use with Angular Material icons. Please add provideHttpClient() to your providers.")}function Wo(i){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${i}".`)}function jo(i){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${i}".`)}var j=class{url;svgText;options;svgElement=null;constructor(n,e,t){this.url=n,this.svgText=e,this.options=t}},zo=(()=>{class i{_httpClient;_sanitizer;_errorHandler;_document;_svgIconConfigs=new Map;_iconSetConfigs=new Map;_cachedIconsByUrl=new Map;_inProgressUrlFetches=new Map;_fontCssClassesByAlias=new Map;_resolvers=[];_defaultFontSetClass=["material-icons","mat-ligature-font"];constructor(e,t,o,r){this._httpClient=e,this._sanitizer=t,this._errorHandler=r,this._document=o}addSvgIcon(e,t,o){return this.addSvgIconInNamespace("",e,t,o)}addSvgIconLiteral(e,t,o){return this.addSvgIconLiteralInNamespace("",e,t,o)}addSvgIconInNamespace(e,t,o,r){return this._addSvgIconConfig(e,t,new j(o,null,r))}addSvgIconResolver(e){return this._resolvers.push(e),this}addSvgIconLiteralInNamespace(e,t,o,r){let a=this._sanitizer.sanitize(pe.HTML,o);if(!a)throw jo(o);let _=he(a);return this._addSvgIconConfig(e,t,new j("",_,r))}addSvgIconSet(e,t){return this.addSvgIconSetInNamespace("",e,t)}addSvgIconSetLiteral(e,t){return this.addSvgIconSetLiteralInNamespace("",e,t)}addSvgIconSetInNamespace(e,t,o){return this._addSvgIconSetConfig(e,new j(t,null,o))}addSvgIconSetLiteralInNamespace(e,t,o){let r=this._sanitizer.sanitize(pe.HTML,t);if(!r)throw jo(t);let a=he(r);return this._addSvgIconSetConfig(e,new j("",a,o))}registerFontClassAlias(e,t=e){return this._fontCssClassesByAlias.set(e,t),this}classNameForFontAlias(e){return this._fontCssClassesByAlias.get(e)||e}setDefaultFontSetClass(...e){return this._defaultFontSetClass=e,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(e){let t=this._sanitizer.sanitize(pe.RESOURCE_URL,e);if(!t)throw Wo(e);let o=this._cachedIconsByUrl.get(t);return o?L(et(o)):this._loadSvgIconFromConfig(new j(e,null)).pipe(Te(r=>this._cachedIconsByUrl.set(t,r)),le(r=>et(r)))}getNamedSvgIcon(e,t=""){let o=$o(t,e),r=this._svgIconConfigs.get(o);if(r)return this._getSvgFromConfig(r);if(r=this._getIconConfigFromResolvers(t,e),r)return this._svgIconConfigs.set(o,r),this._getSvgFromConfig(r);let a=this._iconSetConfigs.get(t);return a?this._getSvgFromIconSetConfigs(e,a):xt(Yo(o))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(e){return e.svgText?L(et(this._svgElementFromConfig(e))):this._loadSvgIconFromConfig(e).pipe(le(t=>et(t)))}_getSvgFromIconSetConfigs(e,t){let o=this._extractIconWithNameFromAnySet(e,t);if(o)return L(o);let r=t.filter(a=>!a.svgText).map(a=>this._loadSvgIconSetFromConfig(a).pipe(Tt(_=>{let I=`Loading icon set URL: ${this._sanitizer.sanitize(pe.RESOURCE_URL,a.url)} failed: ${_.message}`;return this._errorHandler.handleError(new Error(I)),L(null)})));return Dt(r).pipe(le(()=>{let a=this._extractIconWithNameFromAnySet(e,t);if(!a)throw Yo(e);return a}))}_extractIconWithNameFromAnySet(e,t){for(let o=t.length-1;o>=0;o--){let r=t[o];if(r.svgText&&r.svgText.toString().indexOf(e)>-1){let a=this._svgElementFromConfig(r),_=this._extractSvgIconFromSet(a,e,r.options);if(_)return _}}return null}_loadSvgIconFromConfig(e){return this._fetchIcon(e).pipe(Te(t=>e.svgText=t),le(()=>this._svgElementFromConfig(e)))}_loadSvgIconSetFromConfig(e){return e.svgText?L(null):this._fetchIcon(e).pipe(Te(t=>e.svgText=t))}_extractSvgIconFromSet(e,t,o){let r=e.querySelector(`[id="${t}"]`);if(!r)return null;let a=r.cloneNode(!0);if(a.removeAttribute("id"),a.nodeName.toLowerCase()==="svg")return this._setSvgAttributes(a,o);if(a.nodeName.toLowerCase()==="symbol")return this._setSvgAttributes(this._toSvgElement(a),o);let _=this._svgElementFromString(he("<svg></svg>"));return _.appendChild(a),this._setSvgAttributes(_,o)}_svgElementFromString(e){let t=this._document.createElement("DIV");t.innerHTML=e;let o=t.querySelector("svg");if(!o)throw Error("<svg> tag not found");return o}_toSvgElement(e){let t=this._svgElementFromString(he("<svg></svg>")),o=e.attributes;for(let r=0;r<o.length;r++){let{name:a,value:_}=o[r];a!=="id"&&t.setAttribute(a,_)}for(let r=0;r<e.childNodes.length;r++)e.childNodes[r].nodeType===this._document.ELEMENT_NODE&&t.appendChild(e.childNodes[r].cloneNode(!0));return t}_setSvgAttributes(e,t){return e.setAttribute("fit",""),e.setAttribute("height","100%"),e.setAttribute("width","100%"),e.setAttribute("preserveAspectRatio","xMidYMid meet"),e.setAttribute("focusable","false"),t&&t.viewBox&&e.setAttribute("viewBox",t.viewBox),e}_fetchIcon(e){let{url:t,options:o}=e,r=o?.withCredentials??!1;if(!this._httpClient)throw tn();if(t==null)throw Error(`Cannot fetch icon from URL "${t}".`);let a=this._sanitizer.sanitize(pe.RESOURCE_URL,t);if(!a)throw Wo(t);let _=this._inProgressUrlFetches.get(a);if(_)return _;let T=this._httpClient.get(a,{responseType:"text",withCredentials:r}).pipe(le(I=>he(I)),It(()=>this._inProgressUrlFetches.delete(a)),Et());return this._inProgressUrlFetches.set(a,T),T}_addSvgIconConfig(e,t,o){return this._svgIconConfigs.set($o(e,t),o),this}_addSvgIconSetConfig(e,t){let o=this._iconSetConfigs.get(e);return o?o.push(t):this._iconSetConfigs.set(e,[t]),this}_svgElementFromConfig(e){if(!e.svgElement){let t=this._svgElementFromString(e.svgText);this._setSvgAttributes(t,e.options),e.svgElement=t}return e.svgElement}_getIconConfigFromResolvers(e,t){for(let o=0;o<this._resolvers.length;o++){let r=this._resolvers[o](t,e);if(r)return on(r)?new j(r.url,null,r.options):new j(r,null)}}static \u0275fac=function(t){return new(t||i)(ve(zt,8),ve(Ut),ve(ye,8),ve(Ee))};static \u0275prov=te({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function et(i){return i.cloneNode(!0)}function $o(i,n){return i+":"+n}function on(i){return!!(i.url&&i.options)}var nn=["*"],rn=new P("MAT_ICON_DEFAULT_OPTIONS"),an=new P("mat-icon-location",{providedIn:"root",factory:()=>{let i=c(ye),n=i?i.location:null;return{getPathname:()=>n?n.pathname+n.search:""}}}),Uo=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],sn=Uo.map(i=>`[${i}]`).join(", "),ln=/^url\(['"]?#(.*?)['"]?\)$/,Xo=(()=>{class i{_elementRef=c(ie);_iconRegistry=c(zo);_location=c(an);_errorHandler=c(Ee);_defaultColor;get color(){return this._color||this._defaultColor}set color(e){this._color=e}_color;inline=!1;get svgIcon(){return this._svgIcon}set svgIcon(e){e!==this._svgIcon&&(e?this._updateSvgIcon(e):this._svgIcon&&this._clearSvgElement(),this._svgIcon=e)}_svgIcon;get fontSet(){return this._fontSet}set fontSet(e){let t=this._cleanupFontValue(e);t!==this._fontSet&&(this._fontSet=t,this._updateFontIconClasses())}_fontSet;get fontIcon(){return this._fontIcon}set fontIcon(e){let t=this._cleanupFontValue(e);t!==this._fontIcon&&(this._fontIcon=t,this._updateFontIconClasses())}_fontIcon;_previousFontSetClass=[];_previousFontIconClass;_svgName=null;_svgNamespace=null;_previousPath;_elementsWithExternalReferences;_currentIconFetch=se.EMPTY;constructor(){let e=c(new Yt("aria-hidden"),{optional:!0}),t=c(rn,{optional:!0});t&&(t.color&&(this.color=this._defaultColor=t.color),t.fontSet&&(this.fontSet=t.fontSet)),e||this._elementRef.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(e){if(!e)return["",""];let t=e.split(":");switch(t.length){case 1:return["",t[0]];case 2:return t;default:throw Error(`Invalid icon name: "${e}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){let e=this._elementsWithExternalReferences;if(e&&e.size){let t=this._location.getPathname();t!==this._previousPath&&(this._previousPath=t,this._prependPathToReferences(t))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(e){this._clearSvgElement();let t=this._location.getPathname();this._previousPath=t,this._cacheChildrenWithExternalReferences(e),this._prependPathToReferences(t),this._elementRef.nativeElement.appendChild(e)}_clearSvgElement(){let e=this._elementRef.nativeElement,t=e.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();t--;){let o=e.childNodes[t];(o.nodeType!==1||o.nodeName.toLowerCase()==="svg")&&o.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;let e=this._elementRef.nativeElement,t=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(o=>o.length>0);this._previousFontSetClass.forEach(o=>e.classList.remove(o)),t.forEach(o=>e.classList.add(o)),this._previousFontSetClass=t,this.fontIcon!==this._previousFontIconClass&&!t.includes("mat-ligature-font")&&(this._previousFontIconClass&&e.classList.remove(this._previousFontIconClass),this.fontIcon&&e.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(e){return typeof e=="string"?e.trim().split(" ")[0]:e}_prependPathToReferences(e){let t=this._elementsWithExternalReferences;t&&t.forEach((o,r)=>{o.forEach(a=>{r.setAttribute(a.name,`url('${e}#${a.value}')`)})})}_cacheChildrenWithExternalReferences(e){let t=e.querySelectorAll(sn),o=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let r=0;r<t.length;r++)Uo.forEach(a=>{let _=t[r],T=_.getAttribute(a),I=T?T.match(ln):null;if(I){let $=o.get(_);$||($=[],o.set(_,$)),$.push({name:a,value:I[1]})}})}_updateSvgIcon(e){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),e){let[t,o]=this._splitIconName(e);t&&(this._svgNamespace=t),o&&(this._svgName=o),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(o,t).pipe(V(1)).subscribe(r=>this._setSvgElement(r),r=>{let a=`Error retrieving icon ${t}:${o}! ${r.message}`;this._errorHandler.handleError(new Error(a))})}}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=v({type:i,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:10,hostBindings:function(t,o){t&2&&(ne("data-mat-icon-type",o._usingFontIcon()?"font":"svg")("data-mat-icon-name",o._svgName||o.fontIcon)("data-mat-icon-namespace",o._svgNamespace||o.fontSet)("fontIcon",o._usingFontIcon()?o.fontIcon:null),re(o.color?"mat-"+o.color:""),Y("mat-icon-inline",o.inline)("mat-icon-no-color",o.color!=="primary"&&o.color!=="accent"&&o.color!=="warn"))},inputs:{color:"color",inline:[2,"inline","inline",W],svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],ngContentSelectors:nn,decls:1,vars:0,template:function(t,o){t&1&&(ke(),Oe(0))},styles:[`mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color, inherit)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}
`],encapsulation:2,changeDetection:0})}return i})();var Aa=qo(24,i=>String(i)),ka=qo(60,i=>String(i));function qo(i,n){let e=Array(i);for(let t=0;t<i;t++)e[t]=n(t);return e}var Go=(()=>{class i{transform(e){return wt(e)?e:L(e)}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275pipe=Rt({name:"toObservable",type:i,pure:!0})}}return i})();function dn(i,n){if(i&1){let e=y();s(0,"button",4),m("click",function(){u(e);let o=d(2);return h(o._onClose())}),s(1,"mat-icon"),g(2,"close"),l()()}}function cn(i,n){if(i&1&&(s(0,"h1",0)(1,"span"),g(2),w(3,"toObservable"),w(4,"async"),l(),C(5,dn,3,0,"button",3),l()),i&2){let e=d();p(2),z(M(4,4,M(3,2,e.data.title))),p(3),x(e.data.showCloseIcon?5:-1)}}function pn(i,n){if(i&1&&(s(0,"div",1)(1,"p"),g(2),w(3,"toObservable"),w(4,"async"),l()()),i&2){let e=d();p(2),z(M(4,3,M(3,1,e.data.description)))}}function mn(i,n){if(i&1){let e=y();s(0,"button",7),m("click",function(){u(e);let o=d().$implicit,r=d();return h(r._onClick(o.onClick))}),g(1),w(2,"toObservable"),w(3,"async"),l()}if(i&2){let e=d().$implicit;re(e.class),f("matButton",e.type||"text")("color",e.color),p(),A(" ",M(3,7,M(2,5,e.text))," ")}}function un(i,n){if(i&1){let e=y();s(0,"button",8),m("click",function(){u(e);let o=d().$implicit,r=d();return h(r._onClick(o.onClick))}),g(1),w(2,"toObservable"),w(3,"async"),l()}if(i&2){let e=d().$implicit;re(e.class),f("matButton",e.type||"text")("color",e.color),p(),A(" ",M(3,7,M(2,5,e.text))," ")}}function hn(i,n){if(i&1&&C(0,mn,4,9,"button",5)(1,un,4,9,"button",6),i&2){let e=n.$implicit;x(e.focusInitial?0:1)}}var Qo=(()=>{class i{constructor(){this.dialogRef=c(G),this.data=c(we)}_onClick(e){e&&e.call(this),this._onClose()}_onClose(){this.dialogRef.close()}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=v({type:i,selectors:[["mtx-dialog-container"]],hostAttrs:[1,"mtx-dialog-container"],exportAs:["mtxDialogContainer"],decls:5,vars:2,consts:[[1,"mtx-dialog-title"],[1,"mtx-dialog-content"],[1,"mtx-dialog-actions"],["matIconButton",""],["matIconButton","",3,"click"],["cdkFocusInitial","",3,"matButton","color","class"],[3,"matButton","color","class"],["cdkFocusInitial","",3,"click","matButton","color"],[3,"click","matButton","color"]],template:function(t,o){t&1&&(C(0,cn,6,6,"h1",0),C(1,pn,5,5,"div",1),s(2,"div",2),Re(3,hn,2,1,null,null,Ot),l()),t&2&&(x(o.data.title?0:-1),p(),x(o.data.description?1:-1),p(2),Ae(o.data.buttons))},dependencies:[io,oo,Xo,Wt,Go],styles:[`.mtx-dialog-title{display:flex;justify-content:space-between;align-items:center;padding:8px 24px;margin:0;line-height:48px;font-weight:500;font-size:20px}.mtx-dialog-title .mat-mdc-button-base{margin-right:-16px}[dir=rtl] .mtx-dialog-title .mat-mdc-button-base{margin-right:0;margin-left:-16px}.mtx-dialog-content{display:block;max-height:65vh;padding:0 24px;overflow:auto;-webkit-overflow-scrolling:touch}.mtx-dialog-content p{margin-top:0}.mtx-dialog-actions{display:flex;flex-wrap:wrap;align-items:center;justify-content:flex-end;padding:8px}.mtx-dialog-actions .mat-mdc-button-base{margin-left:8px}[dir=rtl] .mtx-dialog-actions .mat-mdc-button-base{margin-left:0;margin-right:8px}
`],encapsulation:2,changeDetection:0})}}return i})(),fn={title:"",description:"",buttons:[{text:"Cancel",onClick:()=>{}},{color:"warn",text:"OK",focusInitial:!0,onClick:()=>{}}],showCloseIcon:!1,disableClose:!0,width:"300px"},Ko=(()=>{class i{constructor(){this.dialog=c(bt)}originalOpen(e=Qo,t){return this.dialog.open(e,t)}open(e,t=Qo){let o=Object.assign({},fn,e);return this.dialog.open(t,J(O({},o),{data:o}))}alert(e,t="",o=()=>{}){this.open({title:e,description:t,buttons:[{color:"warn",text:"OK",onClick:()=>o()}]})}confirm(e,t="",o=()=>{},r=()=>{}){this.open({title:e,description:t,buttons:[{text:"Cancel",onClick:()=>r()},{color:"warn",text:"OK",focusInitial:!0,onClick:()=>o()}]})}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=te({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var tt=class i{facade=c(k);budgets=this.facade.budgets;total=this.facade.totalBudgets;isLoading=this.facade.isMonthLoading;isSaving=this.facade.isSavingFixedCost;isAdded=this.facade.isBudgetAdded;add(){this.facade.addBudget()}delete(n){this.facade.deleteBudget(n)}update(n){this.facade.updateBudget(n)}addHistory(n){this.facade.addBudgetHistoryEntry(n)}deleteHistory({rowId:n,historyId:e}){this.facade.deleteBudgetHistoryEntry(n,e)}updateHistory({rowId:n,entry:e}){this.facade.updateBudgetHistoryEntry(n,e)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=v({type:i,selectors:[["app-monthly-budgets-table"]],decls:1,vars:7,consts:[["title","Budgets",3,"addRow","deleteRow","updateRow","addHistory","deleteHistory","updateHistory","expanded","showForecast","data","isAdded","isLoading","isSaving","total"]],template:function(e,t){e&1&&(s(0,"app-money-with-history-table",0),m("addRow",function(){return t.add()})("deleteRow",function(r){return t.delete(r)})("updateRow",function(r){return t.update(r)})("addHistory",function(r){return t.addHistory(r)})("deleteHistory",function(r){return t.deleteHistory(r)})("updateHistory",function(r){return t.updateHistory(r)}),l()),e&2&&f("expanded",!1)("showForecast",!0)("data",t.budgets())("isAdded",t.isAdded())("isLoading",t.isLoading())("isSaving",t.isSaving())("total",t.total())},dependencies:[ge],encapsulation:2})};function gn(i,n){if(i&1&&b(0,"app-revenue-month-table")(1,"app-fixed-costs-month-table")(2,"app-monthly-budgets-table")(3,"app-variable-costs-table")(4,"app-balance",7),i&2){let e=d();p(4),f("balance",e.balance())}}var Zo=class i{facade=c(k);mtxDialog=c(Ko);year=E();month=E();snapshots=this.facade.snapshots;createdYears=this.facade.createdYears;formModel=Bt(()=>{let n=(0,ot.default)().format("YYYY-MM-DD"),e=this.year();return this.year()&&this.month()&&(n=`${this.year()}-${this.month()}`),e&&!this.isYearValid(e)&&(e=null),{snapshot:n,year:e}});form=X(this.formModel);currentYearSnapshots=D(()=>{let n=this.selectedYear();return this.snapshots().filter(e=>(0,ot.default)(e.month).format("YYYY").includes(n||""))});selectedMonth=D(()=>this.formModel().snapshot);selectedYear=D(()=>this.formModel().year);balance=D(()=>{let n=this.facade.totalFixedCosts(),e=this.facade.totalVariableCosts();return this.facade.totalRevenue()-(n+e)});loadMonth=oe(()=>{let n=this.selectedMonth(),e=this.selectedYear();n&&e&&this.isYearValid(e)&&this.isSnapshotCreated(n)&&this.facade.getMonth(n)});navigateOnFormModelChange=oe(()=>{let{snapshot:n,year:e}=this.formModel(),t=this.facade.areMonthsLoaded();ce(()=>{if(!t)return;let o=n?(0,ot.default)(n).format("MM"):null;if(e&&!n){this.facade.navigateTo(e);return}n&&this.facade.navigateTo(e,o)})});constructor(){this.facade.getCreatedMonths()}openCreateMonthDialog(){this.mtxDialog.originalOpen(Je,{height:"400px",data:{createdMonths:this.snapshots()}}).afterClosed().pipe(V(1)).subscribe(e=>{this.createMonth(e)})}createMonth(n){let e=`${n.year}-${n.month}-01`;this.facade.createMonth(e)}isYearValid(n){return this.createdYears().includes(n)}isSnapshotCreated(n){return this.snapshots().map(e=>e.month).includes(n)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=v({type:i,selectors:[["app-monthly-check"]],inputs:{year:[1,"year"],month:[1,"month"]},decls:9,vars:9,consts:[["title","Monatscheck"],["maffiButton","","icon","CirclePlus",3,"click"],[1,"container-max-sm","mt-2","flex","flex-col","items-center","gap-2","p-2","md:p-6"],[1,"grid","w-full","grid-cols-2","gap-4"],["placeholder","Jahr ausw\xE4hlen",3,"items","clearable","formField"],["bindLabel","translated","bindValue","month","placeholder","Monat ausw\xE4hlen",1,"higher",3,"items","clearable","formField"],[1,"flex","w-full","flex-col","gap-2","*:w-full"],[3,"balance"]],template:function(e,t){e&1&&(s(0,"app-header",0)(1,"button",1),m("click",function(){return t.openCreateMonthDialog()}),g(2," Monat anlegen "),l()(),s(3,"section",2)(4,"div",3),b(5,"ng-select",4),S(),b(6,"ng-select",5),S(),l(),s(7,"cdk-accordion",6),be("animate-fade-in"),C(8,gn,5,1),l()()),e&2&&(p(5),f("items",t.createdYears())("clearable",!1),R(t.form.year,"formField"),p(),f("items",t.currentYearSnapshots())("clearable",!1),R(t.form.snapshot,"formField"),p(2),x(t.selectedMonth()?8:-1))},dependencies:[to,Kt,We,ao,je,$e,wo,Qe,U,So,tt,q],encapsulation:2})};export{Zo as MonthlyCheckComponent};
