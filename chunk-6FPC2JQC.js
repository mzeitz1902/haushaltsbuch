import{h as P,i as F,j as d,k as C,l as y,m as h,n as g,o as R,p as b,q as p,r as l}from"./chunk-4ZJVGO4V.js";import{B as m,_ as c,a as U,b as M,ea as v,hc as f,ja as i,v as n}from"./chunk-L7P7ONIE.js";function O(t){return t.replace(/,/g,".")}function k(t){return M(U({},t),{value:O(t.value)})}var S=class t{getFixedCosts(){return n(p.from("fixed_costs").select("*").order("id")).pipe(m(e=>e.data?.map(k)??null))}addFixedCost(e){return n(p.from("fixed_costs").insert(e).select("*").single()).pipe(m(s=>s.data))}updateFixedCost(e){return n(p.from("fixed_costs").update({category:e.category,value:e.value}).eq("id",e.id).select("*").single()).pipe(m(s=>s.data))}deleteFixedCost(e){return n(p.from("fixed_costs").delete().eq("id",e))}static \u0275fac=function(s){return new(s||t)};static \u0275prov=v({token:t,factory:t.\u0275fac})};var u=h({source:"Fixed Costs",events:{load:void 0,loadSuccess:void 0,add:void 0,addSuccess:void 0,addFailure:void 0,update:void 0,updateSuccess:void 0,updateFailure:void 0,delete:void 0,deleteSuccess:void 0,deleteFailure:void 0}}),o={load:u.load,loadSuccess:u.loadSuccess,add:u.add,addSuccess:u.addSuccess,addFailure:u.addFailure,update:u.update,updateSuccess:u.updateSuccess,updateFailure:u.updateFailure,delete:u.delete,deleteSuccess:u.deleteSuccess,deleteFailure:u.deleteFailure};function I(){let t=i(C),e=i(S);return{$load:t.on(o.load).pipe(c(()=>e.getFixedCosts().pipe(l({next:s=>o.loadSuccess(s),error:console.error})))),add$:t.on(o.add).pipe(c(({payload:s})=>e.addFixedCost(s).pipe(l({next:r=>o.addSuccess(r),error:r=>o.addFailure(r)})))),update$:t.on(o.update).pipe(c(({payload:s})=>e.updateFixedCost(s).pipe(l({next:r=>o.updateSuccess(r),error:r=>o.updateFailure(r)})))),delete$:t.on(o.delete).pipe(c(({payload:s})=>e.deleteFixedCost(s).pipe(l({next:()=>o.deleteSuccess(s),error:r=>o.deleteFailure(r)}))))}}var w=P(b("fixed-costs"),F({fixedCosts:new Array,loadProcessStatus:"init",saveProcessStatus:"init",addProcessStatus:"init"}),g(()=>I()),R(d(o.load,()=>({loadProcessStatus:"pending"})),d(o.loadSuccess,({payload:t})=>({fixedCosts:t??[],loadProcessStatus:"success"})),d(o.add,()=>({addProcessStatus:"pending"})),d(o.addSuccess,({payload:t},e)=>({fixedCosts:e.fixedCosts.concat(t),addProcessStatus:"success"})),d(o.update,()=>({saveProcessStatus:"pending"})),d(o.updateSuccess,({payload:t},e)=>({fixedCosts:e.fixedCosts.map(s=>s.id===t.id?t:s),saveProcessStatus:"success"})),d(o.deleteSuccess,({payload:t},e)=>({fixedCosts:e.fixedCosts.filter(s=>s.id!==t)}))));var A=class t{dispatcher=i(y);store=i(w);loadProcessStatus=this.store.loadProcessStatus;saveProcessStatus=this.store.saveProcessStatus;addProcessStatus=this.store.addProcessStatus;fixedCosts=this.store.fixedCosts;isLoading=f(()=>this.loadProcessStatus()==="pending");isSaving=f(()=>this.saveProcessStatus()==="pending");isAdded=f(()=>this.addProcessStatus()==="success");loadFixedCosts(){this.dispatcher.dispatch(o.load())}addFixedCost(e){this.dispatcher.dispatch(o.add(e))}updateFixedCost(e){this.dispatcher.dispatch(o.update(e))}deleteFixedCost(e){this.dispatcher.dispatch(o.delete(e))}static \u0275fac=function(s){return new(s||t)};static \u0275prov=v({token:t,factory:t.\u0275fac})};function Se(){return[S,A,w]}var a=h({source:"Revenue",events:{load:void 0,loadSuccess:void 0,add:void 0,addSuccess:void 0,addFailure:void 0,update:void 0,updateSuccess:void 0,updateFailure:void 0,delete:void 0,deleteSuccess:void 0,deleteFailure:void 0}});var x=class t{getRevenue(){return n(p.from("revenue").select("*").order("id")).pipe(m(e=>e.data))}addRevenue(e){return n(p.from("revenue").insert(e).select("*").single()).pipe(m(s=>s.data))}updateRevenue(e){return n(p.from("revenue").update({category:e.category,value:e.value}).eq("id",e.id).select("*").single()).pipe(m(s=>s.data))}deleteRevenue(e){return n(p.from("revenue").delete().eq("id",e))}static \u0275fac=function(s){return new(s||t)};static \u0275prov=v({token:t,factory:t.\u0275fac})};function N(){let t=i(C),e=i(x);return{$load:t.on(a.load).pipe(c(()=>e.getRevenue().pipe(l({next:s=>a.loadSuccess(s),error:console.error})))),add$:t.on(a.add).pipe(c(({payload:s})=>e.addRevenue(s).pipe(l({next:r=>a.addSuccess(r),error:r=>a.addFailure(r)})))),update$:t.on(a.update).pipe(c(({payload:s})=>e.updateRevenue(s).pipe(l({next:r=>a.updateSuccess(r),error:r=>a.updateFailure(r)})))),delete$:t.on(a.delete).pipe(c(({payload:s})=>e.deleteRevenue(s).pipe(l({next:()=>a.deleteSuccess(s),error:r=>a.deleteFailure(r)}))))}}var D=P(b("revenue"),F({revenue:new Array,loadProcessStatus:"init",saveProcessStatus:"init",addProcessStatus:"init"}),g(()=>N()),R(d(a.load,()=>({loadProcessStatus:"pending"})),d(a.loadSuccess,({payload:t})=>({revenue:t??[],loadProcessStatus:"success"})),d(a.add,()=>({addProcessStatus:"pending"})),d(a.addSuccess,({payload:t},e)=>({revenue:e.revenue.concat(t),addProcessStatus:"success"})),d(a.update,()=>({saveProcessStatus:"pending"})),d(a.updateSuccess,({payload:t},e)=>({revenue:e.revenue.map(s=>s.id===t.id?t:s),saveProcessStatus:"success"})),d(a.deleteSuccess,({payload:t},e)=>({revenue:e.revenue.filter(s=>s.id!==t)}))));var E=class t{dispatcher=i(y);store=i(D);loadProcessStatus=this.store.loadProcessStatus;saveProcessStatus=this.store.saveProcessStatus;addProcessStatus=this.store.addProcessStatus;revenue=this.store.revenue;isLoading=f(()=>this.loadProcessStatus()==="pending");isSaving=f(()=>this.saveProcessStatus()==="pending");isAdded=f(()=>this.addProcessStatus()==="success");loadRevenue(){this.dispatcher.dispatch(a.load())}addRevenue(e){this.dispatcher.dispatch(a.add(e))}updateRevenue(e){this.dispatcher.dispatch(a.update(e))}deleteRevenue(e){this.dispatcher.dispatch(a.delete(e))}static \u0275fac=function(s){return new(s||t)};static \u0275prov=v({token:t,factory:t.\u0275fac})};function Qe(){return[x,E,D]}export{A as a,Se as b,E as c,Qe as d};
