import{$ as Xn,$a as tt,$b as gd,A as xr,Aa as Rr,Ac as wd,B as G1,Bc as ke,Ca as Yn,Cc as Vr,D as T,Da as ne,Db as ta,E as Ir,Ea as td,Eb as aa,Ec as Cd,F as Ve,Fa as ds,Fb as ge,G as rs,Ga as oe,Gb as Ea,H as Wn,Ha as se,Hb as yd,I as Kn,Ia as ls,Ib as fd,J as W1,Ja as W,Jb as ps,Ka as ad,Kb as Fr,L as ns,La as Er,Lb as Pe,M as Je,Ma as rd,Mb as te,N as Zn,Na as vt,Nb as it,O as kt,Oa as nd,Ob as Ce,P as ea,Pa as Tr,Pb as Be,Q as K1,Qa as hs,Qb as ei,R as is,Ra as id,Rb as _e,S as Ye,Sa as j,Sb as be,T as os,Ta as Da,U as Lr,Ua as od,Ub as Or,V as Rt,Va as sd,Vb as ti,W as ss,Wa as le,Wb as Ta,X as Z1,Xa as Le,Xb as ra,Ya as Mt,Yb as $e,Z as X1,Za as et,Zb as Pa,_a as Aa,_b as wt,a as k,aa as Dr,ab as A,ac as Fa,b as P,ba as ye,bb as at,c as B1,ca as Te,cb as cd,cc as ae,d as At,da as Q,db as us,dc as ai,e as e2,ea as O,eb as Z,ec as md,f as U,fa as Jn,fb as ce,g as Xe,ga as Et,gb as I,h as Jt,ha as b,hb as Qn,i as H1,ia as ie,ib as $,ic as ys,j as ts,ja as J1,jb as rt,jc as fs,k as N1,ka as D,kb as dd,kc as kd,l as Yt,la as z,lb as Pr,lc as vd,m as as,ma as f,n as br,na as Y1,nb as ld,nc as Md,o as Y,ob as Ra,oc as B,p as Me,pa as Q1,pb as nt,pc as me,q as U1,qa as Tt,qc as Ot,ra as Qe,rb as ze,rc as ri,s as $1,sa as Pt,sb as qe,sc as gs,ta as Ft,tb as hd,tc as De,u as dt,ua as Ar,ub as ud,uc as jr,v as Qt,va as ed,vb as pd,w as _,wa as Ie,wb as we,x as de,xa as N,xb as F,y as x,ya as lt,yb as V,yc as Ge,z as Sr,za as cs,zb as fe,zc as jt}from"./chunk-E7IVAGLR.js";var da=At((i3,Hi)=>{"use strict";var Gl,Wl,Kl,Zl,Xl,Jl,Yl,Ql,eh,th,ah,rh,nh,qi,lc,ih,oh,sh,tr,ch,dh,lh,hh,uh,ph,yh,fh,gh,Bi,mh,kh,vh;(function(r){var t=typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:{};typeof define=="function"&&define.amd?define("tslib",["exports"],function(a){r(e(t,e(a)))}):typeof Hi=="object"&&typeof Hi.exports=="object"?r(e(t,e(Hi.exports))):r(e(t));function e(a,n){return a!==t&&(typeof Object.create=="function"?Object.defineProperty(a,"__esModule",{value:!0}):a.__esModule=!0),function(i,o){return a[i]=n?n(i,o):o}}})(function(r){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])};Gl=function(i,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");t(i,o);function s(){this.constructor=i}i.prototype=o===null?Object.create(o):(s.prototype=o.prototype,new s)},Wl=Object.assign||function(i){for(var o,s=1,c=arguments.length;s<c;s++){o=arguments[s];for(var d in o)Object.prototype.hasOwnProperty.call(o,d)&&(i[d]=o[d])}return i},Kl=function(i,o){var s={};for(var c in i)Object.prototype.hasOwnProperty.call(i,c)&&o.indexOf(c)<0&&(s[c]=i[c]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,c=Object.getOwnPropertySymbols(i);d<c.length;d++)o.indexOf(c[d])<0&&Object.prototype.propertyIsEnumerable.call(i,c[d])&&(s[c[d]]=i[c[d]]);return s},Zl=function(i,o,s,c){var d=arguments.length,l=d<3?o:c===null?c=Object.getOwnPropertyDescriptor(o,s):c,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(i,o,s,c);else for(var p=i.length-1;p>=0;p--)(h=i[p])&&(l=(d<3?h(l):d>3?h(o,s,l):h(o,s))||l);return d>3&&l&&Object.defineProperty(o,s,l),l},Xl=function(i,o){return function(s,c){o(s,c,i)}},Jl=function(i,o,s,c,d,l){function h(pe){if(pe!==void 0&&typeof pe!="function")throw new TypeError("Function expected");return pe}for(var p=c.kind,u=p==="getter"?"get":p==="setter"?"set":"value",y=!o&&i?c.static?i:i.prototype:null,m=o||(y?Object.getOwnPropertyDescriptor(y,c.name):{}),g,v=!1,C=s.length-1;C>=0;C--){var M={};for(var w in c)M[w]=w==="access"?{}:c[w];for(var w in c.access)M.access[w]=c.access[w];M.addInitializer=function(pe){if(v)throw new TypeError("Cannot add initializers after decoration has completed");l.push(h(pe||null))};var E=(0,s[C])(p==="accessor"?{get:m.get,set:m.set}:m[u],M);if(p==="accessor"){if(E===void 0)continue;if(E===null||typeof E!="object")throw new TypeError("Object expected");(g=h(E.get))&&(m.get=g),(g=h(E.set))&&(m.set=g),(g=h(E.init))&&d.unshift(g)}else(g=h(E))&&(p==="field"?d.unshift(g):m[u]=g)}y&&Object.defineProperty(y,c.name,m),v=!0},Yl=function(i,o,s){for(var c=arguments.length>2,d=0;d<o.length;d++)s=c?o[d].call(i,s):o[d].call(i);return c?s:void 0},Ql=function(i){return typeof i=="symbol"?i:"".concat(i)},eh=function(i,o,s){return typeof o=="symbol"&&(o=o.description?"[".concat(o.description,"]"):""),Object.defineProperty(i,"name",{configurable:!0,value:s?"".concat(s," ",o):o})},th=function(i,o){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,o)},ah=function(i,o,s,c){function d(l){return l instanceof s?l:new s(function(h){h(l)})}return new(s||(s=Promise))(function(l,h){function p(m){try{y(c.next(m))}catch(g){h(g)}}function u(m){try{y(c.throw(m))}catch(g){h(g)}}function y(m){m.done?l(m.value):d(m.value).then(p,u)}y((c=c.apply(i,o||[])).next())})},rh=function(i,o){var s={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},c,d,l,h=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return h.next=p(0),h.throw=p(1),h.return=p(2),typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function p(y){return function(m){return u([y,m])}}function u(y){if(c)throw new TypeError("Generator is already executing.");for(;h&&(h=0,y[0]&&(s=0)),s;)try{if(c=1,d&&(l=y[0]&2?d.return:y[0]?d.throw||((l=d.return)&&l.call(d),0):d.next)&&!(l=l.call(d,y[1])).done)return l;switch(d=0,l&&(y=[y[0]&2,l.value]),y[0]){case 0:case 1:l=y;break;case 4:return s.label++,{value:y[1],done:!1};case 5:s.label++,d=y[1],y=[0];continue;case 7:y=s.ops.pop(),s.trys.pop();continue;default:if(l=s.trys,!(l=l.length>0&&l[l.length-1])&&(y[0]===6||y[0]===2)){s=0;continue}if(y[0]===3&&(!l||y[1]>l[0]&&y[1]<l[3])){s.label=y[1];break}if(y[0]===6&&s.label<l[1]){s.label=l[1],l=y;break}if(l&&s.label<l[2]){s.label=l[2],s.ops.push(y);break}l[2]&&s.ops.pop(),s.trys.pop();continue}y=o.call(i,s)}catch(m){y=[6,m],d=0}finally{c=l=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},nh=function(i,o){for(var s in i)s!=="default"&&!Object.prototype.hasOwnProperty.call(o,s)&&Bi(o,i,s)},Bi=Object.create?function(i,o,s,c){c===void 0&&(c=s);var d=Object.getOwnPropertyDescriptor(o,s);(!d||("get"in d?!o.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(i,c,d)}:function(i,o,s,c){c===void 0&&(c=s),i[c]=o[s]},qi=function(i){var o=typeof Symbol=="function"&&Symbol.iterator,s=o&&i[o],c=0;if(s)return s.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&c>=i.length&&(i=void 0),{value:i&&i[c++],done:!i}}};throw new TypeError(o?"Object is not iterable.":"Symbol.iterator is not defined.")},lc=function(i,o){var s=typeof Symbol=="function"&&i[Symbol.iterator];if(!s)return i;var c=s.call(i),d,l=[],h;try{for(;(o===void 0||o-- >0)&&!(d=c.next()).done;)l.push(d.value)}catch(p){h={error:p}}finally{try{d&&!d.done&&(s=c.return)&&s.call(c)}finally{if(h)throw h.error}}return l},ih=function(){for(var i=[],o=0;o<arguments.length;o++)i=i.concat(lc(arguments[o]));return i},oh=function(){for(var i=0,o=0,s=arguments.length;o<s;o++)i+=arguments[o].length;for(var c=Array(i),d=0,o=0;o<s;o++)for(var l=arguments[o],h=0,p=l.length;h<p;h++,d++)c[d]=l[h];return c},sh=function(i,o,s){if(s||arguments.length===2)for(var c=0,d=o.length,l;c<d;c++)(l||!(c in o))&&(l||(l=Array.prototype.slice.call(o,0,c)),l[c]=o[c]);return i.concat(l||Array.prototype.slice.call(o))},tr=function(i){return this instanceof tr?(this.v=i,this):new tr(i)},ch=function(i,o,s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var c=s.apply(i,o||[]),d,l=[];return d=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),p("next"),p("throw"),p("return",h),d[Symbol.asyncIterator]=function(){return this},d;function h(C){return function(M){return Promise.resolve(M).then(C,g)}}function p(C,M){c[C]&&(d[C]=function(w){return new Promise(function(E,pe){l.push([C,w,E,pe])>1||u(C,w)})},M&&(d[C]=M(d[C])))}function u(C,M){try{y(c[C](M))}catch(w){v(l[0][3],w)}}function y(C){C.value instanceof tr?Promise.resolve(C.value.v).then(m,g):v(l[0][2],C)}function m(C){u("next",C)}function g(C){u("throw",C)}function v(C,M){C(M),l.shift(),l.length&&u(l[0][0],l[0][1])}},dh=function(i){var o,s;return o={},c("next"),c("throw",function(d){throw d}),c("return"),o[Symbol.iterator]=function(){return this},o;function c(d,l){o[d]=i[d]?function(h){return(s=!s)?{value:tr(i[d](h)),done:!1}:l?l(h):h}:l}},lh=function(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=i[Symbol.asyncIterator],s;return o?o.call(i):(i=typeof qi=="function"?qi(i):i[Symbol.iterator](),s={},c("next"),c("throw"),c("return"),s[Symbol.asyncIterator]=function(){return this},s);function c(l){s[l]=i[l]&&function(h){return new Promise(function(p,u){h=i[l](h),d(p,u,h.done,h.value)})}}function d(l,h,p,u){Promise.resolve(u).then(function(y){l({value:y,done:p})},h)}},hh=function(i,o){return Object.defineProperty?Object.defineProperty(i,"raw",{value:o}):i.raw=o,i};var e=Object.create?function(i,o){Object.defineProperty(i,"default",{enumerable:!0,value:o})}:function(i,o){i.default=o},a=function(i){return a=Object.getOwnPropertyNames||function(o){var s=[];for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(s[s.length]=c);return s},a(i)};uh=function(i){if(i&&i.__esModule)return i;var o={};if(i!=null)for(var s=a(i),c=0;c<s.length;c++)s[c]!=="default"&&Bi(o,i,s[c]);return e(o,i),o},ph=function(i){return i&&i.__esModule?i:{default:i}},yh=function(i,o,s,c){if(s==="a"&&!c)throw new TypeError("Private accessor was defined without a getter");if(typeof o=="function"?i!==o||!c:!o.has(i))throw new TypeError("Cannot read private member from an object whose class did not declare it");return s==="m"?c:s==="a"?c.call(i):c?c.value:o.get(i)},fh=function(i,o,s,c,d){if(c==="m")throw new TypeError("Private method is not writable");if(c==="a"&&!d)throw new TypeError("Private accessor was defined without a setter");if(typeof o=="function"?i!==o||!d:!o.has(i))throw new TypeError("Cannot write private member to an object whose class did not declare it");return c==="a"?d.call(i,s):d?d.value=s:o.set(i,s),s},gh=function(i,o){if(o===null||typeof o!="object"&&typeof o!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof i=="function"?o===i:i.has(o)},mh=function(i,o,s){if(o!=null){if(typeof o!="object"&&typeof o!="function")throw new TypeError("Object expected.");var c,d;if(s){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");c=o[Symbol.asyncDispose]}if(c===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");c=o[Symbol.dispose],s&&(d=c)}if(typeof c!="function")throw new TypeError("Object not disposable.");d&&(c=function(){try{d.call(this)}catch(l){return Promise.reject(l)}}),i.stack.push({value:o,dispose:c,async:s})}else s&&i.stack.push({async:!0});return o};var n=typeof SuppressedError=="function"?SuppressedError:function(i,o,s){var c=new Error(s);return c.name="SuppressedError",c.error=i,c.suppressed=o,c};kh=function(i){function o(l){i.error=i.hasError?new n(l,i.error,"An error was suppressed during disposal."):l,i.hasError=!0}var s,c=0;function d(){for(;s=i.stack.pop();)try{if(!s.async&&c===1)return c=0,i.stack.push(s),Promise.resolve().then(d);if(s.dispose){var l=s.dispose.call(s.value);if(s.async)return c|=2,Promise.resolve(l).then(d,function(h){return o(h),d()})}else c|=1}catch(h){o(h)}if(c===1)return i.hasError?Promise.reject(i.error):Promise.resolve();if(i.hasError)throw i.error}return d()},vh=function(i,o){return typeof i=="string"&&/^\.\.?\//.test(i)?i.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(s,c,d,l,h){return c?o?".jsx":".js":d&&(!l||!h)?s:d+l+"."+h.toLowerCase()+"js"}):i},r("__extends",Gl),r("__assign",Wl),r("__rest",Kl),r("__decorate",Zl),r("__param",Xl),r("__esDecorate",Jl),r("__runInitializers",Yl),r("__propKey",Ql),r("__setFunctionName",eh),r("__metadata",th),r("__awaiter",ah),r("__generator",rh),r("__exportStar",nh),r("__createBinding",Bi),r("__values",qi),r("__read",lc),r("__spread",ih),r("__spreadArrays",oh),r("__spreadArray",sh),r("__await",tr),r("__asyncGenerator",ch),r("__asyncDelegator",dh),r("__asyncValues",lh),r("__makeTemplateObject",hh),r("__importStar",uh),r("__importDefault",ph),r("__classPrivateFieldGet",yh),r("__classPrivateFieldSet",fh),r("__classPrivateFieldIn",gh),r("__addDisposableResource",mh),r("__disposeResources",kh),r("__rewriteRelativeImportExtension",vh)})});var pc=At(uc=>{"use strict";Object.defineProperty(uc,"__esModule",{value:!0});var hc=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};uc.default=hc});var gc=At(fc=>{"use strict";Object.defineProperty(fc,"__esModule",{value:!0});var Vy=da(),zy=Vy.__importDefault(pc()),yc=class{constructor(t){var e,a;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(e=t.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=t.signal,this.isMaybeSingle=(a=t.isMaybeSingle)!==null&&a!==void 0?a:!1,t.fetch?this.fetch=t.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");let a=this.fetch,n=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,s,c,d;let l=null,h=null,p=null,u=i.status,y=i.statusText;if(i.ok){if(this.method!=="HEAD"){let C=await i.text();C===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((o=this.headers.get("Accept"))===null||o===void 0)&&o.includes("application/vnd.pgrst.plan+text"))?h=C:h=JSON.parse(C))}let g=(s=this.headers.get("Prefer"))===null||s===void 0?void 0:s.match(/count=(exact|planned|estimated)/),v=(c=i.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");g&&v&&v.length>1&&(p=parseInt(v[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(l={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,p=null,u=406,y="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{let g=await i.text();try{l=JSON.parse(g),Array.isArray(l)&&i.status===404&&(h=[],l=null,u=200,y="OK")}catch{i.status===404&&g===""?(u=204,y="No Content"):l={message:g}}if(l&&this.isMaybeSingle&&(!((d=l?.details)===null||d===void 0)&&d.includes("0 rows"))&&(l=null,u=200,y="OK"),l&&this.shouldThrowOnError)throw new zy.default(l)}return{error:l,data:h,count:p,status:u,statusText:y}});return this.shouldThrowOnError||(n=n.catch(i=>{var o,s,c;return{error:{message:`${(o=i?.name)!==null&&o!==void 0?o:"FetchError"}: ${i?.message}`,details:`${(s=i?.stack)!==null&&s!==void 0?s:""}`,hint:"",code:`${(c=i?.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),n.then(t,e)}returns(){return this}overrideTypes(){return this}};fc.default=yc});var vc=At(kc=>{"use strict";Object.defineProperty(kc,"__esModule",{value:!0});var qy=da(),By=qy.__importDefault(gc()),mc=class extends By.default{select(t){let e=!1,a=(t??"*").split("").map(n=>/\s/.test(n)&&!e?"":(n==='"'&&(e=!e),n)).join("");return this.url.searchParams.set("select",a),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:a,foreignTable:n,referencedTable:i=n}={}){let o=i?`${i}.order`:"order",s=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${s?`${s},`:""}${t}.${e?"asc":"desc"}${a===void 0?"":a?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:a=e}={}){let n=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(n,`${t}`),this}range(t,e,{foreignTable:a,referencedTable:n=a}={}){let i=typeof n>"u"?"offset":`${n}.offset`,o=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(o,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:a=!1,buffers:n=!1,wal:i=!1,format:o="text"}={}){var s;let c=[t?"analyze":null,e?"verbose":null,a?"settings":null,n?"buffers":null,i?"wal":null].filter(Boolean).join("|"),d=(s=this.headers.get("Accept"))!==null&&s!==void 0?s:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${d}"; options=${c};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};kc.default=mc});var Ni=At(wc=>{"use strict";Object.defineProperty(wc,"__esModule",{value:!0});var Hy=da(),Ny=Hy.__importDefault(vc()),Uy=new RegExp("[,()]"),Mc=class extends Ny.default{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}in(t,e){let a=Array.from(new Set(e)).map(n=>typeof n=="string"&&Uy.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(t,`in.(${a})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:a,type:n}={}){let i="";n==="plain"?i="pl":n==="phrase"?i="ph":n==="websearch"&&(i="w");let o=a===void 0?"":`(${a})`;return this.url.searchParams.append(t,`${i}fts${o}.${e}`),this}match(t){return Object.entries(t).forEach(([e,a])=>{this.url.searchParams.append(e,`eq.${a}`)}),this}not(t,e,a){return this.url.searchParams.append(t,`not.${e}.${a}`),this}or(t,{foreignTable:e,referencedTable:a=e}={}){let n=a?`${a}.or`:"or";return this.url.searchParams.append(n,`(${t})`),this}filter(t,e,a){return this.url.searchParams.append(t,`${e}.${a}`),this}};wc.default=Mc});var bc=At(_c=>{"use strict";Object.defineProperty(_c,"__esModule",{value:!0});var $y=da(),kn=$y.__importDefault(Ni()),Cc=class{constructor(t,{headers:e={},schema:a,fetch:n}){this.url=t,this.headers=new Headers(e),this.schema=a,this.fetch=n}select(t,e){let{head:a=!1,count:n}=e??{},i=a?"HEAD":"GET",o=!1,s=(t??"*").split("").map(c=>/\s/.test(c)&&!o?"":(c==='"'&&(o=!o),c)).join("");return this.url.searchParams.set("select",s),n&&this.headers.append("Prefer",`count=${n}`),new kn.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:e,defaultToNull:a=!0}={}){var n;let i="POST";if(e&&this.headers.append("Prefer",`count=${e}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(t)){let o=t.reduce((s,c)=>s.concat(Object.keys(c)),[]);if(o.length>0){let s=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",s.join(","))}}return new kn.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}upsert(t,{onConflict:e,ignoreDuplicates:a=!1,count:n,defaultToNull:i=!0}={}){var o;let s="POST";if(this.headers.append("Prefer",`resolution=${a?"ignore":"merge"}-duplicates`),e!==void 0&&this.url.searchParams.set("on_conflict",e),n&&this.headers.append("Prefer",`count=${n}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(t)){let c=t.reduce((d,l)=>d.concat(Object.keys(l)),[]);if(c.length>0){let d=[...new Set(c)].map(l=>`"${l}"`);this.url.searchParams.set("columns",d.join(","))}}return new kn.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(t,{count:e}={}){var a;let n="PATCH";return e&&this.headers.append("Prefer",`count=${e}`),new kn.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}delete({count:t}={}){var e;let a="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new kn.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}};_c.default=Cc});var wh=At(xc=>{"use strict";Object.defineProperty(xc,"__esModule",{value:!0});var Mh=da(),Gy=Mh.__importDefault(bc()),Wy=Mh.__importDefault(Ni()),Sc=class r{constructor(t,{headers:e={},schema:a,fetch:n}={}){this.url=t,this.headers=new Headers(e),this.schemaName=a,this.fetch=n}from(t){let e=new URL(`${this.url}/${t}`);return new Gy.default(e,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new r(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,e={},{head:a=!1,get:n=!1,count:i}={}){var o;let s,c=new URL(`${this.url}/rpc/${t}`),d;a||n?(s=a?"HEAD":"GET",Object.entries(e).filter(([h,p])=>p!==void 0).map(([h,p])=>[h,Array.isArray(p)?`{${p.join(",")}}`:`${p}`]).forEach(([h,p])=>{c.searchParams.append(h,p)})):(s="POST",d=e);let l=new Headers(this.headers);return i&&l.set("Prefer",`count=${i}`),new Wy.default({method:s,url:c,headers:l,schema:this.schemaName,body:d,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};xc.default=Sc});var Lh=At(Re=>{"use strict";Object.defineProperty(Re,"__esModule",{value:!0});Re.PostgrestError=Re.PostgrestBuilder=Re.PostgrestTransformBuilder=Re.PostgrestFilterBuilder=Re.PostgrestQueryBuilder=Re.PostgrestClient=void 0;var ar=da(),Ch=ar.__importDefault(wh());Re.PostgrestClient=Ch.default;var _h=ar.__importDefault(bc());Re.PostgrestQueryBuilder=_h.default;var bh=ar.__importDefault(Ni());Re.PostgrestFilterBuilder=bh.default;var Sh=ar.__importDefault(vc());Re.PostgrestTransformBuilder=Sh.default;var xh=ar.__importDefault(gc());Re.PostgrestBuilder=xh.default;var Ih=ar.__importDefault(pc());Re.PostgrestError=Ih.default;Re.default={PostgrestClient:Ch.default,PostgrestQueryBuilder:_h.default,PostgrestFilterBuilder:bh.default,PostgrestTransformBuilder:Sh.default,PostgrestBuilder:xh.default,PostgrestError:Ih.default}});var Sd=null;function We(){return Sd}function ms(r){Sd??=r}var zr=class{},ks=(()=>{class r{historyGo(e){throw new Error("")}static \u0275fac=function(a){return new(a||r)};static \u0275prov=b({token:r,factory:()=>f(xd),providedIn:"platform"})}return r})();var xd=(()=>{class r extends ks{_location;_history;_doc=f(N);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return We().getBaseHref(this._doc)}onPopState(e){let a=We().getGlobalEventTarget(this._doc,"window");return a.addEventListener("popstate",e,!1),()=>a.removeEventListener("popstate",e)}onHashChange(e){let a=We().getGlobalEventTarget(this._doc,"window");return a.addEventListener("hashchange",e,!1),()=>a.removeEventListener("hashchange",e)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(e){this._location.pathname=e}pushState(e,a,n){this._history.pushState(e,a,n)}replaceState(e,a,n){this._history.replaceState(e,a,n)}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}static \u0275fac=function(a){return new(a||r)};static \u0275prov=b({token:r,factory:()=>new r,providedIn:"platform"})}return r})();function Id(r,t){return r?t?r.endsWith("/")?t.startsWith("/")?r+t.slice(1):r+t:t.startsWith("/")?r+t:`${r}/${t}`:r:t}function _d(r){let t=r.search(/#|\?|$/);return r[t-1]==="/"?r.slice(0,t-1)+r.slice(t):r}function Vt(r){return r&&r[0]!=="?"?`?${r}`:r}var Oa=(()=>{class r{historyGo(e){throw new Error("")}static \u0275fac=function(a){return new(a||r)};static \u0275prov=b({token:r,factory:()=>f(Dd),providedIn:"root"})}return r})(),Ld=new D(""),Dd=(()=>{class r extends Oa{_platformLocation;_baseHref;_removeListenerFns=[];constructor(e,a){super(),this._platformLocation=e,this._baseHref=a??this._platformLocation.getBaseHrefFromDOM()??f(N).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return Id(this._baseHref,e)}path(e=!1){let a=this._platformLocation.pathname+Vt(this._platformLocation.search),n=this._platformLocation.hash;return n&&e?`${a}${n}`:a}pushState(e,a,n,i){let o=this.prepareExternalUrl(n+Vt(i));this._platformLocation.pushState(e,a,o)}replaceState(e,a,n,i){let o=this.prepareExternalUrl(n+Vt(i));this._platformLocation.replaceState(e,a,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static \u0275fac=function(a){return new(a||r)(z(ks),z(Ld,8))};static \u0275prov=b({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),ja=(()=>{class r{_subject=new Y;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(e){this._locationStrategy=e;let a=this._locationStrategy.getBaseHref();this._basePath=r2(_d(bd(a))),this._locationStrategy.onPopState(n=>{this._subject.next({url:this.path(!0),pop:!0,state:n.state,type:n.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,a=""){return this.path()==this.normalize(e+Vt(a))}normalize(e){return r.stripTrailingSlash(a2(this._basePath,bd(e)))}prepareExternalUrl(e){return e&&e[0]!=="/"&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,a="",n=null){this._locationStrategy.pushState(n,"",e,a),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Vt(a)),n)}replaceState(e,a="",n=null){this._locationStrategy.replaceState(n,"",e,a),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Vt(a)),n)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription??=this.subscribe(a=>{this._notifyUrlChangeListeners(a.url,a.state)}),()=>{let a=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(a,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",a){this._urlChangeListeners.forEach(n=>n(e,a))}subscribe(e,a,n){return this._subject.subscribe({next:e,error:a??void 0,complete:n??void 0})}static normalizeQueryParams=Vt;static joinWithSlash=Id;static stripTrailingSlash=_d;static \u0275fac=function(a){return new(a||r)(z(Oa))};static \u0275prov=b({token:r,factory:()=>t2(),providedIn:"root"})}return r})();function t2(){return new ja(z(Oa))}function a2(r,t){if(!r||!t.startsWith(r))return t;let e=t.substring(r.length);return e===""||["/",";","?","#"].includes(e[0])?e:t}function bd(r){return r.replace(/\/index.html$/,"")}function r2(r){if(new RegExp("^(https?:)?//").test(r)){let[,e]=r.split(/\/\/[^\/]+/);return e}return r}var ws=(function(r){return r[r.Decimal=0]="Decimal",r[r.Percent=1]="Percent",r[r.Currency=2]="Currency",r[r.Scientific=3]="Scientific",r})(ws||{});var ht={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function Va(r,t){let e=ps(r),a=e[Fr.NumberSymbols][t];if(typeof a>"u"){if(t===ht.CurrencyDecimal)return e[Fr.NumberSymbols][ht.Decimal];if(t===ht.CurrencyGroup)return e[Fr.NumberSymbols][ht.Group]}return a}function Rd(r,t){return ps(r)[Fr.NumberFormats][t]}var n2=/^(\d+)?\.((\d+)(-(\d+))?)?$/,Ad=22,ni=".",qr="0",i2=";",o2=",",vs="#";function s2(r,t,e,a,n,i,o=!1){let s="",c=!1;if(!isFinite(r))s=Va(e,ht.Infinity);else{let d=l2(r);o&&(d=d2(d));let l=t.minInt,h=t.minFrac,p=t.maxFrac;if(i){let C=i.match(n2);if(C===null)throw new O(2306,!1);let M=C[1],w=C[3],E=C[5];M!=null&&(l=Ms(M)),w!=null&&(h=Ms(w)),E!=null?p=Ms(E):w!=null&&h>p&&(p=h)}h2(d,h,p);let u=d.digits,y=d.integerLen,m=d.exponent,g=[];for(c=u.every(C=>!C);y<l;y++)u.unshift(0);for(;y<0;y++)u.unshift(0);y>0?g=u.splice(y,u.length):(g=u,u=[0]);let v=[];for(u.length>=t.lgSize&&v.unshift(u.splice(-t.lgSize,u.length).join(""));u.length>t.gSize;)v.unshift(u.splice(-t.gSize,u.length).join(""));u.length&&v.unshift(u.join("")),s=v.join(Va(e,a)),g.length&&(s+=Va(e,n)+g.join("")),m&&(s+=Va(e,ht.Exponential)+"+"+m)}return r<0&&!c?s=t.negPre+s+t.negSuf:s=t.posPre+s+t.posSuf,s}function Ed(r,t,e){let a=Rd(t,ws.Decimal),n=c2(a,Va(t,ht.MinusSign));return s2(r,n,t,ht.Group,ht.Decimal,e)}function c2(r,t="-"){let e={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},a=r.split(i2),n=a[0],i=a[1],o=n.indexOf(ni)!==-1?n.split(ni):[n.substring(0,n.lastIndexOf(qr)+1),n.substring(n.lastIndexOf(qr)+1)],s=o[0],c=o[1]||"";e.posPre=s.substring(0,s.indexOf(vs));for(let l=0;l<c.length;l++){let h=c.charAt(l);h===qr?e.minFrac=e.maxFrac=l+1:h===vs?e.maxFrac=l+1:e.posSuf+=h}let d=s.split(o2);if(e.gSize=d[1]?d[1].length:0,e.lgSize=d[2]||d[1]?(d[2]||d[1]).length:0,i){let l=n.length-e.posPre.length-e.posSuf.length,h=i.indexOf(vs);e.negPre=i.substring(0,h).replace(/'/g,""),e.negSuf=i.slice(h+l).replace(/'/g,"")}else e.negPre=t+e.posPre,e.negSuf=e.posSuf;return e}function d2(r){if(r.digits[0]===0)return r;let t=r.digits.length-r.integerLen;return r.exponent?r.exponent+=2:(t===0?r.digits.push(0,0):t===1&&r.digits.push(0),r.integerLen+=2),r}function l2(r){let t=Math.abs(r)+"",e=0,a,n,i,o,s;for((n=t.indexOf(ni))>-1&&(t=t.replace(ni,"")),(i=t.search(/e/i))>0?(n<0&&(n=i),n+=+t.slice(i+1),t=t.substring(0,i)):n<0&&(n=t.length),i=0;t.charAt(i)===qr;i++);if(i===(s=t.length))a=[0],n=1;else{for(s--;t.charAt(s)===qr;)s--;for(n-=i,a=[],o=0;i<=s;i++,o++)a[o]=Number(t.charAt(i))}return n>Ad&&(a=a.splice(0,Ad-1),e=n-1,n=1),{digits:a,exponent:e,integerLen:n}}function h2(r,t,e){if(t>e)throw new O(2307,!1);let a=r.digits,n=a.length-r.integerLen,i=Math.min(Math.max(t,n),e),o=i+r.integerLen,s=a[o];if(o>0){a.splice(Math.max(r.integerLen,o));for(let h=o;h<a.length;h++)a[h]=0}else{n=Math.max(0,n),r.integerLen=1,a.length=Math.max(1,o=i+1),a[0]=0;for(let h=1;h<o;h++)a[h]=0}if(s>=5)if(o-1<0){for(let h=0;h>o;h--)a.unshift(0),r.integerLen++;a.unshift(1),r.integerLen++}else a[o-1]++;for(;n<Math.max(0,i);n++)a.push(0);let c=i!==0,d=t+r.integerLen,l=a.reduceRight(function(h,p,u,y){return p=p+h,y[u]=p<10?p:p-10,c&&(y[u]===0&&u>=d?y.pop():c=!1),p>=10?1:0},0);l&&(a.unshift(l),r.integerLen++)}function Ms(r){let t=parseInt(r);if(isNaN(t))throw new O(2305,!1);return t}var Br=(()=>{class r{_viewContainerRef;_viewRef=null;ngTemplateOutletContext=null;ngTemplateOutlet=null;ngTemplateOutletInjector=null;constructor(e){this._viewContainerRef=e}ngOnChanges(e){if(this._shouldRecreateView(e)){let a=this._viewContainerRef;if(this._viewRef&&a.remove(a.indexOf(this._viewRef)),!this.ngTemplateOutlet){this._viewRef=null;return}let n=this._createContextForwardProxy();this._viewRef=a.createEmbeddedView(this.ngTemplateOutlet,n,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(e){return!!e.ngTemplateOutlet||!!e.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(e,a,n)=>this.ngTemplateOutletContext?Reflect.set(this.ngTemplateOutletContext,a,n):!1,get:(e,a,n)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,a,n)}})}static \u0275fac=function(a){return new(a||r)(A(at))};static \u0275dir=I({type:r,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},features:[oe]})}return r})();function u2(r,t){return new O(2100,!1)}var Hr=(()=>{class r{_locale;constructor(e){this._locale=e}transform(e,a,n){if(!p2(e))return null;n||=this._locale;try{let i=y2(e);return Ed(i,n,a)}catch(i){throw u2(r,i.message)}}static \u0275fac=function(a){return new(a||r)(A(Md,16))};static \u0275pipe=Qn({name:"number",type:r,pure:!0})}return r})();function p2(r){return!(r==null||r===""||r!==r)}function y2(r){if(typeof r=="string"&&!isNaN(Number(r)-parseFloat(r)))return Number(r);if(typeof r!="number")throw new O(2309,!1);return r}function Cs(r,t){t=encodeURIComponent(t);for(let e of r.split(";")){let a=e.indexOf("="),[n,i]=a==-1?[e,""]:[e.slice(0,a),e.slice(a+1)];if(n.trim()===t)return decodeURIComponent(i)}return null}var Nr=class{};function f4(r,t,e){return fd(r,t,e)}var _s="browser";function ii(r){return r===_s}var Ur=class{_doc;constructor(t){this._doc=t}manager},oi=(()=>{class r extends Ur{constructor(e){super(e)}supports(e){return!0}addEventListener(e,a,n,i){return e.addEventListener(a,n,i),()=>this.removeEventListener(e,a,n,i)}removeEventListener(e,a,n,i){return e.removeEventListener(a,n,i)}static \u0275fac=function(a){return new(a||r)(z(N))};static \u0275prov=b({token:r,factory:r.\u0275fac})}return r})(),ci=new D(""),Ls=(()=>{class r{_zone;_plugins;_eventNameToPlugin=new Map;constructor(e,a){this._zone=a,e.forEach(o=>{o.manager=this});let n=e.filter(o=>!(o instanceof oi));this._plugins=n.slice().reverse();let i=e.find(o=>o instanceof oi);i&&this._plugins.push(i)}addEventListener(e,a,n,i){return this._findPluginFor(a).addEventListener(e,a,n,i)}getZone(){return this._zone}_findPluginFor(e){let a=this._eventNameToPlugin.get(e);if(a)return a;if(a=this._plugins.find(i=>i.supports(e)),!a)throw new O(5101,!1);return this._eventNameToPlugin.set(e,a),a}static \u0275fac=function(a){return new(a||r)(z(ci),z(Le))};static \u0275prov=b({token:r,factory:r.\u0275fac})}return r})(),bs="ng-app-id";function Td(r){for(let t of r)t.remove()}function Pd(r,t){let e=t.createElement("style");return e.textContent=r,e}function w2(r,t,e,a){let n=r.head?.querySelectorAll(`style[${bs}="${t}"],link[${bs}="${t}"]`);if(n)for(let i of n)i.removeAttribute(bs),i instanceof HTMLLinkElement?a.set(i.href.slice(i.href.lastIndexOf("/")+1),{usage:0,elements:[i]}):i.textContent&&e.set(i.textContent,{usage:0,elements:[i]})}function xs(r,t){let e=t.createElement("link");return e.setAttribute("rel","stylesheet"),e.setAttribute("href",r),e}var Ds=(()=>{class r{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(e,a,n,i={}){this.doc=e,this.appId=a,this.nonce=n,w2(e,a,this.inline,this.external),this.hosts.add(e.head)}addStyles(e,a){for(let n of e)this.addUsage(n,this.inline,Pd);a?.forEach(n=>this.addUsage(n,this.external,xs))}removeStyles(e,a){for(let n of e)this.removeUsage(n,this.inline);a?.forEach(n=>this.removeUsage(n,this.external))}addUsage(e,a,n){let i=a.get(e);i?i.usage++:a.set(e,{usage:1,elements:[...this.hosts].map(o=>this.addElement(o,n(e,this.doc)))})}removeUsage(e,a){let n=a.get(e);n&&(n.usage--,n.usage<=0&&(Td(n.elements),a.delete(e)))}ngOnDestroy(){for(let[,{elements:e}]of[...this.inline,...this.external])Td(e);this.hosts.clear()}addHost(e){this.hosts.add(e);for(let[a,{elements:n}]of this.inline)n.push(this.addElement(e,Pd(a,this.doc)));for(let[a,{elements:n}]of this.external)n.push(this.addElement(e,xs(a,this.doc)))}removeHost(e){this.hosts.delete(e)}addElement(e,a){return this.nonce&&a.setAttribute("nonce",this.nonce),e.appendChild(a)}static \u0275fac=function(a){return new(a||r)(z(N),z(Er),z(Tr,8),z(vt))};static \u0275prov=b({token:r,factory:r.\u0275fac})}return r})(),Ss={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},As=/%COMP%/g;var Od="%COMP%",C2=`_nghost-${Od}`,_2=`_ngcontent-${Od}`,b2=!0,S2=new D("",{providedIn:"root",factory:()=>b2});function x2(r){return _2.replace(As,r)}function I2(r){return C2.replace(As,r)}function jd(r,t){return t.map(e=>e.replace(As,r))}var Rs=(()=>{class r{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(e,a,n,i,o,s,c,d=null,l=null){this.eventManager=e,this.sharedStylesHost=a,this.appId=n,this.removeStylesOnCompDestroy=i,this.doc=o,this.platformId=s,this.ngZone=c,this.nonce=d,this.tracingService=l,this.platformIsServer=!1,this.defaultRenderer=new $r(e,o,c,this.platformIsServer,this.tracingService)}createRenderer(e,a){if(!e||!a)return this.defaultRenderer;let n=this.getOrCreateRenderer(e,a);return n instanceof si?n.applyToHost(e):n instanceof Gr&&n.applyStyles(),n}getOrCreateRenderer(e,a){let n=this.rendererByCompId,i=n.get(a.id);if(!i){let o=this.doc,s=this.ngZone,c=this.eventManager,d=this.sharedStylesHost,l=this.removeStylesOnCompDestroy,h=this.platformIsServer,p=this.tracingService;switch(a.encapsulation){case hs.Emulated:i=new si(c,d,a,this.appId,l,o,s,h,p);break;case hs.ShadowDom:return new Is(c,d,e,a,o,s,this.nonce,h,p);default:i=new Gr(c,d,a,l,o,s,h,p);break}n.set(a.id,i)}return i}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(e){this.rendererByCompId.delete(e)}static \u0275fac=function(a){return new(a||r)(z(Ls),z(Ds),z(Er),z(S2),z(N),z(vt),z(Le),z(Tr),z(sd,8))};static \u0275prov=b({token:r,factory:r.\u0275fac})}return r})(),$r=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(t,e,a,n,i){this.eventManager=t,this.doc=e,this.ngZone=a,this.platformIsServer=n,this.tracingService=i}destroy(){}destroyNode=null;createElement(t,e){return e?this.doc.createElementNS(Ss[e]||e,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,e){(Fd(t)?t.content:t).appendChild(e)}insertBefore(t,e,a){t&&(Fd(t)?t.content:t).insertBefore(e,a)}removeChild(t,e){e.remove()}selectRootElement(t,e){let a=typeof t=="string"?this.doc.querySelector(t):t;if(!a)throw new O(-5104,!1);return e||(a.textContent=""),a}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,a,n){if(n){e=n+":"+e;let i=Ss[n];i?t.setAttributeNS(i,e,a):t.setAttribute(e,a)}else t.setAttribute(e,a)}removeAttribute(t,e,a){if(a){let n=Ss[a];n?t.removeAttributeNS(n,e):t.removeAttribute(`${a}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,a,n){n&(Da.DashCase|Da.Important)?t.style.setProperty(e,a,n&Da.Important?"important":""):t.style[e]=a}removeStyle(t,e,a){a&Da.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,a){t!=null&&(t[e]=a)}setValue(t,e){t.nodeValue=e}listen(t,e,a,n){if(typeof t=="string"&&(t=We().getGlobalEventTarget(this.doc,t),!t))throw new O(5102,!1);let i=this.decoratePreventDefault(a);return this.tracingService?.wrapEventListener&&(i=this.tracingService.wrapEventListener(t,e,i)),this.eventManager.addEventListener(t,e,i,n)}decoratePreventDefault(t){return e=>{if(e==="__ngUnwrap__")return t;t(e)===!1&&e.preventDefault()}}};function Fd(r){return r.tagName==="TEMPLATE"&&r.content!==void 0}var Is=class extends $r{sharedStylesHost;hostEl;shadowRoot;constructor(t,e,a,n,i,o,s,c,d){super(t,i,o,c,d),this.sharedStylesHost=e,this.hostEl=a,this.shadowRoot=a.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=n.styles;l=jd(n.id,l);for(let p of l){let u=document.createElement("style");s&&u.setAttribute("nonce",s),u.textContent=p,this.shadowRoot.appendChild(u)}let h=n.getExternalStyles?.();if(h)for(let p of h){let u=xs(p,i);s&&u.setAttribute("nonce",s),this.shadowRoot.appendChild(u)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,a){return super.insertBefore(this.nodeOrShadowRoot(t),e,a)}removeChild(t,e){return super.removeChild(null,e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Gr=class extends $r{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(t,e,a,n,i,o,s,c,d){super(t,i,o,s,c),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=n;let l=a.styles;this.styles=d?jd(d,l):l,this.styleUrls=a.getExternalStyles?.(d)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&od.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},si=class extends Gr{contentAttr;hostAttr;constructor(t,e,a,n,i,o,s,c,d){let l=n+"-"+a.id;super(t,e,a,i,o,s,c,d,l),this.contentAttr=x2(l),this.hostAttr=I2(l)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){let a=super.createElement(t,e);return super.setAttribute(a,this.contentAttr,""),a}};var di=class r extends zr{supportsDOMEvents=!0;static makeCurrent(){ms(new r)}onAndCancel(t,e,a,n){return t.addEventListener(e,a,n),()=>{t.removeEventListener(e,a,n)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.remove()}createElement(t,e){return e=e||this.getDefaultDocument(),e.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return e==="window"?window:e==="document"?t:e==="body"?t.body:null}getBaseHref(t){let e=L2();return e==null?null:D2(e)}resetBaseElement(){Wr=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return Cs(document.cookie,t)}},Wr=null;function L2(){return Wr=Wr||document.head.querySelector("base"),Wr?Wr.getAttribute("href"):null}function D2(r){return new URL(r,document.baseURI).pathname}var A2=(()=>{class r{build(){return new XMLHttpRequest}static \u0275fac=function(a){return new(a||r)};static \u0275prov=b({token:r,factory:r.\u0275fac})}return r})(),Vd=["alt","control","meta","shift"],R2={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},E2={alt:r=>r.altKey,control:r=>r.ctrlKey,meta:r=>r.metaKey,shift:r=>r.shiftKey},zd=(()=>{class r extends Ur{constructor(e){super(e)}supports(e){return r.parseEventName(e)!=null}addEventListener(e,a,n,i){let o=r.parseEventName(a),s=r.eventCallback(o.fullKey,n,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>We().onAndCancel(e,o.domEventName,s,i))}static parseEventName(e){let a=e.toLowerCase().split("."),n=a.shift();if(a.length===0||!(n==="keydown"||n==="keyup"))return null;let i=r._normalizeKey(a.pop()),o="",s=a.indexOf("code");if(s>-1&&(a.splice(s,1),o="code."),Vd.forEach(d=>{let l=a.indexOf(d);l>-1&&(a.splice(l,1),o+=d+".")}),o+=i,a.length!=0||i.length===0)return null;let c={};return c.domEventName=n,c.fullKey=o,c}static matchEventFullKeyCode(e,a){let n=R2[e.key]||e.key,i="";return a.indexOf("code.")>-1&&(n=e.code,i="code."),n==null||!n?!1:(n=n.toLowerCase(),n===" "?n="space":n==="."&&(n="dot"),Vd.forEach(o=>{if(o!==n){let s=E2[o];s(e)&&(i+=o+".")}}),i+=n,i===a)}static eventCallback(e,a,n){return i=>{r.matchEventFullKeyCode(i,e)&&n.runGuarded(()=>a(i))}}static _normalizeKey(e){return e==="esc"?"escape":e}static \u0275fac=function(a){return new(a||r)(z(N))};static \u0275prov=b({token:r,factory:r.\u0275fac})}return r})();function T2(r,t,e){let a=k({rootComponent:r,platformRef:e?.platformRef},P2(t));return wd(a)}function P2(r){return{appProviders:[...z2,...r?.providers??[]],platformProviders:V2}}function F2(){di.makeCurrent()}function O2(){return new cs}function j2(){return ad(document),document}var V2=[{provide:vt,useValue:_s},{provide:rd,useValue:F2,multi:!0},{provide:N,useFactory:j2}];var z2=[{provide:Q1,useValue:"root"},{provide:cs,useFactory:O2},{provide:ci,useClass:oi,multi:!0,deps:[N]},{provide:ci,useClass:zd,multi:!0,deps:[N]},Rs,Ds,Ls,{provide:Aa,useExisting:Rs},{provide:Nr,useClass:A2},[]];var qd=(()=>{class r{_doc;constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}static \u0275fac=function(a){return new(a||r)(z(N))};static \u0275prov=b({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var R="primary",dn=Symbol("RouteTitle"),Os=class{params;constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}};function oa(r){return new Os(r)}function Kd(r,t,e){let a=e.path.split("/");if(a.length>r.length||e.pathMatch==="full"&&(t.hasChildren()||a.length<r.length))return null;let n={};for(let i=0;i<a.length;i++){let o=a[i],s=r[i];if(o[0]===":")n[o.substring(1)]=s;else if(o!==s.path)return null}return{consumed:r.slice(0,a.length),posParams:n}}function B2(r,t){if(r.length!==t.length)return!1;for(let e=0;e<r.length;++e)if(!ut(r[e],t[e]))return!1;return!0}function ut(r,t){let e=r?js(r):void 0,a=t?js(t):void 0;if(!e||!a||e.length!=a.length)return!1;let n;for(let i=0;i<e.length;i++)if(n=e[i],!Zd(r[n],t[n]))return!1;return!0}function js(r){return[...Object.keys(r),...Object.getOwnPropertySymbols(r)]}function Zd(r,t){if(Array.isArray(r)&&Array.isArray(t)){if(r.length!==t.length)return!1;let e=[...r].sort(),a=[...t].sort();return e.every((n,i)=>a[i]===n)}else return r===t}function Xd(r){return r.length>0?r[r.length-1]:null}function bt(r){return xr(r)?r:Pr(r)?de(Promise.resolve(r)):x(r)}var H2={exact:Yd,subset:Qd},Jd={exact:N2,subset:U2,ignored:()=>!0};function Bd(r,t,e){return H2[e.paths](r.root,t.root,e.matrixParams)&&Jd[e.queryParams](r.queryParams,t.queryParams)&&!(e.fragment==="exact"&&r.fragment!==t.fragment)}function N2(r,t){return ut(r,t)}function Yd(r,t,e){if(!na(r.segments,t.segments)||!ui(r.segments,t.segments,e)||r.numberOfChildren!==t.numberOfChildren)return!1;for(let a in t.children)if(!r.children[a]||!Yd(r.children[a],t.children[a],e))return!1;return!0}function U2(r,t){return Object.keys(t).length<=Object.keys(r).length&&Object.keys(t).every(e=>Zd(r[e],t[e]))}function Qd(r,t,e){return el(r,t,t.segments,e)}function el(r,t,e,a){if(r.segments.length>e.length){let n=r.segments.slice(0,e.length);return!(!na(n,e)||t.hasChildren()||!ui(n,e,a))}else if(r.segments.length===e.length){if(!na(r.segments,e)||!ui(r.segments,e,a))return!1;for(let n in t.children)if(!r.children[n]||!Qd(r.children[n],t.children[n],a))return!1;return!0}else{let n=e.slice(0,r.segments.length),i=e.slice(r.segments.length);return!na(r.segments,n)||!ui(r.segments,n,a)||!r.children[R]?!1:el(r.children[R],t,i,a)}}function ui(r,t,e){return t.every((a,n)=>Jd[e](r[n].parameters,a.parameters))}var yt=class{root;queryParams;fragment;_queryParamMap;constructor(t=new H([],{}),e={},a=null){this.root=t,this.queryParams=e,this.fragment=a}get queryParamMap(){return this._queryParamMap??=oa(this.queryParams),this._queryParamMap}toString(){return W2.serialize(this)}},H=class{segments;children;parent=null;constructor(t,e){this.segments=t,this.children=e,Object.values(e).forEach(a=>a.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return pi(this)}},zt=class{path;parameters;_parameterMap;constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap??=oa(this.parameters),this._parameterMap}toString(){return al(this)}};function $2(r,t){return na(r,t)&&r.every((e,a)=>ut(e.parameters,t[a].parameters))}function na(r,t){return r.length!==t.length?!1:r.every((e,a)=>e.path===t[a].path)}function G2(r,t){let e=[];return Object.entries(r.children).forEach(([a,n])=>{a===R&&(e=e.concat(t(n,a)))}),Object.entries(r.children).forEach(([a,n])=>{a!==R&&(e=e.concat(t(n,a)))}),e}var ln=(()=>{class r{static \u0275fac=function(a){return new(a||r)};static \u0275prov=b({token:r,factory:()=>new sa,providedIn:"root"})}return r})(),sa=class{parse(t){let e=new zs(t);return new yt(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){let e=`/${Kr(t.root,!0)}`,a=X2(t.queryParams),n=typeof t.fragment=="string"?`#${K2(t.fragment)}`:"";return`${e}${a}${n}`}},W2=new sa;function pi(r){return r.segments.map(t=>al(t)).join("/")}function Kr(r,t){if(!r.hasChildren())return pi(r);if(t){let e=r.children[R]?Kr(r.children[R],!1):"",a=[];return Object.entries(r.children).forEach(([n,i])=>{n!==R&&a.push(`${n}:${Kr(i,!1)}`)}),a.length>0?`${e}(${a.join("//")})`:e}else{let e=G2(r,(a,n)=>n===R?[Kr(r.children[R],!1)]:[`${n}:${Kr(a,!1)}`]);return Object.keys(r.children).length===1&&r.children[R]!=null?`${pi(r)}/${e[0]}`:`${pi(r)}/(${e.join("//")})`}}function tl(r){return encodeURIComponent(r).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function li(r){return tl(r).replace(/%3B/gi,";")}function K2(r){return encodeURI(r)}function Vs(r){return tl(r).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function yi(r){return decodeURIComponent(r)}function Hd(r){return yi(r.replace(/\+/g,"%20"))}function al(r){return`${Vs(r.path)}${Z2(r.parameters)}`}function Z2(r){return Object.entries(r).map(([t,e])=>`;${Vs(t)}=${Vs(e)}`).join("")}function X2(r){let t=Object.entries(r).map(([e,a])=>Array.isArray(a)?a.map(n=>`${li(e)}=${li(n)}`).join("&"):`${li(e)}=${li(a)}`).filter(e=>e);return t.length?`?${t.join("&")}`:""}var J2=/^[^\/()?;#]+/;function Es(r){let t=r.match(J2);return t?t[0]:""}var Y2=/^[^\/()?;=#]+/;function Q2(r){let t=r.match(Y2);return t?t[0]:""}var ep=/^[^=?&#]+/;function tp(r){let t=r.match(ep);return t?t[0]:""}var ap=/^[^&#]+/;function rp(r){let t=r.match(ap);return t?t[0]:""}var zs=class{url;remaining;constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new H([],{}):new H([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let a={};return this.peekStartsWith("(")&&(a=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(a[R]=new H(t,e)),a}parseSegment(){let t=Es(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new O(4009,!1);return this.capture(t),new zt(yi(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let e=Q2(this.remaining);if(!e)return;this.capture(e);let a="";if(this.consumeOptional("=")){let n=Es(this.remaining);n&&(a=n,this.capture(a))}t[yi(e)]=yi(a)}parseQueryParam(t){let e=tp(this.remaining);if(!e)return;this.capture(e);let a="";if(this.consumeOptional("=")){let o=rp(this.remaining);o&&(a=o,this.capture(a))}let n=Hd(e),i=Hd(a);if(t.hasOwnProperty(n)){let o=t[n];Array.isArray(o)||(o=[o],t[n]=o),o.push(i)}else t[n]=i}parseParens(t){let e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let a=Es(this.remaining),n=this.remaining[a.length];if(n!=="/"&&n!==")"&&n!==";")throw new O(4010,!1);let i;a.indexOf(":")>-1?(i=a.slice(0,a.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=R);let o=this.parseChildren();e[i??R]=Object.keys(o).length===1&&o[R]?o[R]:new H([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new O(4011,!1)}};function rl(r){return r.segments.length>0?new H([],{[R]:r}):r}function nl(r){let t={};for(let[a,n]of Object.entries(r.children)){let i=nl(n);if(a===R&&i.segments.length===0&&i.hasChildren())for(let[o,s]of Object.entries(i.children))t[o]=s;else(i.segments.length>0||i.hasChildren())&&(t[a]=i)}let e=new H(r.segments,t);return np(e)}function np(r){if(r.numberOfChildren===1&&r.children[R]){let t=r.children[R];return new H(r.segments.concat(t.segments),t.children)}return r}function qt(r){return r instanceof yt}function il(r,t,e=null,a=null){let n=ol(r);return sl(n,t,e,a)}function ol(r){let t;function e(i){let o={};for(let c of i.children){let d=e(c);o[c.outlet]=d}let s=new H(i.url,o);return i===r&&(t=s),s}let a=e(r.root),n=rl(a);return t??n}function sl(r,t,e,a){let n=r;for(;n.parent;)n=n.parent;if(t.length===0)return Ts(n,n,n,e,a);let i=ip(t);if(i.toRoot())return Ts(n,n,new H([],{}),e,a);let o=op(i,n,r),s=o.processChildren?Xr(o.segmentGroup,o.index,i.commands):dl(o.segmentGroup,o.index,i.commands);return Ts(n,o.segmentGroup,s,e,a)}function fi(r){return typeof r=="object"&&r!=null&&!r.outlets&&!r.segmentPath}function Qr(r){return typeof r=="object"&&r!=null&&r.outlets}function Ts(r,t,e,a,n){let i={};a&&Object.entries(a).forEach(([c,d])=>{i[c]=Array.isArray(d)?d.map(l=>`${l}`):`${d}`});let o;r===t?o=e:o=cl(r,t,e);let s=rl(nl(o));return new yt(s,i,n)}function cl(r,t,e){let a={};return Object.entries(r.children).forEach(([n,i])=>{i===t?a[n]=e:a[n]=cl(i,t,e)}),new H(r.segments,a)}var gi=class{isAbsolute;numberOfDoubleDots;commands;constructor(t,e,a){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=a,t&&a.length>0&&fi(a[0]))throw new O(4003,!1);let n=a.find(Qr);if(n&&n!==Xd(a))throw new O(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function ip(r){if(typeof r[0]=="string"&&r.length===1&&r[0]==="/")return new gi(!0,0,r);let t=0,e=!1,a=r.reduce((n,i,o)=>{if(typeof i=="object"&&i!=null){if(i.outlets){let s={};return Object.entries(i.outlets).forEach(([c,d])=>{s[c]=typeof d=="string"?d.split("/"):d}),[...n,{outlets:s}]}if(i.segmentPath)return[...n,i.segmentPath]}return typeof i!="string"?[...n,i]:o===0?(i.split("/").forEach((s,c)=>{c==0&&s==="."||(c==0&&s===""?e=!0:s===".."?t++:s!=""&&n.push(s))}),n):[...n,i]},[]);return new gi(e,t,a)}var Ba=class{segmentGroup;processChildren;index;constructor(t,e,a){this.segmentGroup=t,this.processChildren=e,this.index=a}};function op(r,t,e){if(r.isAbsolute)return new Ba(t,!0,0);if(!e)return new Ba(t,!1,NaN);if(e.parent===null)return new Ba(e,!0,0);let a=fi(r.commands[0])?0:1,n=e.segments.length-1+a;return sp(e,n,r.numberOfDoubleDots)}function sp(r,t,e){let a=r,n=t,i=e;for(;i>n;){if(i-=n,a=a.parent,!a)throw new O(4005,!1);n=a.segments.length}return new Ba(a,!1,n-i)}function cp(r){return Qr(r[0])?r[0].outlets:{[R]:r}}function dl(r,t,e){if(r??=new H([],{}),r.segments.length===0&&r.hasChildren())return Xr(r,t,e);let a=dp(r,t,e),n=e.slice(a.commandIndex);if(a.match&&a.pathIndex<r.segments.length){let i=new H(r.segments.slice(0,a.pathIndex),{});return i.children[R]=new H(r.segments.slice(a.pathIndex),r.children),Xr(i,0,n)}else return a.match&&n.length===0?new H(r.segments,{}):a.match&&!r.hasChildren()?qs(r,t,e):a.match?Xr(r,0,n):qs(r,t,e)}function Xr(r,t,e){if(e.length===0)return new H(r.segments,{});{let a=cp(e),n={};if(Object.keys(a).some(i=>i!==R)&&r.children[R]&&r.numberOfChildren===1&&r.children[R].segments.length===0){let i=Xr(r.children[R],t,e);return new H(r.segments,i.children)}return Object.entries(a).forEach(([i,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(n[i]=dl(r.children[i],t,o))}),Object.entries(r.children).forEach(([i,o])=>{a[i]===void 0&&(n[i]=o)}),new H(r.segments,n)}}function dp(r,t,e){let a=0,n=t,i={match:!1,pathIndex:0,commandIndex:0};for(;n<r.segments.length;){if(a>=e.length)return i;let o=r.segments[n],s=e[a];if(Qr(s))break;let c=`${s}`,d=a<e.length-1?e[a+1]:null;if(n>0&&c===void 0)break;if(c&&d&&typeof d=="object"&&d.outlets===void 0){if(!Ud(c,d,o))return i;a+=2}else{if(!Ud(c,{},o))return i;a++}n++}return{match:!0,pathIndex:n,commandIndex:a}}function qs(r,t,e){let a=r.segments.slice(0,t),n=0;for(;n<e.length;){let i=e[n];if(Qr(i)){let c=lp(i.outlets);return new H(a,c)}if(n===0&&fi(e[0])){let c=r.segments[t];a.push(new zt(c.path,Nd(e[0]))),n++;continue}let o=Qr(i)?i.outlets[R]:`${i}`,s=n<e.length-1?e[n+1]:null;o&&s&&fi(s)?(a.push(new zt(o,Nd(s))),n+=2):(a.push(new zt(o,{})),n++)}return new H(a,{})}function lp(r){let t={};return Object.entries(r).forEach(([e,a])=>{typeof a=="string"&&(a=[a]),a!==null&&(t[e]=qs(new H([],{}),0,a))}),t}function Nd(r){let t={};return Object.entries(r).forEach(([e,a])=>t[e]=`${a}`),t}function Ud(r,t,e){return r==e.path&&ut(t,e.parameters)}var Jr="imperative",ve=(function(r){return r[r.NavigationStart=0]="NavigationStart",r[r.NavigationEnd=1]="NavigationEnd",r[r.NavigationCancel=2]="NavigationCancel",r[r.NavigationError=3]="NavigationError",r[r.RoutesRecognized=4]="RoutesRecognized",r[r.ResolveStart=5]="ResolveStart",r[r.ResolveEnd=6]="ResolveEnd",r[r.GuardsCheckStart=7]="GuardsCheckStart",r[r.GuardsCheckEnd=8]="GuardsCheckEnd",r[r.RouteConfigLoadStart=9]="RouteConfigLoadStart",r[r.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",r[r.ChildActivationStart=11]="ChildActivationStart",r[r.ChildActivationEnd=12]="ChildActivationEnd",r[r.ActivationStart=13]="ActivationStart",r[r.ActivationEnd=14]="ActivationEnd",r[r.Scroll=15]="Scroll",r[r.NavigationSkipped=16]="NavigationSkipped",r})(ve||{}),Ne=class{id;url;constructor(t,e){this.id=t,this.url=e}},ca=class extends Ne{type=ve.NavigationStart;navigationTrigger;restoredState;constructor(t,e,a="imperative",n=null){super(t,e),this.navigationTrigger=a,this.restoredState=n}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},st=class extends Ne{urlAfterRedirects;type=ve.NavigationEnd;constructor(t,e,a){super(t,e),this.urlAfterRedirects=a}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Ae=(function(r){return r[r.Redirect=0]="Redirect",r[r.SupersededByNewNavigation=1]="SupersededByNewNavigation",r[r.NoDataFromResolver=2]="NoDataFromResolver",r[r.GuardRejected=3]="GuardRejected",r[r.Aborted=4]="Aborted",r})(Ae||{}),en=(function(r){return r[r.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",r[r.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",r})(en||{}),pt=class extends Ne{reason;code;type=ve.NavigationCancel;constructor(t,e,a,n){super(t,e),this.reason=a,this.code=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Ct=class extends Ne{reason;code;type=ve.NavigationSkipped;constructor(t,e,a,n){super(t,e),this.reason=a,this.code=n}},Na=class extends Ne{error;target;type=ve.NavigationError;constructor(t,e,a,n){super(t,e),this.error=a,this.target=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},tn=class extends Ne{urlAfterRedirects;state;type=ve.RoutesRecognized;constructor(t,e,a,n){super(t,e),this.urlAfterRedirects=a,this.state=n}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},mi=class extends Ne{urlAfterRedirects;state;type=ve.GuardsCheckStart;constructor(t,e,a,n){super(t,e),this.urlAfterRedirects=a,this.state=n}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ki=class extends Ne{urlAfterRedirects;state;shouldActivate;type=ve.GuardsCheckEnd;constructor(t,e,a,n,i){super(t,e),this.urlAfterRedirects=a,this.state=n,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},vi=class extends Ne{urlAfterRedirects;state;type=ve.ResolveStart;constructor(t,e,a,n){super(t,e),this.urlAfterRedirects=a,this.state=n}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Mi=class extends Ne{urlAfterRedirects;state;type=ve.ResolveEnd;constructor(t,e,a,n){super(t,e),this.urlAfterRedirects=a,this.state=n}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},wi=class{route;type=ve.RouteConfigLoadStart;constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Ci=class{route;type=ve.RouteConfigLoadEnd;constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},_i=class{snapshot;type=ve.ChildActivationStart;constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},bi=class{snapshot;type=ve.ChildActivationEnd;constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Si=class{snapshot;type=ve.ActivationStart;constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},xi=class{snapshot;type=ve.ActivationEnd;constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var an=class{},Ua=class{url;navigationBehaviorOptions;constructor(t,e){this.url=t,this.navigationBehaviorOptions=e}};function hp(r){return!(r instanceof an)&&!(r instanceof Ua)}function up(r,t){return r.providers&&!r._injector&&(r._injector=us(r.providers,t,`Route: ${r.path}`)),r._injector??t}function ot(r){return r.outlet||R}function pp(r,t){let e=r.filter(a=>ot(a)===t);return e.push(...r.filter(a=>ot(a)!==t)),e}function Wa(r){if(!r)return null;if(r.routeConfig?._injector)return r.routeConfig._injector;for(let t=r.parent;t;t=t.parent){let e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}var Ii=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Wa(this.route?.snapshot)??this.rootInjector}constructor(t){this.rootInjector=t,this.children=new Ka(this.rootInjector)}},Ka=(()=>{class r{rootInjector;contexts=new Map;constructor(e){this.rootInjector=e}onChildOutletCreated(e,a){let n=this.getOrCreateContext(e);n.outlet=a,this.contexts.set(e,n)}onChildOutletDestroyed(e){let a=this.getContext(e);a&&(a.outlet=null,a.attachRef=null)}onOutletDeactivated(){let e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let a=this.getContext(e);return a||(a=new Ii(this.rootInjector),this.contexts.set(e,a)),a}getContext(e){return this.contexts.get(e)||null}static \u0275fac=function(a){return new(a||r)(z(Tt))};static \u0275prov=b({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),Li=class{_root;constructor(t){this._root=t}get root(){return this._root.value}parent(t){let e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){let e=Bs(t,this._root);return e?e.children.map(a=>a.value):[]}firstChild(t){let e=Bs(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){let e=Hs(t,this._root);return e.length<2?[]:e[e.length-2].children.map(n=>n.value).filter(n=>n!==t)}pathFromRoot(t){return Hs(t,this._root).map(e=>e.value)}};function Bs(r,t){if(r===t.value)return t;for(let e of t.children){let a=Bs(r,e);if(a)return a}return null}function Hs(r,t){if(r===t.value)return[t];for(let e of t.children){let a=Hs(r,e);if(a.length)return a.unshift(t),a}return[]}var He=class{value;children;constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}};function qa(r){let t={};return r&&r.children.forEach(e=>t[e.value.outlet]=e),t}var rn=class extends Li{snapshot;constructor(t,e){super(t),this.snapshot=e,Xs(this,t)}toString(){return this.snapshot.toString()}};function ll(r){let t=yp(r),e=new Me([new zt("",{})]),a=new Me({}),n=new Me({}),i=new Me({}),o=new Me(""),s=new _t(e,a,i,o,n,R,r,t.root);return s.snapshot=t.root,new rn(new He(s,[]),t)}function yp(r){let t={},e={},a={},i=new ia([],t,a,"",e,R,r,null,{});return new nn("",new He(i,[]))}var _t=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(t,e,a,n,i,o,s,c){this.urlSubject=t,this.paramsSubject=e,this.queryParamsSubject=a,this.fragmentSubject=n,this.dataSubject=i,this.outlet=o,this.component=s,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(T(d=>d[dn]))??x(void 0),this.url=t,this.params=e,this.queryParams=a,this.fragment=n,this.data=i}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(T(t=>oa(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(T(t=>oa(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Di(r,t,e="emptyOnly"){let a,{routeConfig:n}=r;return t!==null&&(e==="always"||n?.path===""||!t.component&&!t.routeConfig?.loadComponent)?a={params:k(k({},t.params),r.params),data:k(k({},t.data),r.data),resolve:k(k(k(k({},r.data),t.data),n?.data),r._resolvedData)}:a={params:k({},r.params),data:k({},r.data),resolve:k(k({},r.data),r._resolvedData??{})},n&&ul(n)&&(a.resolve[dn]=n.title),a}var ia=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[dn]}constructor(t,e,a,n,i,o,s,c,d){this.url=t,this.params=e,this.queryParams=a,this.fragment=n,this.data=i,this.outlet=o,this.component=s,this.routeConfig=c,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=oa(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=oa(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(a=>a.toString()).join("/"),e=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${e}')`}},nn=class extends Li{url;constructor(t,e){super(e),this.url=t,Xs(this,e)}toString(){return hl(this._root)}};function Xs(r,t){t.value._routerState=r,t.children.forEach(e=>Xs(r,e))}function hl(r){let t=r.children.length>0?` { ${r.children.map(hl).join(", ")} } `:"";return`${r.value}${t}`}function Ps(r){if(r.snapshot){let t=r.snapshot,e=r._futureSnapshot;r.snapshot=e,ut(t.queryParams,e.queryParams)||r.queryParamsSubject.next(e.queryParams),t.fragment!==e.fragment&&r.fragmentSubject.next(e.fragment),ut(t.params,e.params)||r.paramsSubject.next(e.params),B2(t.url,e.url)||r.urlSubject.next(e.url),ut(t.data,e.data)||r.dataSubject.next(e.data)}else r.snapshot=r._futureSnapshot,r.dataSubject.next(r._futureSnapshot.data)}function Ns(r,t){let e=ut(r.params,t.params)&&$2(r.url,t.url),a=!r.parent!=!t.parent;return e&&!a&&(!r.parent||Ns(r.parent,t.parent))}function ul(r){return typeof r.title=="string"||r.title===null}var pl=new D(""),Js=(()=>{class r{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=R;activateEvents=new le;deactivateEvents=new le;attachEvents=new le;detachEvents=new le;routerOutletData=De();parentContexts=f(Ka);location=f(at);changeDetector=f(Ge);inputBinder=f(Ti,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(e){if(e.name){let{firstChange:a,previousValue:n}=e.name;if(a)return;this.isTrackedInParentContexts(n)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(n)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new O(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new O(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new O(4012,!1);this.location.detach();let e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,a){this.activated=e,this._activatedRoute=a,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){let e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,a){if(this.isActivated)throw new O(4013,!1);this._activatedRoute=e;let n=this.location,o=e.snapshot.component,s=this.parentContexts.getOrCreateContext(this.name).children,c=new Us(e,s,n.injector,this.routerOutletData);this.activated=n.createComponent(o,{index:n.length,injector:c,environmentInjector:a}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(a){return new(a||r)};static \u0275dir=I({type:r,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[oe]})}return r})(),Us=class{route;childContexts;parent;outletData;constructor(t,e,a,n){this.route=t,this.childContexts=e,this.parent=a,this.outletData=n}get(t,e){return t===_t?this.route:t===Ka?this.childContexts:t===pl?this.outletData:this.parent.get(t,e)}},Ti=new D("");var Ys=(()=>{class r{static \u0275fac=function(a){return new(a||r)};static \u0275cmp=Z({type:r,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(a,n){a&1&&fe(0,"router-outlet")},dependencies:[Js],encapsulation:2})}return r})();function Qs(r){let t=r.children&&r.children.map(Qs),e=t?P(k({},r),{children:t}):k({},r);return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==R&&(e.component=Ys),e}function fp(r,t,e){let a=on(r,t._root,e?e._root:void 0);return new rn(a,t)}function on(r,t,e){if(e&&r.shouldReuseRoute(t.value,e.value.snapshot)){let a=e.value;a._futureSnapshot=t.value;let n=gp(r,t,e);return new He(a,n)}else{if(r.shouldAttach(t.value)){let i=r.retrieve(t.value);if(i!==null){let o=i.route;return o.value._futureSnapshot=t.value,o.children=t.children.map(s=>on(r,s)),o}}let a=mp(t.value),n=t.children.map(i=>on(r,i));return new He(a,n)}}function gp(r,t,e){return t.children.map(a=>{for(let n of e.children)if(r.shouldReuseRoute(a.value,n.value.snapshot))return on(r,a,n);return on(r,a)})}function mp(r){return new _t(new Me(r.url),new Me(r.params),new Me(r.queryParams),new Me(r.fragment),new Me(r.data),r.outlet,r.component,r)}var $a=class{redirectTo;navigationBehaviorOptions;constructor(t,e){this.redirectTo=t,this.navigationBehaviorOptions=e}},yl="ngNavigationCancelingError";function Ai(r,t){let{redirectTo:e,navigationBehaviorOptions:a}=qt(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,n=fl(!1,Ae.Redirect);return n.url=e,n.navigationBehaviorOptions=a,n}function fl(r,t){let e=new Error(`NavigationCancelingError: ${r||""}`);return e[yl]=!0,e.cancellationCode=t,e}function kp(r){return gl(r)&&qt(r.url)}function gl(r){return!!r&&r[yl]}var vp=(r,t,e,a)=>T(n=>(new $s(t,n.targetRouterState,n.currentRouterState,e,a).activate(r),n)),$s=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(t,e,a,n,i){this.routeReuseStrategy=t,this.futureState=e,this.currState=a,this.forwardEvent=n,this.inputBindingEnabled=i}activate(t){let e=this.futureState._root,a=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,a,t),Ps(this.futureState.root),this.activateChildRoutes(e,a,t)}deactivateChildRoutes(t,e,a){let n=qa(e);t.children.forEach(i=>{let o=i.value.outlet;this.deactivateRoutes(i,n[o],a),delete n[o]}),Object.values(n).forEach(i=>{this.deactivateRouteAndItsChildren(i,a)})}deactivateRoutes(t,e,a){let n=t.value,i=e?e.value:null;if(n===i)if(n.component){let o=a.getContext(n.outlet);o&&this.deactivateChildRoutes(t,e,o.children)}else this.deactivateChildRoutes(t,e,a);else i&&this.deactivateRouteAndItsChildren(e,a)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){let a=e.getContext(t.value.outlet),n=a&&t.value.component?a.children:e,i=qa(t);for(let o of Object.values(i))this.deactivateRouteAndItsChildren(o,n);if(a&&a.outlet){let o=a.outlet.detach(),s=a.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:o,route:t,contexts:s})}}deactivateRouteAndOutlet(t,e){let a=e.getContext(t.value.outlet),n=a&&t.value.component?a.children:e,i=qa(t);for(let o of Object.values(i))this.deactivateRouteAndItsChildren(o,n);a&&(a.outlet&&(a.outlet.deactivate(),a.children.onOutletDeactivated()),a.attachRef=null,a.route=null)}activateChildRoutes(t,e,a){let n=qa(e);t.children.forEach(i=>{this.activateRoutes(i,n[i.value.outlet],a),this.forwardEvent(new xi(i.value.snapshot))}),t.children.length&&this.forwardEvent(new bi(t.value.snapshot))}activateRoutes(t,e,a){let n=t.value,i=e?e.value:null;if(Ps(n),n===i)if(n.component){let o=a.getOrCreateContext(n.outlet);this.activateChildRoutes(t,e,o.children)}else this.activateChildRoutes(t,e,a);else if(n.component){let o=a.getOrCreateContext(n.outlet);if(this.routeReuseStrategy.shouldAttach(n.snapshot)){let s=this.routeReuseStrategy.retrieve(n.snapshot);this.routeReuseStrategy.store(n.snapshot,null),o.children.onOutletReAttached(s.contexts),o.attachRef=s.componentRef,o.route=s.route.value,o.outlet&&o.outlet.attach(s.componentRef,s.route.value),Ps(s.route.value),this.activateChildRoutes(t,null,o.children)}else o.attachRef=null,o.route=n,o.outlet&&o.outlet.activateWith(n,o.injector),this.activateChildRoutes(t,null,o.children)}else this.activateChildRoutes(t,null,a)}},Ri=class{path;route;constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},Ha=class{component;route;constructor(t,e){this.component=t,this.route=e}};function Mp(r,t,e){let a=r._root,n=t?t._root:null;return Zr(a,n,e,[a.value])}function wp(r){let t=r.routeConfig?r.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:r,guards:t}}function Za(r,t){let e=Symbol(),a=t.get(r,e);return a===e?typeof r=="function"&&!J1(r)?r:t.get(r):a}function Zr(r,t,e,a,n={canDeactivateChecks:[],canActivateChecks:[]}){let i=qa(t);return r.children.forEach(o=>{Cp(o,i[o.value.outlet],e,a.concat([o.value]),n),delete i[o.value.outlet]}),Object.entries(i).forEach(([o,s])=>Yr(s,e.getContext(o),n)),n}function Cp(r,t,e,a,n={canDeactivateChecks:[],canActivateChecks:[]}){let i=r.value,o=t?t.value:null,s=e?e.getContext(r.value.outlet):null;if(o&&i.routeConfig===o.routeConfig){let c=_p(o,i,i.routeConfig.runGuardsAndResolvers);c?n.canActivateChecks.push(new Ri(a)):(i.data=o.data,i._resolvedData=o._resolvedData),i.component?Zr(r,t,s?s.children:null,a,n):Zr(r,t,e,a,n),c&&s&&s.outlet&&s.outlet.isActivated&&n.canDeactivateChecks.push(new Ha(s.outlet.component,o))}else o&&Yr(t,s,n),n.canActivateChecks.push(new Ri(a)),i.component?Zr(r,null,s?s.children:null,a,n):Zr(r,null,e,a,n);return n}function _p(r,t,e){if(typeof e=="function")return e(r,t);switch(e){case"pathParamsChange":return!na(r.url,t.url);case"pathParamsOrQueryParamsChange":return!na(r.url,t.url)||!ut(r.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ns(r,t)||!ut(r.queryParams,t.queryParams);case"paramsChange":default:return!Ns(r,t)}}function Yr(r,t,e){let a=qa(r),n=r.value;Object.entries(a).forEach(([i,o])=>{n.component?t?Yr(o,t.children.getContext(i),e):Yr(o,null,e):Yr(o,t,e)}),n.component?t&&t.outlet&&t.outlet.isActivated?e.canDeactivateChecks.push(new Ha(t.outlet.component,n)):e.canDeactivateChecks.push(new Ha(null,n)):e.canDeactivateChecks.push(new Ha(null,n))}function hn(r){return typeof r=="function"}function bp(r){return typeof r=="boolean"}function Sp(r){return r&&hn(r.canLoad)}function xp(r){return r&&hn(r.canActivate)}function Ip(r){return r&&hn(r.canActivateChild)}function Lp(r){return r&&hn(r.canDeactivate)}function Dp(r){return r&&hn(r.canMatch)}function ml(r){return r instanceof G1||r?.name==="EmptyError"}var hi=Symbol("INITIAL_VALUE");function Ga(){return ye(r=>Ir(r.map(t=>t.pipe(Ye(1),Dr(hi)))).pipe(T(t=>{for(let e of t)if(e!==!0){if(e===hi)return hi;if(e===!1||Ap(e))return e}return!0}),Je(t=>t!==hi),Ye(1)))}function Ap(r){return qt(r)||r instanceof $a}function Rp(r,t){return Ve(e=>{let{targetSnapshot:a,currentSnapshot:n,guards:{canActivateChecks:i,canDeactivateChecks:o}}=e;return o.length===0&&i.length===0?x(P(k({},e),{guardsResult:!0})):Ep(o,a,n,r).pipe(Ve(s=>s&&bp(s)?Tp(a,i,r,t):x(s)),T(s=>P(k({},e),{guardsResult:s})))})}function Ep(r,t,e,a){return de(r).pipe(Ve(n=>Vp(n.component,n.route,e,t,a)),Rt(n=>n!==!0,!0))}function Tp(r,t,e,a){return de(t).pipe(ea(n=>Wn(Fp(n.route.parent,a),Pp(n.route,a),jp(r,n.path,e),Op(r,n.route,e))),Rt(n=>n!==!0,!0))}function Pp(r,t){return r!==null&&t&&t(new Si(r)),x(!0)}function Fp(r,t){return r!==null&&t&&t(new _i(r)),x(!0)}function Op(r,t,e){let a=t.routeConfig?t.routeConfig.canActivate:null;if(!a||a.length===0)return x(!0);let n=a.map(i=>Kn(()=>{let o=Wa(t)??e,s=Za(i,o),c=xp(s)?s.canActivate(t,r):Qe(o,()=>s(t,r));return bt(c).pipe(Rt())}));return x(n).pipe(Ga())}function jp(r,t,e){let a=t[t.length-1],i=t.slice(0,t.length-1).reverse().map(o=>wp(o)).filter(o=>o!==null).map(o=>Kn(()=>{let s=o.guards.map(c=>{let d=Wa(o.node)??e,l=Za(c,d),h=Ip(l)?l.canActivateChild(a,r):Qe(d,()=>l(a,r));return bt(h).pipe(Rt())});return x(s).pipe(Ga())}));return x(i).pipe(Ga())}function Vp(r,t,e,a,n){let i=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!i||i.length===0)return x(!0);let o=i.map(s=>{let c=Wa(t)??n,d=Za(s,c),l=Lp(d)?d.canDeactivate(r,t,e,a):Qe(c,()=>d(r,t,e,a));return bt(l).pipe(Rt())});return x(o).pipe(Ga())}function zp(r,t,e,a){let n=t.canLoad;if(n===void 0||n.length===0)return x(!0);let i=n.map(o=>{let s=Za(o,r),c=Sp(s)?s.canLoad(t,e):Qe(r,()=>s(t,e));return bt(c)});return x(i).pipe(Ga(),kl(a))}function kl(r){return N1(Q(t=>{if(typeof t!="boolean")throw Ai(r,t)}),T(t=>t===!0))}function qp(r,t,e,a){let n=t.canMatch;if(!n||n.length===0)return x(!0);let i=n.map(o=>{let s=Za(o,r),c=Dp(s)?s.canMatch(t,e):Qe(r,()=>s(t,e));return bt(c)});return x(i).pipe(Ga(),kl(a))}var sn=class{segmentGroup;constructor(t){this.segmentGroup=t||null}},cn=class extends Error{urlTree;constructor(t){super(),this.urlTree=t}};function za(r){return Sr(new sn(r))}function Bp(r){return Sr(new O(4e3,!1))}function Hp(r){return Sr(fl(!1,Ae.GuardRejected))}var Gs=class{urlSerializer;urlTree;constructor(t,e){this.urlSerializer=t,this.urlTree=e}lineralizeSegments(t,e){let a=[],n=e.root;for(;;){if(a=a.concat(n.segments),n.numberOfChildren===0)return x(a);if(n.numberOfChildren>1||!n.children[R])return Bp(`${t.redirectTo}`);n=n.children[R]}}applyRedirectCommands(t,e,a,n,i){return Np(e,n,i).pipe(T(o=>{if(o instanceof yt)throw new cn(o);let s=this.applyRedirectCreateUrlTree(o,this.urlSerializer.parse(o),t,a);if(o[0]==="/")throw new cn(s);return s}))}applyRedirectCreateUrlTree(t,e,a,n){let i=this.createSegmentGroup(t,e.root,a,n);return new yt(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){let a={};return Object.entries(t).forEach(([n,i])=>{if(typeof i=="string"&&i[0]===":"){let s=i.substring(1);a[n]=e[s]}else a[n]=i}),a}createSegmentGroup(t,e,a,n){let i=this.createSegments(t,e.segments,a,n),o={};return Object.entries(e.children).forEach(([s,c])=>{o[s]=this.createSegmentGroup(t,c,a,n)}),new H(i,o)}createSegments(t,e,a,n){return e.map(i=>i.path[0]===":"?this.findPosParam(t,i,n):this.findOrReturn(i,a))}findPosParam(t,e,a){let n=a[e.path.substring(1)];if(!n)throw new O(4001,!1);return n}findOrReturn(t,e){let a=0;for(let n of e){if(n.path===t.path)return e.splice(a),n;a++}return t}};function Np(r,t,e){if(typeof r=="string")return x(r);let a=r,{queryParams:n,fragment:i,routeConfig:o,url:s,outlet:c,params:d,data:l,title:h}=t;return bt(Qe(e,()=>a({params:d,data:l,queryParams:n,fragment:i,routeConfig:o,url:s,outlet:c,title:h})))}var Ws={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Up(r,t,e,a,n){let i=vl(r,t,e);return i.matched?(a=up(t,a),qp(a,t,e,n).pipe(T(o=>o===!0?i:k({},Ws)))):x(i)}function vl(r,t,e){if(t.path==="**")return $p(e);if(t.path==="")return t.pathMatch==="full"&&(r.hasChildren()||e.length>0)?k({},Ws):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};let n=(t.matcher||Kd)(e,r,t);if(!n)return k({},Ws);let i={};Object.entries(n.posParams??{}).forEach(([s,c])=>{i[s]=c.path});let o=n.consumed.length>0?k(k({},i),n.consumed[n.consumed.length-1].parameters):i;return{matched:!0,consumedSegments:n.consumed,remainingSegments:e.slice(n.consumed.length),parameters:o,positionalParamSegments:n.posParams??{}}}function $p(r){return{matched:!0,parameters:r.length>0?Xd(r).parameters:{},consumedSegments:r,remainingSegments:[],positionalParamSegments:{}}}function $d(r,t,e,a){return e.length>0&&Kp(r,e,a)?{segmentGroup:new H(t,Wp(a,new H(e,r.children))),slicedSegments:[]}:e.length===0&&Zp(r,e,a)?{segmentGroup:new H(r.segments,Gp(r,e,a,r.children)),slicedSegments:e}:{segmentGroup:new H(r.segments,r.children),slicedSegments:e}}function Gp(r,t,e,a){let n={};for(let i of e)if(Pi(r,t,i)&&!a[ot(i)]){let o=new H([],{});n[ot(i)]=o}return k(k({},a),n)}function Wp(r,t){let e={};e[R]=t;for(let a of r)if(a.path===""&&ot(a)!==R){let n=new H([],{});e[ot(a)]=n}return e}function Kp(r,t,e){return e.some(a=>Pi(r,t,a)&&ot(a)!==R)}function Zp(r,t,e){return e.some(a=>Pi(r,t,a))}function Pi(r,t,e){return(r.hasChildren()||t.length>0)&&e.pathMatch==="full"?!1:e.path===""}function Xp(r,t,e){return t.length===0&&!r.children[e]}var Ks=class{};function Jp(r,t,e,a,n,i,o="emptyOnly"){return new Zs(r,t,e,a,n,o,i).recognize()}var Yp=31,Zs=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(t,e,a,n,i,o,s){this.injector=t,this.configLoader=e,this.rootComponentType=a,this.config=n,this.urlTree=i,this.paramsInheritanceStrategy=o,this.urlSerializer=s,this.applyRedirects=new Gs(this.urlSerializer,this.urlTree)}noMatchError(t){return new O(4002,`'${t.segmentGroup}'`)}recognize(){let t=$d(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(T(({children:e,rootSnapshot:a})=>{let n=new He(a,e),i=new nn("",n),o=il(a,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,i.url=this.urlSerializer.serialize(o),{state:i,tree:o}}))}match(t){let e=new ia([],Object.freeze({}),Object.freeze(k({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),R,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,t,R,e).pipe(T(a=>({children:a,rootSnapshot:e})),kt(a=>{if(a instanceof cn)return this.urlTree=a.urlTree,this.match(a.urlTree.root);throw a instanceof sn?this.noMatchError(a):a}))}processSegmentGroup(t,e,a,n,i){return a.segments.length===0&&a.hasChildren()?this.processChildren(t,e,a,i):this.processSegment(t,e,a,a.segments,n,!0,i).pipe(T(o=>o instanceof He?[o]:[]))}processChildren(t,e,a,n){let i=[];for(let o of Object.keys(a.children))o==="primary"?i.unshift(o):i.push(o);return de(i).pipe(ea(o=>{let s=a.children[o],c=pp(e,o);return this.processSegmentGroup(t,c,s,o,n)}),X1((o,s)=>(o.push(...s),o)),is(null),Z1(),Ve(o=>{if(o===null)return za(a);let s=Ml(o);return Qp(s),x(s)}))}processSegment(t,e,a,n,i,o,s){return de(e).pipe(ea(c=>this.processSegmentAgainstRoute(c._injector??t,e,c,a,n,i,o,s).pipe(kt(d=>{if(d instanceof sn)return x(null);throw d}))),Rt(c=>!!c),kt(c=>{if(ml(c))return Xp(a,n,i)?x(new Ks):za(a);throw c}))}processSegmentAgainstRoute(t,e,a,n,i,o,s,c){return ot(a)!==o&&(o===R||!Pi(n,i,a))?za(n):a.redirectTo===void 0?this.matchSegmentAgainstRoute(t,n,a,i,o,c):this.allowRedirects&&s?this.expandSegmentAgainstRouteUsingRedirect(t,n,e,a,i,o,c):za(n)}expandSegmentAgainstRouteUsingRedirect(t,e,a,n,i,o,s){let{matched:c,parameters:d,consumedSegments:l,positionalParamSegments:h,remainingSegments:p}=vl(e,n,i);if(!c)return za(e);typeof n.redirectTo=="string"&&n.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Yp&&(this.allowRedirects=!1));let u=new ia(i,d,Object.freeze(k({},this.urlTree.queryParams)),this.urlTree.fragment,Gd(n),ot(n),n.component??n._loadedComponent??null,n,Wd(n)),y=Di(u,s,this.paramsInheritanceStrategy);return u.params=Object.freeze(y.params),u.data=Object.freeze(y.data),this.applyRedirects.applyRedirectCommands(l,n.redirectTo,h,u,t).pipe(ye(g=>this.applyRedirects.lineralizeSegments(n,g)),Ve(g=>this.processSegment(t,a,e,g.concat(p),o,!1,s)))}matchSegmentAgainstRoute(t,e,a,n,i,o){let s=Up(e,a,n,t,this.urlSerializer);return a.path==="**"&&(e.children={}),s.pipe(ye(c=>c.matched?(t=a._injector??t,this.getChildConfig(t,a,n).pipe(ye(({routes:d})=>{let l=a._loadedInjector??t,{parameters:h,consumedSegments:p,remainingSegments:u}=c,y=new ia(p,h,Object.freeze(k({},this.urlTree.queryParams)),this.urlTree.fragment,Gd(a),ot(a),a.component??a._loadedComponent??null,a,Wd(a)),m=Di(y,o,this.paramsInheritanceStrategy);y.params=Object.freeze(m.params),y.data=Object.freeze(m.data);let{segmentGroup:g,slicedSegments:v}=$d(e,p,u,d);if(v.length===0&&g.hasChildren())return this.processChildren(l,d,g,y).pipe(T(M=>new He(y,M)));if(d.length===0&&v.length===0)return x(new He(y,[]));let C=ot(a)===i;return this.processSegment(l,d,g,v,C?R:i,!0,y).pipe(T(M=>new He(y,M instanceof He?[M]:[])))}))):za(e)))}getChildConfig(t,e,a){return e.children?x({routes:e.children,injector:t}):e.loadChildren?e._loadedRoutes!==void 0?x({routes:e._loadedRoutes,injector:e._loadedInjector}):zp(t,e,a,this.urlSerializer).pipe(Ve(n=>n?this.configLoader.loadChildren(t,e).pipe(Q(i=>{e._loadedRoutes=i.routes,e._loadedInjector=i.injector})):Hp(e))):x({routes:[],injector:t})}};function Qp(r){r.sort((t,e)=>t.value.outlet===R?-1:e.value.outlet===R?1:t.value.outlet.localeCompare(e.value.outlet))}function ey(r){let t=r.value.routeConfig;return t&&t.path===""}function Ml(r){let t=[],e=new Set;for(let a of r){if(!ey(a)){t.push(a);continue}let n=t.find(i=>a.value.routeConfig===i.value.routeConfig);n!==void 0?(n.children.push(...a.children),e.add(n)):t.push(a)}for(let a of e){let n=Ml(a.children);t.push(new He(a.value,n))}return t.filter(a=>!e.has(a))}function Gd(r){return r.data||{}}function Wd(r){return r.resolve||{}}function ty(r,t,e,a,n,i){return Ve(o=>Jp(r,t,e,a,o.extractedUrl,n,i).pipe(T(({state:s,tree:c})=>P(k({},o),{targetSnapshot:s,urlAfterRedirects:c}))))}function ay(r,t){return Ve(e=>{let{targetSnapshot:a,guards:{canActivateChecks:n}}=e;if(!n.length)return x(e);let i=new Set(n.map(c=>c.route)),o=new Set;for(let c of i)if(!o.has(c))for(let d of wl(c))o.add(d);let s=0;return de(o).pipe(ea(c=>i.has(c)?ry(c,a,r,t):(c.data=Di(c,c.parent,r).resolve,x(void 0))),Q(()=>s++),ss(1),Ve(c=>s===o.size?x(e):dt))})}function wl(r){let t=r.children.map(e=>wl(e)).flat();return[r,...t]}function ry(r,t,e,a){let n=r.routeConfig,i=r._resolve;return n?.title!==void 0&&!ul(n)&&(i[dn]=n.title),Kn(()=>(r.data=Di(r,r.parent,e).resolve,ny(i,r,t,a).pipe(T(o=>(r._resolvedData=o,r.data=k(k({},r.data),o),null)))))}function ny(r,t,e,a){let n=js(r);if(n.length===0)return x({});let i={};return de(n).pipe(Ve(o=>iy(r[o],t,e,a).pipe(Rt(),Q(s=>{if(s instanceof $a)throw Ai(new sa,s);i[o]=s}))),ss(1),T(()=>i),kt(o=>ml(o)?dt:Sr(o)))}function iy(r,t,e,a){let n=Wa(t)??a,i=Za(r,n),o=i.resolve?i.resolve(t,e):Qe(n,()=>i(t,e));return bt(o)}function Fs(r){return ye(t=>{let e=r(t);return e?de(e).pipe(T(()=>t)):x(t)})}var ec=(()=>{class r{buildTitle(e){let a,n=e.root;for(;n!==void 0;)a=this.getResolvedTitleForRoute(n)??a,n=n.children.find(i=>i.outlet===R);return a}getResolvedTitleForRoute(e){return e.data[dn]}static \u0275fac=function(a){return new(a||r)};static \u0275prov=b({token:r,factory:()=>f(Cl),providedIn:"root"})}return r})(),Cl=(()=>{class r extends ec{title;constructor(e){super(),this.title=e}updateTitle(e){let a=this.buildTitle(e);a!==void 0&&this.title.setTitle(a)}static \u0275fac=function(a){return new(a||r)(z(qd))};static \u0275prov=b({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),Xa=new D("",{providedIn:"root",factory:()=>({})}),un=new D(""),_l=(()=>{class r{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=f(vd);loadComponent(e,a){if(this.componentLoaders.get(a))return this.componentLoaders.get(a);if(a._loadedComponent)return x(a._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(a);let n=bt(Qe(e,()=>a.loadComponent())).pipe(T(Sl),ye(xl),Q(o=>{this.onLoadEndListener&&this.onLoadEndListener(a),a._loadedComponent=o}),Lr(()=>{this.componentLoaders.delete(a)})),i=new br(n,()=>new Y).pipe(as());return this.componentLoaders.set(a,i),i}loadChildren(e,a){if(this.childrenLoaders.get(a))return this.childrenLoaders.get(a);if(a._loadedRoutes)return x({routes:a._loadedRoutes,injector:a._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(a);let i=bl(a,this.compiler,e,this.onLoadEndListener).pipe(Lr(()=>{this.childrenLoaders.delete(a)})),o=new br(i,()=>new Y).pipe(as());return this.childrenLoaders.set(a,o),o}static \u0275fac=function(a){return new(a||r)};static \u0275prov=b({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function bl(r,t,e,a){return bt(Qe(e,()=>r.loadChildren())).pipe(T(Sl),ye(xl),Ve(n=>n instanceof cd||Array.isArray(n)?x(n):de(t.compileModuleAsync(n))),T(n=>{a&&a(r);let i,o,s=!1;return Array.isArray(n)?(o=n,s=!0):(i=n.create(e).injector,o=i.get(un,[],{optional:!0,self:!0}).flat()),{routes:o.map(Qs),injector:i}}))}function oy(r){return r&&typeof r=="object"&&"default"in r}function Sl(r){return oy(r)?r.default:r}function xl(r){return x(r)}var Fi=(()=>{class r{static \u0275fac=function(a){return new(a||r)};static \u0275prov=b({token:r,factory:()=>f(sy),providedIn:"root"})}return r})(),sy=(()=>{class r{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,a){return e}static \u0275fac=function(a){return new(a||r)};static \u0275prov=b({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),Il=new D("");var Ll=new D(""),Dl=(()=>{class r{currentNavigation=ne(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=null;events=new Y;transitionAbortWithErrorSubject=new Y;configLoader=f(_l);environmentInjector=f(Tt);destroyRef=f(lt);urlSerializer=f(ln);rootContexts=f(Ka);location=f(ja);inputBindingEnabled=f(Ti,{optional:!0})!==null;titleStrategy=f(ec);options=f(Xa,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=f(Fi);createViewTransition=f(Il,{optional:!0});navigationErrorHandler=f(Ll,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>x(void 0);rootComponentType=null;destroyed=!1;constructor(){let e=n=>this.events.next(new wi(n)),a=n=>this.events.next(new Ci(n));this.configLoader.onLoadEndListener=a,this.configLoader.onLoadStartListener=e,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(e){let a=++this.navigationId;B(()=>{this.transitions?.next(P(k({},e),{extractedUrl:this.urlHandlingStrategy.extract(e.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:a}))})}setupNavigations(e){return this.transitions=new Me(null),this.transitions.pipe(Je(a=>a!==null),ye(a=>{let n=!1;return x(a).pipe(ye(i=>{if(this.navigationId>a.id)return this.cancelNavigationTransition(a,"",Ae.SupersededByNewNavigation),dt;this.currentTransition=a,this.currentNavigation.set({id:i.id,initialUrl:i.rawUrl,extractedUrl:i.extractedUrl,targetBrowserUrl:typeof i.extras.browserUrl=="string"?this.urlSerializer.parse(i.extras.browserUrl):i.extras.browserUrl,trigger:i.source,extras:i.extras,previousNavigation:this.lastSuccessfulNavigation?P(k({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>i.abortController.abort()});let o=!e.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),s=i.extras.onSameUrlNavigation??e.onSameUrlNavigation;if(!o&&s!=="reload")return this.events.next(new Ct(i.id,this.urlSerializer.serialize(i.rawUrl),"",en.IgnoredSameUrlNavigation)),i.resolve(!1),dt;if(this.urlHandlingStrategy.shouldProcessUrl(i.rawUrl))return x(i).pipe(ye(c=>(this.events.next(new ca(c.id,this.urlSerializer.serialize(c.extractedUrl),c.source,c.restoredState)),c.id!==this.navigationId?dt:Promise.resolve(c))),ty(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,this.paramsInheritanceStrategy),Q(c=>{a.targetSnapshot=c.targetSnapshot,a.urlAfterRedirects=c.urlAfterRedirects,this.currentNavigation.update(l=>(l.finalUrl=c.urlAfterRedirects,l));let d=new tn(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(d)}));if(o&&this.urlHandlingStrategy.shouldProcessUrl(i.currentRawUrl)){let{id:c,extractedUrl:d,source:l,restoredState:h,extras:p}=i,u=new ca(c,this.urlSerializer.serialize(d),l,h);this.events.next(u);let y=ll(this.rootComponentType).snapshot;return this.currentTransition=a=P(k({},i),{targetSnapshot:y,urlAfterRedirects:d,extras:P(k({},p),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(m=>(m.finalUrl=d,m)),x(a)}else return this.events.next(new Ct(i.id,this.urlSerializer.serialize(i.extractedUrl),"",en.IgnoredByUrlHandlingStrategy)),i.resolve(!1),dt}),Q(i=>{let o=new mi(i.id,this.urlSerializer.serialize(i.extractedUrl),this.urlSerializer.serialize(i.urlAfterRedirects),i.targetSnapshot);this.events.next(o)}),T(i=>(this.currentTransition=a=P(k({},i),{guards:Mp(i.targetSnapshot,i.currentSnapshot,this.rootContexts)}),a)),Rp(this.environmentInjector,i=>this.events.next(i)),Q(i=>{if(a.guardsResult=i.guardsResult,i.guardsResult&&typeof i.guardsResult!="boolean")throw Ai(this.urlSerializer,i.guardsResult);let o=new ki(i.id,this.urlSerializer.serialize(i.extractedUrl),this.urlSerializer.serialize(i.urlAfterRedirects),i.targetSnapshot,!!i.guardsResult);this.events.next(o)}),Je(i=>i.guardsResult?!0:(this.cancelNavigationTransition(i,"",Ae.GuardRejected),!1)),Fs(i=>{if(i.guards.canActivateChecks.length!==0)return x(i).pipe(Q(o=>{let s=new vi(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),ye(o=>{let s=!1;return x(o).pipe(ay(this.paramsInheritanceStrategy,this.environmentInjector),Q({next:()=>s=!0,complete:()=>{s||this.cancelNavigationTransition(o,"",Ae.NoDataFromResolver)}}))}),Q(o=>{let s=new Mi(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}))}),Fs(i=>{let o=s=>{let c=[];if(s.routeConfig?.loadComponent){let d=Wa(s)??this.environmentInjector;c.push(this.configLoader.loadComponent(d,s.routeConfig).pipe(Q(l=>{s.component=l}),T(()=>{})))}for(let d of s.children)c.push(...o(d));return c};return Ir(o(i.targetSnapshot.root)).pipe(is(null),Ye(1))}),Fs(()=>this.afterPreactivation()),ye(()=>{let{currentSnapshot:i,targetSnapshot:o}=a,s=this.createViewTransition?.(this.environmentInjector,i.root,o.root);return s?de(s).pipe(T(()=>a)):x(a)}),T(i=>{let o=fp(e.routeReuseStrategy,i.targetSnapshot,i.currentRouterState);return this.currentTransition=a=P(k({},i),{targetRouterState:o}),this.currentNavigation.update(s=>(s.targetRouterState=o,s)),a}),Q(()=>{this.events.next(new an)}),vp(this.rootContexts,e.routeReuseStrategy,i=>this.events.next(i),this.inputBindingEnabled),Ye(1),Te(new Yt(i=>{let o=a.abortController.signal,s=()=>i.next();return o.addEventListener("abort",s),()=>o.removeEventListener("abort",s)}).pipe(Je(()=>!n&&!a.targetRouterState),Q(()=>{this.cancelNavigationTransition(a,a.abortController.signal.reason+"",Ae.Aborted)}))),Q({next:i=>{n=!0,this.lastSuccessfulNavigation=B(this.currentNavigation),this.events.next(new st(i.id,this.urlSerializer.serialize(i.extractedUrl),this.urlSerializer.serialize(i.urlAfterRedirects))),this.titleStrategy?.updateTitle(i.targetRouterState.snapshot),i.resolve(!0)},complete:()=>{n=!0}}),Te(this.transitionAbortWithErrorSubject.pipe(Q(i=>{throw i}))),Lr(()=>{n||this.cancelNavigationTransition(a,"",Ae.SupersededByNewNavigation),this.currentTransition?.id===a.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),kt(i=>{if(this.destroyed)return a.resolve(!1),dt;if(n=!0,gl(i))this.events.next(new pt(a.id,this.urlSerializer.serialize(a.extractedUrl),i.message,i.cancellationCode)),kp(i)?this.events.next(new Ua(i.url,i.navigationBehaviorOptions)):a.resolve(!1);else{let o=new Na(a.id,this.urlSerializer.serialize(a.extractedUrl),i,a.targetSnapshot??void 0);try{let s=Qe(this.environmentInjector,()=>this.navigationErrorHandler?.(o));if(s instanceof $a){let{message:c,cancellationCode:d}=Ai(this.urlSerializer,s);this.events.next(new pt(a.id,this.urlSerializer.serialize(a.extractedUrl),c,d)),this.events.next(new Ua(s.redirectTo,s.navigationBehaviorOptions))}else throw this.events.next(o),i}catch(s){this.options.resolveNavigationPromiseOnError?a.resolve(!1):a.reject(s)}}return dt}))}))}cancelNavigationTransition(e,a,n){let i=new pt(e.id,this.urlSerializer.serialize(e.extractedUrl),a,n);this.events.next(i),e.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let e=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),a=B(this.currentNavigation),n=a?.targetBrowserUrl??a?.extractedUrl;return e.toString()!==n?.toString()&&!a?.extras.skipLocationChange}static \u0275fac=function(a){return new(a||r)};static \u0275prov=b({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function cy(r){return r!==Jr}var Al=(()=>{class r{static \u0275fac=function(a){return new(a||r)};static \u0275prov=b({token:r,factory:()=>f(dy),providedIn:"root"})}return r})(),Ei=class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}},dy=(()=>{class r extends Ei{static \u0275fac=(()=>{let e;return function(n){return(e||(e=se(r)))(n||r)}})();static \u0275prov=b({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),Rl=(()=>{class r{urlSerializer=f(ln);options=f(Xa,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=f(ja);urlHandlingStrategy=f(Fi);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new yt;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:e,initialUrl:a,targetBrowserUrl:n}){let i=e!==void 0?this.urlHandlingStrategy.merge(e,a):a,o=n??i;return o instanceof yt?this.urlSerializer.serialize(o):o}commitTransition({targetRouterState:e,finalUrl:a,initialUrl:n}){a&&e?(this.currentUrlTree=a,this.rawUrlTree=this.urlHandlingStrategy.merge(a,n),this.routerState=e):this.rawUrlTree=n}routerState=ll(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:e}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e??this.rawUrlTree)}static \u0275fac=function(a){return new(a||r)};static \u0275prov=b({token:r,factory:()=>f(ly),providedIn:"root"})}return r})(),ly=(()=>{class r extends Rl{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(e){return this.location.subscribe(a=>{a.type==="popstate"&&setTimeout(()=>{e(a.url,a.state,"popstate")})})}handleRouterEvent(e,a){e instanceof ca?this.updateStateMemento():e instanceof Ct?this.commitTransition(a):e instanceof tn?this.urlUpdateStrategy==="eager"&&(a.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(a),a)):e instanceof an?(this.commitTransition(a),this.urlUpdateStrategy==="deferred"&&!a.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(a),a)):e instanceof pt&&e.code!==Ae.SupersededByNewNavigation&&e.code!==Ae.Redirect?this.restoreHistory(a):e instanceof Na?this.restoreHistory(a,!0):e instanceof st&&(this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId)}setBrowserUrl(e,{extras:a,id:n}){let{replaceUrl:i,state:o}=a;if(this.location.isCurrentPathEqualTo(e)||i){let s=this.browserPageId,c=k(k({},o),this.generateNgRouterState(n,s));this.location.replaceState(e,"",c)}else{let s=k(k({},o),this.generateNgRouterState(n,this.browserPageId+1));this.location.go(e,"",s)}}restoreHistory(e,a=!1){if(this.canceledNavigationResolution==="computed"){let n=this.browserPageId,i=this.currentPageId-n;i!==0?this.location.historyGo(i):this.getCurrentUrlTree()===e.finalUrl&&i===0&&(this.resetInternalState(e),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(a&&this.resetInternalState(e),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,a){return this.canceledNavigationResolution==="computed"?{navigationId:e,\u0275routerPageId:a}:{navigationId:e}}static \u0275fac=(()=>{let e;return function(n){return(e||(e=se(r)))(n||r)}})();static \u0275prov=b({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function tc(r,t){r.events.pipe(Je(e=>e instanceof st||e instanceof pt||e instanceof Na||e instanceof Ct),T(e=>e instanceof st||e instanceof Ct?0:(e instanceof pt?e.code===Ae.Redirect||e.code===Ae.SupersededByNewNavigation:!1)?2:1),Je(e=>e!==2),Ye(1)).subscribe(()=>{t()})}var hy={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},uy={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Bt=(()=>{class r{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=f(dd);stateManager=f(Rl);options=f(Xa,{optional:!0})||{};pendingTasks=f(td);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=f(Dl);urlSerializer=f(ln);location=f(ja);urlHandlingStrategy=f(Fi);injector=f(Tt);_events=new Y;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=f(Al);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=f(un,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!f(Ti,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:e=>{this.console.warn(e)}}),this.subscribeToNavigationEvents()}eventsSubscription=new ts;subscribeToNavigationEvents(){let e=this.navigationTransitions.events.subscribe(a=>{try{let n=this.navigationTransitions.currentTransition,i=B(this.navigationTransitions.currentNavigation);if(n!==null&&i!==null){if(this.stateManager.handleRouterEvent(a,i),a instanceof pt&&a.code!==Ae.Redirect&&a.code!==Ae.SupersededByNewNavigation)this.navigated=!0;else if(a instanceof st)this.navigated=!0;else if(a instanceof Ua){let o=a.navigationBehaviorOptions,s=this.urlHandlingStrategy.merge(a.url,n.currentRawUrl),c=k({browserUrl:n.extras.browserUrl,info:n.extras.info,skipLocationChange:n.extras.skipLocationChange,replaceUrl:n.extras.replaceUrl||this.urlUpdateStrategy==="eager"||cy(n.source)},o);this.scheduleNavigation(s,Jr,null,c,{resolve:n.resolve,reject:n.reject,promise:n.promise})}}hp(a)&&this._events.next(a)}catch(n){this.navigationTransitions.transitionAbortWithErrorSubject.next(n)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Jr,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((e,a,n)=>{this.navigateToSyncWithBrowser(e,n,a)})}navigateToSyncWithBrowser(e,a,n){let i={replaceUrl:!0},o=n?.navigationId?n:null;if(n){let c=k({},n);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(i.state=c)}let s=this.parseUrl(e);this.scheduleNavigation(s,a,o,i).catch(c=>{this.disposed||this.injector.get(Rr)(c)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return B(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(Qs),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,a={}){let{relativeTo:n,queryParams:i,fragment:o,queryParamsHandling:s,preserveFragment:c}=a,d=c?this.currentUrlTree.fragment:o,l=null;switch(s??this.options.defaultQueryParamsHandling){case"merge":l=k(k({},this.currentUrlTree.queryParams),i);break;case"preserve":l=this.currentUrlTree.queryParams;break;default:l=i||null}l!==null&&(l=this.removeEmptyProps(l));let h;try{let p=n?n.snapshot:this.routerState.snapshot.root;h=ol(p)}catch{(typeof e[0]!="string"||e[0][0]!=="/")&&(e=[]),h=this.currentUrlTree.root}return sl(h,e,l,d??null)}navigateByUrl(e,a={skipLocationChange:!1}){let n=qt(e)?e:this.parseUrl(e),i=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(i,Jr,null,a)}navigate(e,a={skipLocationChange:!1}){return py(e),this.navigateByUrl(this.createUrlTree(e,a),a)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){try{return this.urlSerializer.parse(e)}catch{return this.console.warn(Jn(4018,!1)),this.urlSerializer.parse("/")}}isActive(e,a){let n;if(a===!0?n=k({},hy):a===!1?n=k({},uy):n=a,qt(e))return Bd(this.currentUrlTree,e,n);let i=this.parseUrl(e);return Bd(this.currentUrlTree,i,n)}removeEmptyProps(e){return Object.entries(e).reduce((a,[n,i])=>(i!=null&&(a[n]=i),a),{})}scheduleNavigation(e,a,n,i,o){if(this.disposed)return Promise.resolve(!1);let s,c,d;o?(s=o.resolve,c=o.reject,d=o.promise):d=new Promise((h,p)=>{s=h,c=p});let l=this.pendingTasks.add();return tc(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(l))}),this.navigationTransitions.handleNavigationRequest({source:a,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:i,resolve:s,reject:c,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(h=>Promise.reject(h))}static \u0275fac=function(a){return new(a||r)};static \u0275prov=b({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function py(r){for(let t=0;t<r.length;t++)if(r[t]==null)throw new O(4008,!1)}var Ja=(()=>{class r{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=ne(null);get href(){return B(this.reactiveHref)}set href(e){this.reactiveHref.set(e)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new Y;applicationErrorHandler=f(Rr);options=f(Xa,{optional:!0});constructor(e,a,n,i,o,s){this.router=e,this.route=a,this.tabIndexAttribute=n,this.renderer=i,this.el=o,this.locationStrategy=s,this.reactiveHref.set(f(new ri("href"),{optional:!0}));let c=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area"||!!(typeof customElements=="object"&&customElements.get(c)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let e=this.preserveFragment,a=n=>n==="merge"||n==="preserve";e||=a(this.queryParamsHandling),e||=!this.queryParamsHandling&&!a(this.options?.defaultQueryParamsHandling),e&&(this.subscription=this.router.events.subscribe(n=>{n instanceof st&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(e){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",e)}ngOnChanges(e){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(e){e==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(qt(e)?this.routerLinkInput=e:this.routerLinkInput=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0"))}onClick(e,a,n,i,o){let s=this.urlTree;if(s===null||this.isAnchorElement&&(e!==0||a||n||i||o||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(s,c)?.catch(d=>{this.applicationErrorHandler(d)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let e=this.urlTree;this.reactiveHref.set(e!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(e))??"":null)}applyAttributeValue(e,a){let n=this.renderer,i=this.el.nativeElement;a!==null?n.setAttribute(i,e,a):n.removeAttribute(i,e)}get urlTree(){return this.routerLinkInput===null?null:qt(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(a){return new(a||r)(A(Bt),A(_t),ls("tabindex"),A(tt),A(W),A(Oa))};static \u0275dir=I({type:r,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(a,n){a&1&&Pe("click",function(o){return n.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),a&2&&nt("href",n.reactiveHref(),id)("target",n.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",ke],skipLocationChange:[2,"skipLocationChange","skipLocationChange",ke],replaceUrl:[2,"replaceUrl","replaceUrl",ke],routerLink:"routerLink"},features:[oe]})}return r})(),ac=(()=>{class r{router;element;renderer;cdr;link;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new le;constructor(e,a,n,i,o){this.router=e,this.element=a,this.renderer=n,this.cdr=i,this.link=o,this.routerEventsSubscription=e.events.subscribe(s=>{s instanceof st&&this.update()})}ngAfterContentInit(){x(this.links.changes,x(null)).pipe(rs()).subscribe(e=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let e=[...this.links.toArray(),this.link].filter(a=>!!a).map(a=>a.onChanges);this.linkInputChangesSubscription=de(e).pipe(rs()).subscribe(a=>{this._isActive!==this.isLinkActive(this.router)(a)&&this.update()})}set routerLinkActive(e){let a=Array.isArray(e)?e:e.split(" ");this.classes=a.filter(n=>!!n)}ngOnChanges(e){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let e=this.hasActiveLinks();this.classes.forEach(a=>{e?this.renderer.addClass(this.element.nativeElement,a):this.renderer.removeClass(this.element.nativeElement,a)}),e&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==e&&(this._isActive=e,this.cdr.markForCheck(),this.isActiveChange.emit(e))})}isLinkActive(e){let a=fy(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return n=>{let i=n.urlTree;return i?e.isActive(i,a):!1}}hasActiveLinks(){let e=this.isLinkActive(this.router);return this.link&&e(this.link)||this.links.some(e)}static \u0275fac=function(a){return new(a||r)(A(Bt),A(W),A(tt),A(Ge),A(Ja,8))};static \u0275dir=I({type:r,selectors:[["","routerLinkActive",""]],contentQueries:function(a,n,i){if(a&1&&Be(i,Ja,5),a&2){let o;_e(o=be())&&(n.links=o)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[oe]})}return r})();function fy(r){return!!r.paths}var gy=new D("");function my(r,...t){return Y1([{provide:un,multi:!0,useValue:r},[],{provide:_t,useFactory:ky,deps:[Bt]},{provide:ld,multi:!0,useFactory:vy},t.map(e=>e.\u0275providers)])}function ky(r){return r.routerState.root}function vy(){let r=f(Ie);return t=>{let e=r.get(Ra);if(t!==e.components[0])return;let a=r.get(Bt),n=r.get(My);r.get(wy)===1&&a.initialNavigation(),r.get(Cy,null,{optional:!0})?.setUpPreloading(),r.get(gy,null,{optional:!0})?.init(),a.resetRootComponentType(e.componentTypes[0]),n.closed||(n.next(),n.complete(),n.unsubscribe())}}var My=new D("",{factory:()=>new Y}),wy=new D("",{providedIn:"root",factory:()=>1});var Cy=new D("");function rc(r){r||(r=f(lt));let t=new Yt(e=>{if(r.destroyed){e.next();return}return r.onDestroy(e.next.bind(e))});return e=>e.pipe(Te(t))}function El(r,t){let e=t?.injector??f(Ie),a=new U1(1),n=Ot(()=>{let i;try{i=r()}catch(o){B(()=>a.error(o));return}B(()=>a.next(i))},{injector:e,manualCleanup:!0});return e.get(lt).onDestroy(()=>{n.destroy(),a.complete()}),a.asObservable()}var Tl=Symbol("DEEP_SIGNAL");function Pl(r){return new Proxy(r,{has(t,e){return!!this.get(t,e,void 0)},get(t,e){let a=B(t);return!by(a)||!(e in a)?(Yn(t[e])&&t[e][Tl]&&delete t[e],t[e]):(Yn(t[e])||(Object.defineProperty(t,e,{value:me(()=>t()[e]),configurable:!0}),t[e][Tl]=!0),Pl(t[e]))}})}var _y=[WeakSet,WeakMap,Promise,Date,Error,RegExp,ArrayBuffer,DataView,Function];function by(r){if(r===null||typeof r!="object"||Sy(r))return!1;let t=Object.getPrototypeOf(r);if(t===Object.prototype)return!0;for(;t&&t!==Object.prototype;){if(_y.includes(t.constructor))return!1;t=Object.getPrototypeOf(t)}return t===Object.prototype}function Sy(r){return typeof r?.[Symbol.iterator]=="function"}var xy=new WeakMap,Ue=Symbol("STATE_SOURCE");function nc(r,...t){let e=B(()=>Ya(r)),a=t.reduce((o,s)=>k(k({},o),typeof s=="function"?s(o):s),e),n=r[Ue],i=Reflect.ownKeys(r[Ue]);for(let o of Reflect.ownKeys(a))if(i.includes(o)){let s=o;e[s]!==a[s]&&n[s].set(a[s])}Ly(r)}function Ya(r){let t=r[Ue];return Reflect.ownKeys(r[Ue]).reduce((e,a)=>{let n=t[a]();return P(k({},e),{[a]:n})},{})}function Iy(r){return xy.get(r[Ue])||[]}function Ly(r){let t=Iy(r);for(let e of t){let a=B(()=>Ya(r));e(a)}}function Fl(...r){let t=[...r],e=typeof t[0]=="function"?{}:t.shift(),a=t;return(()=>{class i{constructor(){let s=a.reduce((m,g)=>g(m),Dy()),{stateSignals:c,props:d,methods:l,hooks:h}=s,p=k(k(k({},c),d),l);this[Ue]=s[Ue];for(let m of Reflect.ownKeys(p))this[m]=p[m];let{onInit:u,onDestroy:y}=h;u&&u(),y&&f(lt).onDestroy(y)}static \u0275fac=function(c){return new(c||i)};static \u0275prov=b({token:i,factory:i.\u0275fac,providedIn:e.providedIn||null})}return i})()}function Dy(){return{[Ue]:{},stateSignals:{},props:{},methods:{},hooks:{}}}function Qa(...r){let t=typeof r[0]=="function"?r:r.slice(1);return e=>t.reduce((a,n)=>n(a),e)}function pn(r){return t=>{let e=k(k(k({[Ue]:t[Ue]},t.stateSignals),t.props),t.methods),a=typeof r=="function"?r(e):r,n=(i,o)=>o?()=>{i&&i(),o(e)}:i;return P(k({},t),{hooks:{onInit:n(t.hooks.onInit,a.onInit),onDestroy:n(t.hooks.onDestroy,a.onDestroy)}})}}function Ol(r){return t=>{let e=r(k(k(k({[Ue]:t[Ue]},t.stateSignals),t.props),t.methods));return P(k({},t),{methods:k(k({},t.methods),e)})}}function Oi(r){return t=>{let e=typeof r=="function"?r():r,a=Reflect.ownKeys(e),n=t[Ue],i={};for(let o of a)n[o]=ne(e[o]),i[o]=Pl(n[o]);return P(k({},t),{stateSignals:k(k({},t.stateSignals),i)})}}function er(...r){return{reducer:r.pop(),events:r}}var ji=Symbol(),jl=Symbol(),Vi=class{[ji]=new Y;on(...t){return this[ji].pipe(Ay(t),Ey())}},ic=(()=>{class r extends Vi{static \u0275fac=(()=>{let e;return function(n){return(e||(e=se(r)))(n||r)}})();static \u0275prov=b({token:r,factory:r.\u0275fac,providedIn:"platform"})}return r})(),Vl=(()=>{class r extends Vi{static \u0275fac=(()=>{let e;return function(n){return(e||(e=se(r)))(n||r)}})();static \u0275prov=b({token:r,factory:r.\u0275fac,providedIn:"platform"})}return r})();function Ay(r){if(r.length===0)return e=>e;let t=Ry(r);return Je(({type:e})=>!!t[e])}function Ry(r){return r.reduce((t,e)=>P(k({},t),{[e.type]:e}),{})}function Ey(){return T(t=>{var r=B1(t,[]);return Object.defineProperty(r,jl,{value:r.type}),r})}var oc=(()=>{class r{reducerEvents=f(Vl);events=f(ic);dispatch(e){this.reducerEvents[ji].next(e),$1.schedule(()=>this.events[ji].next(e))}static \u0275fac=function(a){return new(a||r)};static \u0275prov=b({token:r,factory:r.\u0275fac,providedIn:"platform"})}return r})();function Ty(r){let t=e=>({type:r,payload:e});return t.type=r,t}function zl(r){return Object.entries(r.events).reduce((t,[e])=>{let a=`[${r.source}] ${e}`;return P(k({},t),{[e]:Ty(a)})},{})}function Py(r){return typeof r=="object"&&r!==null&&"type"in r}function ql(r){return Qa(void 0,pn({onInit(t,e=f(oc)){let a=r(t),n=Object.values(a).map(i=>i.pipe(Q(o=>{Py(o)&&!(jl in o)&&e.dispatch(o)})));ns(...n).pipe(rc()).subscribe()}}))}function Bl(...r){return Qa({state:void 0},pn({onInit(t,e=f(Vl)){let a=r.map(n=>e.on(...n.events).pipe(Q(i=>{let o=B(()=>Ya(t)),s=n.reducer(i,o),c=Array.isArray(s)?s:[s];nc(t,...c)})));ns(...a).pipe(rc()).subscribe()}}))}var St=zl({source:"Users",events:{getUser:void 0,getUserSuccess:void 0,getUserFailure:void 0,login:void 0,loginSuccess:void 0,loginFailure:void 0,logout:void 0,logoutSuccess:void 0,logoutFailure:void 0}}),ee={getUser:St.getUser,getUserSuccess:St.getUserSuccess,getUserFailure:St.getUserFailure,login:St.login,loginSuccess:St.loginSuccess,loginFailure:St.loginFailure,logout:St.logout,logoutSuccess:St.logoutSuccess,logoutFailure:St.logoutFailure};var Gv=Symbol("DEVTOOLS_FEATURE");var Fy=new D("ReduxDevtoolsConfig"),Oy=(()=>{var t,e,a;let n=class n{constructor(){Xe(this,t,ne({}));Xe(this,e);Xe(this,a,Ot(()=>{if(U(this,e)===void 0)throw new Error("no callback function defined");let o=U(this,t).call(this),s=Object.entries(o).reduce((c,[d,l])=>P(k({},c),{[d]:Ya(l)}),{});U(this,e).call(this,s)}))}get stores(){return U(this,t).call(this)}track(o,s){U(this,t).update(c=>P(k({},c),{[o]:s}))}onChange(o){Jt(this,e,o)}removeStore(o){U(this,t).update(s=>Object.entries(s).reduce((c,[d,l])=>(d!==o&&(c[d]=l),c),{}))}notifyRenamedStore(o){U(this,t).call(this)[o]&&U(this,t).update(s=>k({},s))}};t=new WeakMap,e=new WeakMap,a=new WeakMap,n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=b({token:n,factory:n.\u0275fac,providedIn:"root"});let r=n;return r})(),sc=new Set,Hl={send:()=>{}},Nl=(()=>{var t,e,a,n,i,o,s;let c=class c{constructor(){Xe(this,t,{});Xe(this,e,ii(f(vt)));Xe(this,a,[]);Xe(this,n,k({name:"NgRx SignalStore"},f(Fy,{optional:!0})));Xe(this,i,{});Xe(this,o,1);Xe(this,s,f(Le).runOutsideAngular(()=>U(this,e)&&window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__.connect(U(this,n)):Hl));U(this,e)}ngOnDestroy(){sc.clear()}syncToDevTools(l){let h=Object.entries(l).reduce((y,[m,g])=>{let{options:v,name:C}=U(this,t)[m];return y[C]=v.map(g),y},{});Jt(this,i,k(k({},U(this,i)),h));let p=Array.from(sc),u=p.length?p.join(", "):"Store Update";sc.clear(),U(this,s).send({type:u},U(this,i))}getNextId(){return String(H1(this,o)._++)}addStore(l,h,p,u){let y=h,m=Object.values(U(this,t)).map(v=>v.name);if(m.includes(y)&&!u.indexNames)throw new Error(`An instance of the store ${y} already exists. Enable automatic indexing via withDevTools('${y}', { indexNames: true }), or rename it upon instantiation.`);for(let v=1;m.includes(y);v++)y=`${h}-${v}`;U(this,t)[l]={name:y,options:u};let g=u.tracker;U(this,a).includes(g)||U(this,a).push(g),g.onChange(v=>this.syncToDevTools(v)),g.track(l,p)}removeStore(l){let h=U(this,t)[l].name;Jt(this,t,Object.entries(U(this,t)).reduce((p,[u,y])=>(u!==l&&(p[u]=y),p),{})),Jt(this,i,Object.entries(U(this,i)).reduce((p,[u,y])=>(u!==h&&(p[u]=y),p),{}));for(let p of U(this,a))p.removeStore(l)}renameStore(l,h){let p=U(this,t)[l];if(!p)return;let u=p.name;if(u===h)return;if(Object.entries(U(this,t)).filter(([m])=>m!==l).map(([,m])=>m.name).includes(h))throw new Error(`NgRx Toolkit/DevTools: cannot rename from ${u} to ${h}. ${h} is already assigned to another SignalStore instance.`);Jt(this,t,Object.entries(U(this,t)).reduce((m,[g,v])=>(g===l?m[g]=P(k({},v),{name:h}):m[g]=v,m),{})),Jt(this,i,Object.entries(U(this,i)).reduce((m,[g,v])=>(g!==u&&(m[g]=v),m),{})),U(this,a).forEach(m=>m.notifyRenamedStore(l))}};t=new WeakMap,e=new WeakMap,a=new WeakMap,n=new WeakMap,i=new WeakMap,o=new WeakMap,s=new WeakMap,c.\u0275fac=function(h){return new(h||c)},c.\u0275prov=b({token:c,factory:c.\u0275fac,providedIn:"root"});let r=c;return r})(),jy="___renameDevtoolsName",cc="___uniqueDevtoolsId";function Ul(r,...t){return Qa(Ol(()=>{let e=f(Nl),a=e.getNextId();return{[jy]:n=>{e.renameStore(a,n)},[cc]:()=>a}}),pn(e=>{let a=f(Nl),n=String(e[cc]());return{onInit(){let i=String(e[cc]()),o={indexNames:!t.some(s=>s.indexNames===!1),map:t.find(s=>s.map)?.map??(s=>s),tracker:f(t.find(s=>s.tracker)?.tracker||Oy)};a.addStore(i,r,e,o)},onDestroy(){a.removeStore(n)}}}))}var Wv=Symbol("SYNC_STATUS");var Kv=Qa(Oi({}));var $l=r=>r?(...t)=>r(...t):(...t)=>fetch(...t);var yn=class extends Error{constructor(t,e="FunctionsError",a){super(t),this.name=e,this.context=a}},zi=class extends yn{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}},fn=class extends yn{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}},gn=class extends yn{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}},dc=(function(r){return r.Any="any",r.ApNortheast1="ap-northeast-1",r.ApNortheast2="ap-northeast-2",r.ApSouth1="ap-south-1",r.ApSoutheast1="ap-southeast-1",r.ApSoutheast2="ap-southeast-2",r.CaCentral1="ca-central-1",r.EuCentral1="eu-central-1",r.EuWest1="eu-west-1",r.EuWest2="eu-west-2",r.EuWest3="eu-west-3",r.SaEast1="sa-east-1",r.UsEast1="us-east-1",r.UsWest1="us-west-1",r.UsWest2="us-west-2",r})(dc||{});var mn=class{constructor(t,{headers:e={},customFetch:a,region:n=dc.Any}={}){this.url=t,this.headers=e,this.region=n,this.fetch=$l(a)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return _(this,arguments,void 0,function*(e,a={}){var n;let i,o;try{let{headers:s,method:c,body:d,signal:l,timeout:h}=a,p={},{region:u}=a;u||(u=this.region);let y=new URL(`${this.url}/${e}`);u&&u!=="any"&&(p["x-region"]=u,y.searchParams.set("forceFunctionRegion",u));let m;d&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)?typeof Blob<"u"&&d instanceof Blob||d instanceof ArrayBuffer?(p["Content-Type"]="application/octet-stream",m=d):typeof d=="string"?(p["Content-Type"]="text/plain",m=d):typeof FormData<"u"&&d instanceof FormData?m=d:(p["Content-Type"]="application/json",m=JSON.stringify(d)):m=d;let g=l;h&&(o=new AbortController,i=setTimeout(()=>o.abort(),h),l?(g=o.signal,l.addEventListener("abort",()=>o.abort())):g=o.signal);let v=yield this.fetch(y.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},p),this.headers),s),body:m,signal:g}).catch(E=>{throw new zi(E)}),C=v.headers.get("x-relay-error");if(C&&C==="true")throw new fn(v);if(!v.ok)throw new gn(v);let M=((n=v.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),w;return M==="application/json"?w=yield v.json():M==="application/octet-stream"||M==="application/pdf"?w=yield v.blob():M==="text/event-stream"?w=v:M==="multipart/form-data"?w=yield v.formData():w=yield v.text(),{data:w,error:null,response:v}}catch(s){return{data:null,error:s,response:s instanceof gn||s instanceof fn?s.context:void 0}}finally{i&&clearTimeout(i)}})}};var Ic=e2(Lh(),1),{PostgrestClient:Dh,PostgrestQueryBuilder:p3,PostgrestFilterBuilder:y3,PostgrestTransformBuilder:f3,PostgrestBuilder:g3,PostgrestError:Ky}=Ic.default||Ic;var Lc=class{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){let e=process.versions;if(e&&e.node){let a=e.node,n=parseInt(a.replace(/^v/,"").split(".")[0]);return n>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${n} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${n} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){let t=this.detectEnvironment();if(t.constructor)return t.constructor;let e=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(e+=`

Suggested solution: ${t.workaround}`),new Error(e)}static createWebSocket(t,e){let a=this.getWebSocketConstructor();return new a(t,e)}static isWebSocketSupported(){try{let t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}},Dc=Lc;var Ah="2.81.1";var Rh=`realtime-js/${Ah}`,Ac="1.0.0",Eh="2.0.0",Rc=Ac;var vn=1e4,Th=1e3,Ph=100,la=(function(r){return r[r.connecting=0]="connecting",r[r.open=1]="open",r[r.closing=2]="closing",r[r.closed=3]="closed",r})(la||{}),he=(function(r){return r.closed="closed",r.errored="errored",r.joined="joined",r.joining="joining",r.leaving="leaving",r})(he||{}),Fe=(function(r){return r.close="phx_close",r.error="phx_error",r.join="phx_join",r.reply="phx_reply",r.leave="phx_leave",r.access_token="access_token",r})(Fe||{}),Ec=(function(r){return r.websocket="websocket",r})(Ec||{}),ha=(function(r){return r.Connecting="connecting",r.Open="open",r.Closing="closing",r.Closed="closed",r})(ha||{});var Ui=class{constructor(){this.HEADER_LENGTH=1,this.META_LENGTH=4,this.USER_BROADCAST_PUSH_META_LENGTH=5,this.KINDS={push:0,reply:1,broadcast:2,userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST="broadcast"}encode(t,e){if(this._isArrayBuffer(t.payload))return e(this._binaryEncodePush(t));if(t.event===this.BROADCAST&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return e(this._binaryEncodeUserBroadcastPush(t));let a=[t.join_ref,t.ref,t.topic,t.event,t.payload];return e(JSON.stringify(a))}_binaryEncodePush(t){let{join_ref:e,ref:a,event:n,topic:i,payload:o}=t,s=this.META_LENGTH+e.length+a.length+i.length+n.length,c=new ArrayBuffer(this.HEADER_LENGTH+s),d=new DataView(c),l=0;d.setUint8(l++,this.KINDS.push),d.setUint8(l++,e.length),d.setUint8(l++,a.length),d.setUint8(l++,i.length),d.setUint8(l++,n.length),Array.from(e,p=>d.setUint8(l++,p.charCodeAt(0))),Array.from(a,p=>d.setUint8(l++,p.charCodeAt(0))),Array.from(i,p=>d.setUint8(l++,p.charCodeAt(0))),Array.from(n,p=>d.setUint8(l++,p.charCodeAt(0)));var h=new Uint8Array(c.byteLength+o.byteLength);return h.set(new Uint8Array(c),0),h.set(new Uint8Array(o),c.byteLength),h.buffer}_binaryEncodeUserBroadcastPush(t){var e;return this._isArrayBuffer((e=t.payload)===null||e===void 0?void 0:e.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var e,a;let{join_ref:n,ref:i,topic:o}=t,s=t.payload.event,c=(a=(e=t.payload)===null||e===void 0?void 0:e.payload)!==null&&a!==void 0?a:new ArrayBuffer(0),d=this.USER_BROADCAST_PUSH_META_LENGTH+n.length+i.length+o.length+s.length,l=new ArrayBuffer(this.HEADER_LENGTH+d),h=new DataView(l),p=0;h.setUint8(p++,this.KINDS.userBroadcastPush),h.setUint8(p++,n.length),h.setUint8(p++,i.length),h.setUint8(p++,o.length),h.setUint8(p++,s.length),h.setUint8(p++,this.BINARY_ENCODING),Array.from(n,y=>h.setUint8(p++,y.charCodeAt(0))),Array.from(i,y=>h.setUint8(p++,y.charCodeAt(0))),Array.from(o,y=>h.setUint8(p++,y.charCodeAt(0))),Array.from(s,y=>h.setUint8(p++,y.charCodeAt(0)));var u=new Uint8Array(l.byteLength+c.byteLength);return u.set(new Uint8Array(l),0),u.set(new Uint8Array(c),l.byteLength),u.buffer}_encodeJsonUserBroadcastPush(t){var e,a;let{join_ref:n,ref:i,topic:o}=t,s=t.payload.event,c=(a=(e=t.payload)===null||e===void 0?void 0:e.payload)!==null&&a!==void 0?a:{},l=new TextEncoder().encode(JSON.stringify(c)).buffer,h=this.USER_BROADCAST_PUSH_META_LENGTH+n.length+i.length+o.length+s.length,p=new ArrayBuffer(this.HEADER_LENGTH+h),u=new DataView(p),y=0;u.setUint8(y++,this.KINDS.userBroadcastPush),u.setUint8(y++,n.length),u.setUint8(y++,i.length),u.setUint8(y++,o.length),u.setUint8(y++,s.length),u.setUint8(y++,this.JSON_ENCODING),Array.from(n,g=>u.setUint8(y++,g.charCodeAt(0))),Array.from(i,g=>u.setUint8(y++,g.charCodeAt(0))),Array.from(o,g=>u.setUint8(y++,g.charCodeAt(0))),Array.from(s,g=>u.setUint8(y++,g.charCodeAt(0)));var m=new Uint8Array(p.byteLength+l.byteLength);return m.set(new Uint8Array(p),0),m.set(new Uint8Array(l),p.byteLength),m.buffer}decode(t,e){if(this._isArrayBuffer(t)){let a=this._binaryDecode(t);return e(a)}if(typeof t=="string"){let a=JSON.parse(t),[n,i,o,s,c]=a;return e({join_ref:n,ref:i,topic:o,event:s,payload:c})}return e({})}_binaryDecode(t){let e=new DataView(t),a=e.getUint8(0),n=new TextDecoder;switch(a){case this.KINDS.push:return this._decodePush(t,e,n);case this.KINDS.reply:return this._decodeReply(t,e,n);case this.KINDS.broadcast:return this._decodeBroadcast(t,e,n);case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,e,n)}}_decodePush(t,e,a){let n=e.getUint8(1),i=e.getUint8(2),o=e.getUint8(3),s=this.HEADER_LENGTH+this.META_LENGTH-1,c=a.decode(t.slice(s,s+n));s=s+n;let d=a.decode(t.slice(s,s+i));s=s+i;let l=a.decode(t.slice(s,s+o));s=s+o;let h=JSON.parse(a.decode(t.slice(s,t.byteLength)));return{join_ref:c,ref:null,topic:d,event:l,payload:h}}_decodeReply(t,e,a){let n=e.getUint8(1),i=e.getUint8(2),o=e.getUint8(3),s=e.getUint8(4),c=this.HEADER_LENGTH+this.META_LENGTH,d=a.decode(t.slice(c,c+n));c=c+n;let l=a.decode(t.slice(c,c+i));c=c+i;let h=a.decode(t.slice(c,c+o));c=c+o;let p=a.decode(t.slice(c,c+s));c=c+s;let u=JSON.parse(a.decode(t.slice(c,t.byteLength))),y={status:p,response:u};return{join_ref:d,ref:l,topic:h,event:Fe.reply,payload:y}}_decodeBroadcast(t,e,a){let n=e.getUint8(1),i=e.getUint8(2),o=this.HEADER_LENGTH+2,s=a.decode(t.slice(o,o+n));o=o+n;let c=a.decode(t.slice(o,o+i));o=o+i;let d=JSON.parse(a.decode(t.slice(o,t.byteLength)));return{join_ref:null,ref:null,topic:s,event:c,payload:d}}_decodeUserBroadcast(t,e,a){let n=e.getUint8(1),i=e.getUint8(2),o=e.getUint8(3),s=e.getUint8(4),c=this.HEADER_LENGTH+4,d=a.decode(t.slice(c,c+n));c=c+n;let l=a.decode(t.slice(c,c+i));c=c+i;let h=a.decode(t.slice(c,c+o));c=c+o;let p=t.slice(c,t.byteLength),u=s===this.JSON_ENCODING?JSON.parse(a.decode(p)):p,y={type:this.BROADCAST,event:l,payload:u};return o>0&&(y.meta=JSON.parse(h)),{join_ref:null,ref:null,topic:d,event:this.BROADCAST,payload:y}}_isArrayBuffer(t){var e;return t instanceof ArrayBuffer||((e=t?.constructor)===null||e===void 0?void 0:e.name)==="ArrayBuffer"}};var rr=class{constructor(t,e){this.callback=t,this.timerCalc=e,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=e}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var X=(function(r){return r.abstime="abstime",r.bool="bool",r.date="date",r.daterange="daterange",r.float4="float4",r.float8="float8",r.int2="int2",r.int4="int4",r.int4range="int4range",r.int8="int8",r.int8range="int8range",r.json="json",r.jsonb="jsonb",r.money="money",r.numeric="numeric",r.oid="oid",r.reltime="reltime",r.text="text",r.time="time",r.timestamp="timestamp",r.timestamptz="timestamptz",r.timetz="timetz",r.tsrange="tsrange",r.tstzrange="tstzrange",r})(X||{}),Pc=(r,t,e={})=>{var a;let n=(a=e.skipTypes)!==null&&a!==void 0?a:[];return t?Object.keys(t).reduce((i,o)=>(i[o]=Zy(o,r,t,n),i),{}):{}},Zy=(r,t,e,a)=>{let n=t.find(s=>s.name===r),i=n?.type,o=e[r];return i&&!a.includes(i)?Fh(i,o):Tc(o)},Fh=(r,t)=>{if(r.charAt(0)==="_"){let e=r.slice(1,r.length);return Qy(t,e)}switch(r){case X.bool:return Xy(t);case X.float4:case X.float8:case X.int2:case X.int4:case X.int8:case X.numeric:case X.oid:return Jy(t);case X.json:case X.jsonb:return Yy(t);case X.timestamp:return ef(t);case X.abstime:case X.date:case X.daterange:case X.int4range:case X.int8range:case X.money:case X.reltime:case X.text:case X.time:case X.timestamptz:case X.timetz:case X.tsrange:case X.tstzrange:return Tc(t);default:return Tc(t)}},Tc=r=>r,Xy=r=>{switch(r){case"t":return!0;case"f":return!1;default:return r}},Jy=r=>{if(typeof r=="string"){let t=parseFloat(r);if(!Number.isNaN(t))return t}return r},Yy=r=>{if(typeof r=="string")try{return JSON.parse(r)}catch(t){return console.log(`JSON parse error: ${t}`),r}return r},Qy=(r,t)=>{if(typeof r!="string")return r;let e=r.length-1,a=r[e];if(r[0]==="{"&&a==="}"){let i,o=r.slice(1,e);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(s=>Fh(t,s))}return r},ef=r=>typeof r=="string"?r.replace(" ","T"):r,$i=r=>{let t=new URL(r);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};var nr=class{constructor(t,e,a={},n=vn){this.channel=t,this.event=e,this.payload=a,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,e){var a;return this._hasReceived(t)&&e((a=this.receivedResp)===null||a===void 0?void 0:a.response),this.recHooks.push({status:t,callback:e}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);let t=e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,e){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:e})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:e}){this.recHooks.filter(a=>a.status===t).forEach(a=>a.callback(e))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}};var Mn=class r{constructor(t,e){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};let a=e?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(a.state,{},n=>{let{onJoin:i,onLeave:o,onSync:s}=this.caller;this.joinRef=this.channel._joinRef(),this.state=r.syncState(this.state,n,i,o),this.pendingDiffs.forEach(c=>{this.state=r.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],s()}),this.channel._on(a.diff,{},n=>{let{onJoin:i,onLeave:o,onSync:s}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=r.syncDiff(this.state,n,i,o),s())}),this.onJoin((n,i,o)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:i,newPresences:o})}),this.onLeave((n,i,o)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,e,a,n){let i=this.cloneDeep(t),o=this.transformState(e),s={},c={};return this.map(i,(d,l)=>{o[d]||(c[d]=l)}),this.map(o,(d,l)=>{let h=i[d];if(h){let p=l.map(g=>g.presence_ref),u=h.map(g=>g.presence_ref),y=l.filter(g=>u.indexOf(g.presence_ref)<0),m=h.filter(g=>p.indexOf(g.presence_ref)<0);y.length>0&&(s[d]=y),m.length>0&&(c[d]=m)}else s[d]=l}),this.syncDiff(i,{joins:s,leaves:c},a,n)}static syncDiff(t,e,a,n){let{joins:i,leaves:o}={joins:this.transformState(e.joins),leaves:this.transformState(e.leaves)};return a||(a=()=>{}),n||(n=()=>{}),this.map(i,(s,c)=>{var d;let l=(d=t[s])!==null&&d!==void 0?d:[];if(t[s]=this.cloneDeep(c),l.length>0){let h=t[s].map(u=>u.presence_ref),p=l.filter(u=>h.indexOf(u.presence_ref)<0);t[s].unshift(...p)}a(s,l,c)}),this.map(o,(s,c)=>{let d=t[s];if(!d)return;let l=c.map(h=>h.presence_ref);d=d.filter(h=>l.indexOf(h.presence_ref)<0),t[s]=d,n(s,d,c),d.length===0&&delete t[s]}),t}static map(t,e){return Object.getOwnPropertyNames(t).map(a=>e(a,t[a]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((e,a)=>{let n=t[a];return"metas"in n?e[a]=n.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):e[a]=n,e},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var wn=(function(r){return r.BROADCAST="broadcast",r.PRESENCE="presence",r.POSTGRES_CHANGES="postgres_changes",r.SYSTEM="system",r})(wn||{}),xt=(function(r){return r.SUBSCRIBED="SUBSCRIBED",r.TIMED_OUT="TIMED_OUT",r.CLOSED="CLOSED",r.CHANNEL_ERROR="CHANNEL_ERROR",r})(xt||{});var Cn=class r{constructor(t,e={config:{}},a){var n,i;if(this.topic=t,this.params=e,this.socket=a,this.bindings={},this.state=he.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},e.config),this.timeout=this.socket.timeout,this.joinPush=new nr(this,Fe.join,this.params,this.timeout),this.rejoinTimer=new rr(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=he.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=he.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=he.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=he.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=he.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Fe.reply,{},(o,s)=>{this._trigger(this._replyEventName(s),o)}),this.presence=new Mn(this),this.broadcastEndpointURL=$i(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(n=this.params.config)===null||n===void 0?void 0:n.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,e=this.timeout){var a,n,i;if(this.socket.isConnected()||this.socket.connect(),this.state==he.closed){let{config:{broadcast:o,presence:s,private:c}}=this.params,d=(n=(a=this.bindings.postgres_changes)===null||a===void 0?void 0:a.map(u=>u.filter))!==null&&n!==void 0?n:[],l=!!this.bindings[wn.PRESENCE]&&this.bindings[wn.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,h={},p={broadcast:o,presence:Object.assign(Object.assign({},s),{enabled:l}),postgres_changes:d,private:c};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(u=>t?.(xt.CHANNEL_ERROR,u)),this._onClose(()=>t?.(xt.CLOSED)),this.updateJoinPayload(Object.assign({config:p},h)),this.joinedOnce=!0,this._rejoin(e),this.joinPush.receive("ok",async({postgres_changes:u})=>{var y;if(this.socket.setAuth(),u===void 0){t?.(xt.SUBSCRIBED);return}else{let m=this.bindings.postgres_changes,g=(y=m?.length)!==null&&y!==void 0?y:0,v=[];for(let C=0;C<g;C++){let M=m[C],{filter:{event:w,schema:E,table:pe,filter:K}}=M,J=u&&u[C];if(J&&J.event===w&&J.schema===E&&J.table===pe&&J.filter===K)v.push(Object.assign(Object.assign({},M),{id:J.id}));else{this.unsubscribe(),this.state=he.errored,t?.(xt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=v,t&&t(xt.SUBSCRIBED);return}}).receive("error",u=>{this.state=he.errored,t?.(xt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{t?.(xt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,e={}){return await this.send({type:"presence",event:"track",payload:t},e.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,e,a){return this.state===he.joined&&t===wn.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,e,a)}async httpSend(t,e,a={}){var n;let i=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(e==null)return Promise.reject("Payload is required for httpSend()");let o={method:"POST",headers:{Authorization:i,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:e,private:this.private}]})},s=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(n=a.timeout)!==null&&n!==void 0?n:this.timeout);if(s.status===202)return{success:!0};let c=s.statusText;try{let d=await s.json();c=d.error||d.message||c}catch{}return Promise.reject(new Error(c))}async send(t,e={}){var a,n;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");let{event:i,payload:o}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{let d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(a=e.timeout)!==null&&a!==void 0?a:this.timeout);return await((n=d.body)===null||n===void 0?void 0:n.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,s,c;let d=this._push(t.type,t,e.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(s=(o=this.params)===null||o===void 0?void 0:o.config)===null||s===void 0?void 0:s.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),d.receive("ok",()=>i("ok")),d.receive("error",()=>i("error")),d.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=he.leaving;let e=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Fe.close,"leave",this._joinRef())};this.joinPush.destroy();let a=null;return new Promise(n=>{a=new nr(this,Fe.leave,{},t),a.receive("ok",()=>{e(),n("ok")}).receive("timeout",()=>{e(),n("timed out")}).receive("error",()=>{n("error")}),a.send(),this._canPush()||a.trigger("ok",{})}).finally(()=>{a?.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=he.closed,this.bindings={}}async _fetchWithTimeout(t,e,a){let n=new AbortController,i=setTimeout(()=>n.abort(),a),o=await this.socket.fetch(t,Object.assign(Object.assign({},e),{signal:n.signal}));return clearTimeout(i),o}_push(t,e,a=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new nr(this,t,e,a);return this._canPush()?n.send():this._addToPushBuffer(n),n}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>Ph){let e=this.pushBuffer.shift();e&&(e.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${e.event}`,e.payload))}}_onMessage(t,e,a){return e}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,e,a){var n,i;let o=t.toLocaleLowerCase(),{close:s,error:c,leave:d,join:l}=Fe;if(a&&[s,c,d,l].indexOf(o)>=0&&a!==this._joinRef())return;let p=this._onMessage(o,e,a);if(e&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(u=>{var y,m,g;return((y=u.filter)===null||y===void 0?void 0:y.event)==="*"||((g=(m=u.filter)===null||m===void 0?void 0:m.event)===null||g===void 0?void 0:g.toLocaleLowerCase())===o}).map(u=>u.callback(p,a)):(i=this.bindings[o])===null||i===void 0||i.filter(u=>{var y,m,g,v,C,M;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in u){let w=u.id,E=(y=u.filter)===null||y===void 0?void 0:y.event;return w&&((m=e.ids)===null||m===void 0?void 0:m.includes(w))&&(E==="*"||E?.toLocaleLowerCase()===((g=e.data)===null||g===void 0?void 0:g.type.toLocaleLowerCase()))}else{let w=(C=(v=u?.filter)===null||v===void 0?void 0:v.event)===null||C===void 0?void 0:C.toLocaleLowerCase();return w==="*"||w===((M=e?.event)===null||M===void 0?void 0:M.toLocaleLowerCase())}else return u.type.toLocaleLowerCase()===o}).map(u=>{if(typeof p=="object"&&"ids"in p){let y=p.data,{schema:m,table:g,commit_timestamp:v,type:C,errors:M}=y;p=Object.assign(Object.assign({},{schema:m,table:g,commit_timestamp:v,eventType:C,new:{},old:{},errors:M}),this._getPayloadRecords(y))}u.callback(p,a)})}_isClosed(){return this.state===he.closed}_isJoined(){return this.state===he.joined}_isJoining(){return this.state===he.joining}_isLeaving(){return this.state===he.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,e,a){let n=t.toLocaleLowerCase(),i={type:n,filter:e,callback:a};return this.bindings[n]?this.bindings[n].push(i):this.bindings[n]=[i],this}_off(t,e){let a=t.toLocaleLowerCase();return this.bindings[a]&&(this.bindings[a]=this.bindings[a].filter(n=>{var i;return!(((i=n.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===a&&r.isEqual(n.filter,e))})),this}static isEqual(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(let a in t)if(t[a]!==e[a])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Fe.close,{},t)}_onError(t){this._on(Fe.error,{},e=>t(e))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=he.joining,this.joinPush.resend(t))}_getPayloadRecords(t){let e={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(e.new=Pc(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(e.old=Pc(t.columns,t.old_record)),e}};var Fc=()=>{},Gi={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},af=[1e3,2e3,5e3,1e4],rf=1e4,nf=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`,_n=class{constructor(t,e){var a;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=vn,this.transport=null,this.heartbeatIntervalMs=Gi.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Fc,this.ref=0,this.reconnectTimer=null,this.vsn=Rc,this.logger=Fc,this.conn=null,this.sendBuffer=[],this.serializer=new Ui,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=n=>n?(...i)=>n(...i):(...i)=>fetch(...i),!(!((a=e?.params)===null||a===void 0)&&a.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=e.params.apikey,this.endPoint=`${t}/${Ec.websocket}`,this.httpEndpoint=$i(t),this._initializeOptions(e),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(e?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Dc.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");let e=t.message;throw e.includes("Node.js")?new Error(`${e}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${e}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,e){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){let a=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(a),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,e??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){let e=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),e}async removeAllChannels(){let t=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,e,a){this.logger(t,e,a)}connectionState(){switch(this.conn&&this.conn.readyState){case la.connecting:return ha.Connecting;case la.open:return ha.Open;case la.closing:return ha.Closing;default:return ha.Closed}}isConnected(){return this.connectionState()===ha.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,e={config:{}}){let a=`realtime:${t}`,n=this.getChannels().find(i=>i.topic===a);if(n)return n;{let i=new Cn(`realtime:${t}`,e,this);return this.channels.push(i),i}}push(t){let{topic:e,event:a,payload:n,ref:i}=t,o=()=>{this.encode(t,s=>{var c;(c=this.conn)===null||c===void 0||c.send(s)})};this.log("push",`${e} ${a} (${i})`,n),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(e){this.log("error","error in heartbeat callback",e)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(e){this.log("error","error in heartbeat callback",e)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(Th,"heartbeat timeout"),setTimeout(()=>{var e;this.isConnected()||(e=this.reconnectTimer)===null||e===void 0||e.scheduleTimeout()},Gi.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(e){this.log("error","error in heartbeat callback",e)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let e=this.channels.find(a=>a.topic===t&&(a._isJoined()||a._isJoining()));e&&(this.log("transport",`leaving duplicate topic "${t}"`),e.unsubscribe())}_remove(t){this.channels=this.channels.filter(e=>e.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,e=>{if(e.topic==="phoenix"&&e.event==="phx_reply")try{this.heartbeatCallback(e.payload.status==="ok"?"ok":"error")}catch(d){this.log("error","error in heartbeat callback",d)}e.ref&&e.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);let{topic:a,event:n,payload:i,ref:o}=e,s=o?`(${o})`:"",c=i.status||"";this.log("receive",`${c} ${a} ${n} ${s}`.trim(),i),this.channels.filter(d=>d._isMember(a)).forEach(d=>d._trigger(n,i,o)),this._triggerStateCallbacks("message",e)})}_clearTimer(t){var e;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((e=this.reconnectTimer)===null||e===void 0||e.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){if(this.conn){if(this.conn.readyState===la.open||this.conn.readyState===la.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(e=>{this.log("error","error waiting for auth on connect",e),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");let t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{e.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var e;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(e=this.reconnectTimer)===null||e===void 0||e.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Fe.error))}_appendParams(t,e){if(Object.keys(e).length===0)return t;let a=t.match(/\?/)?"&":"?",n=new URLSearchParams(e);return`${t}${a}${n}`}_workerObjectUrl(t){let e;if(t)e=t;else{let a=new Blob([nf],{type:"application/javascript"});e=URL.createObjectURL(a)}return e}_setConnectionState(t,e=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=e)}async _performAuth(t=null){let e;t?e=t:this.accessToken?e=await this.accessToken():e=this.accessTokenValue,this.accessTokenValue!=e&&(this.accessTokenValue=e,this.channels.forEach(a=>{let n={access_token:e,version:Rh};e&&a.updateJoinPayload(n),a.joinedOnce&&a._isJoined()&&a._push(Fe.access_token,{access_token:e})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(e=>{this.log("error",`error setting auth in ${t}`,e)})}_triggerStateCallbacks(t,e){try{this.stateChangeCallbacks[t].forEach(a=>{try{a(e)}catch(n){this.log("error",`error in ${t} callback`,n)}})}catch(a){this.log("error",`error triggering ${t} callbacks`,a)}}_setupReconnectionTimer(){this.reconnectTimer=new rr(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Gi.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var e,a,n,i,o,s,c,d,l,h,p,u;switch(this.transport=(e=t?.transport)!==null&&e!==void 0?e:null,this.timeout=(a=t?.timeout)!==null&&a!==void 0?a:vn,this.heartbeatIntervalMs=(n=t?.heartbeatIntervalMs)!==null&&n!==void 0?n:Gi.HEARTBEAT_INTERVAL,this.worker=(i=t?.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=t?.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(s=t?.heartbeatCallback)!==null&&s!==void 0?s:Fc,this.vsn=(c=t?.vsn)!==null&&c!==void 0?c:Rc,t?.params&&(this.params=t.params),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(d=t?.reconnectAfterMs)!==null&&d!==void 0?d:y=>af[y-1]||rf,this.vsn){case Ac:this.encode=(l=t?.encode)!==null&&l!==void 0?l:(y,m)=>m(JSON.stringify(y)),this.decode=(h=t?.decode)!==null&&h!==void 0?h:(y,m)=>m(JSON.parse(y));break;case Eh:this.encode=(p=t?.encode)!==null&&p!==void 0?p:this.serializer.encode.bind(this.serializer),this.decode=(u=t?.decode)!==null&&u!==void 0?u:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t?.workerUrl}}};var ir=class extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}};function G(r){return typeof r=="object"&&r!==null&&"__isStorageError"in r}var Wi=class extends ir{constructor(t,e,a){super(t),this.name="StorageApiError",this.status=e,this.statusCode=a}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},ua=class extends ir{constructor(t,e){super(t),this.name="StorageUnknownError",this.originalError=e}};var or=r=>r?(...t)=>r(...t):(...t)=>fetch(...t),Oh=()=>Response,Ki=r=>{if(Array.isArray(r))return r.map(e=>Ki(e));if(typeof r=="function"||r!==Object(r))return r;let t={};return Object.entries(r).forEach(([e,a])=>{let n=e.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[n]=Ki(a)}),t},jh=r=>{if(typeof r!="object"||r===null)return!1;let t=Object.getPrototypeOf(r);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)};var Oc=r=>{var t;return r.msg||r.message||r.error_description||(typeof r.error=="string"?r.error:(t=r.error)===null||t===void 0?void 0:t.message)||JSON.stringify(r)},of=(r,t,e)=>_(void 0,void 0,void 0,function*(){let a=yield Oh();r instanceof a&&!e?.noResolveJson?r.json().then(n=>{let i=r.status||500,o=n?.statusCode||i+"";t(new Wi(Oc(n),i,o))}).catch(n=>{t(new ua(Oc(n),n))}):t(new ua(Oc(r),r))}),sf=(r,t,e,a)=>{let n={method:r,headers:t?.headers||{}};return r==="GET"||!a?n:(jh(a)?(n.headers=Object.assign({"Content-Type":"application/json"},t?.headers),n.body=JSON.stringify(a)):n.body=a,t?.duplex&&(n.duplex=t.duplex),Object.assign(Object.assign({},n),e))};function bn(r,t,e,a,n,i){return _(this,void 0,void 0,function*(){return new Promise((o,s)=>{r(e,sf(t,a,n,i)).then(c=>{if(!c.ok)throw c;return a?.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>of(c,s,a))})})}function Ht(r,t,e,a){return _(this,void 0,void 0,function*(){return bn(r,"GET",t,e,a)})}function Oe(r,t,e,a,n){return _(this,void 0,void 0,function*(){return bn(r,"POST",t,a,n,e)})}function Sn(r,t,e,a,n){return _(this,void 0,void 0,function*(){return bn(r,"PUT",t,a,n,e)})}function Vh(r,t,e,a){return _(this,void 0,void 0,function*(){return bn(r,"HEAD",t,Object.assign(Object.assign({},e),{noResolveJson:!0}),a)})}function sr(r,t,e,a,n){return _(this,void 0,void 0,function*(){return bn(r,"DELETE",t,a,n,e)})}var Zi=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}execute(){return _(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(G(t))return{data:null,error:t};throw t}})}};var zh,jc=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[zh]="BlobDownloadBuilder",this.promise=null}asStream(){return new Zi(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return _(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(G(t))return{data:null,error:t};throw t}})}};zh=Symbol.toStringTag;var qh=jc;var cf={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Bh={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1},Xi=class{constructor(t,e={},a,n){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.bucketId=a,this.fetch=or(n)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,e,a,n){return _(this,void 0,void 0,function*(){try{let i,o=Object.assign(Object.assign({},Bh),n),s=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)}),c=o.metadata;typeof Blob<"u"&&a instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",a)):typeof FormData<"u"&&a instanceof FormData?(i=a,i.has("cacheControl")||i.append("cacheControl",o.cacheControl),c&&!i.has("metadata")&&i.append("metadata",this.encodeMetadata(c))):(i=a,s["cache-control"]=`max-age=${o.cacheControl}`,s["content-type"]=o.contentType,c&&(s["x-metadata"]=this.toBase64(this.encodeMetadata(c))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!o.duplex&&(o.duplex="half")),n?.headers&&(s=Object.assign(Object.assign({},s),n.headers));let d=this._removeEmptyFolders(e),l=this._getFinalPath(d),h=yield(t=="PUT"?Sn:Oe)(this.fetch,`${this.url}/object/${l}`,i,Object.assign({headers:s},o?.duplex?{duplex:o.duplex}:{}));return{data:{path:d,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(G(i))return{data:null,error:i};throw i}})}upload(t,e,a){return _(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,e,a)})}uploadToSignedUrl(t,e,a,n){return _(this,void 0,void 0,function*(){let i=this._removeEmptyFolders(t),o=this._getFinalPath(i),s=new URL(this.url+`/object/upload/sign/${o}`);s.searchParams.set("token",e);try{let c,d=Object.assign({upsert:Bh.upsert},n),l=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&a instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",a)):typeof FormData<"u"&&a instanceof FormData?(c=a,c.append("cacheControl",d.cacheControl)):(c=a,l["cache-control"]=`max-age=${d.cacheControl}`,l["content-type"]=d.contentType);let h=yield Sn(this.fetch,s.toString(),c,{headers:l});return{data:{path:i,fullPath:h.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(G(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,e){return _(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t),n=Object.assign({},this.headers);e?.upsert&&(n["x-upsert"]="true");let i=yield Oe(this.fetch,`${this.url}/object/upload/sign/${a}`,{},{headers:n}),o=new URL(this.url+i.url),s=o.searchParams.get("token");if(!s)throw new ir("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:s},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(G(a))return{data:null,error:a};throw a}})}update(t,e,a){return _(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,e,a)})}move(t,e,a){return _(this,void 0,void 0,function*(){try{return{data:yield Oe(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:e,destinationBucket:a?.destinationBucket},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(G(n))return{data:null,error:n};throw n}})}copy(t,e,a){return _(this,void 0,void 0,function*(){try{return{data:{path:(yield Oe(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:e,destinationBucket:a?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(G(n))return{data:null,error:n};throw n}})}createSignedUrl(t,e,a){return _(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t),i=yield Oe(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:e},a?.transform?{transform:a.transform}:{}),{headers:this.headers}),o=a?.download?`&download=${a.download===!0?"":a.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(G(n))return{data:null,error:n};throw n}})}createSignedUrls(t,e,a){return _(this,void 0,void 0,function*(){try{let n=yield Oe(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:e,paths:t},{headers:this.headers}),i=a?.download?`&download=${a.download===!0?"":a.download}`:"";return{data:n.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(G(n))return{data:null,error:n};throw n}})}download(t,e){let n=typeof e?.transform<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString(e?.transform||{}),o=i?`?${i}`:"",s=this._getFinalPath(t),c=()=>Ht(this.fetch,`${this.url}/${n}/${s}${o}`,{headers:this.headers,noResolveJson:!0});return new qh(c,this.shouldThrowOnError)}info(t){return _(this,void 0,void 0,function*(){let e=this._getFinalPath(t);try{let a=yield Ht(this.fetch,`${this.url}/object/info/${e}`,{headers:this.headers});return{data:Ki(a),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(G(a))return{data:null,error:a};throw a}})}exists(t){return _(this,void 0,void 0,function*(){let e=this._getFinalPath(t);try{return yield Vh(this.fetch,`${this.url}/object/${e}`,{headers:this.headers}),{data:!0,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(G(a)&&a instanceof ua){let n=a.originalError;if([400,404].includes(n?.status))return{data:!1,error:a}}throw a}})}getPublicUrl(t,e){let a=this._getFinalPath(t),n=[],i=e?.download?`download=${e.download===!0?"":e.download}`:"";i!==""&&n.push(i);let s=typeof e?.transform<"u"?"render/image":"object",c=this.transformOptsToQueryString(e?.transform||{});c!==""&&n.push(c);let d=n.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${s}/public/${a}${d}`)}}}remove(t){return _(this,void 0,void 0,function*(){try{return{data:yield sr(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(G(e))return{data:null,error:e};throw e}})}list(t,e,a){return _(this,void 0,void 0,function*(){try{let n=Object.assign(Object.assign(Object.assign({},cf),e),{prefix:t||""});return{data:yield Oe(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},a),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(G(n))return{data:null,error:n};throw n}})}listV2(t,e){return _(this,void 0,void 0,function*(){try{let a=Object.assign({},t);return{data:yield Oe(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,a,{headers:this.headers},e),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(G(a))return{data:null,error:a};throw a}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){let e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};var Ji="2.81.1";var Yi={"X-Client-Info":`storage-js/${Ji}`};var Qi=class{constructor(t,e={},a,n){this.shouldThrowOnError=!1;let i=new URL(t);n?.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Yi),e),this.fetch=or(a)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(t){return _(this,void 0,void 0,function*(){try{let e=this.listBucketOptionsToQueryString(t);return{data:yield Ht(this.fetch,`${this.url}/bucket${e}`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(G(e))return{data:null,error:e};throw e}})}getBucket(t){return _(this,void 0,void 0,function*(){try{return{data:yield Ht(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(G(e))return{data:null,error:e};throw e}})}createBucket(t){return _(this,arguments,void 0,function*(e,a={public:!1}){try{return{data:yield Oe(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:a.type,public:a.public,file_size_limit:a.fileSizeLimit,allowed_mime_types:a.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(G(n))return{data:null,error:n};throw n}})}updateBucket(t,e){return _(this,void 0,void 0,function*(){try{return{data:yield Sn(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(G(a))return{data:null,error:a};throw a}})}emptyBucket(t){return _(this,void 0,void 0,function*(){try{return{data:yield Oe(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(G(e))return{data:null,error:e};throw e}})}deleteBucket(t){return _(this,void 0,void 0,function*(){try{return{data:yield sr(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(G(e))return{data:null,error:e};throw e}})}listBucketOptionsToQueryString(t){let e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}};var eo=class{constructor(t,e={},a){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Yi),e),this.fetch=or(a)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return _(this,void 0,void 0,function*(){try{return{data:yield Oe(this.fetch,`${this.url}/bucket`,{name:t},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(G(e))return{data:null,error:e};throw e}})}listBuckets(t){return _(this,void 0,void 0,function*(){try{let e=new URLSearchParams;t?.limit!==void 0&&e.set("limit",t.limit.toString()),t?.offset!==void 0&&e.set("offset",t.offset.toString()),t?.sortColumn&&e.set("sortColumn",t.sortColumn),t?.sortOrder&&e.set("sortOrder",t.sortOrder),t?.search&&e.set("search",t.search);let a=e.toString(),n=a?`${this.url}/bucket?${a}`:`${this.url}/bucket`;return{data:yield Ht(this.fetch,n,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(G(e))return{data:null,error:e};throw e}})}deleteBucket(t){return _(this,void 0,void 0,function*(){try{return{data:yield sr(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(G(e))return{data:null,error:e};throw e}})}};var cr={"X-Client-Info":`storage-js/${Ji}`,"Content-Type":"application/json"};var to=class extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function Se(r){return typeof r=="object"&&r!==null&&"__isStorageVectorsError"in r}var dr=class extends to{constructor(t,e,a){super(t),this.name="StorageVectorsApiError",this.status=e,this.statusCode=a}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},ao=class extends to{constructor(t,e){super(t),this.name="StorageVectorsUnknownError",this.originalError=e}};var lr=r=>r?(...t)=>r(...t):(...t)=>fetch(...t);var Hh=r=>{if(typeof r!="object"||r===null)return!1;let t=Object.getPrototypeOf(r);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)};var Nh=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),df=(r,t,e)=>_(void 0,void 0,void 0,function*(){if(r&&typeof r=="object"&&"status"in r&&"ok"in r&&typeof r.status=="number"&&!e?.noResolveJson){let n=r.status||500,i=r;if(typeof i.json=="function")i.json().then(o=>{let s=o?.statusCode||o?.code||n+"";t(new dr(Nh(o),n,s))}).catch(()=>{let o=n+"",s=i.statusText||`HTTP ${n} error`;t(new dr(s,n,o))});else{let o=n+"",s=i.statusText||`HTTP ${n} error`;t(new dr(s,n,o))}}else t(new ao(Nh(r),r))}),lf=(r,t,e,a)=>{let n={method:r,headers:t?.headers||{}};return r==="GET"||!a?n:(Hh(a)?(n.headers=Object.assign({"Content-Type":"application/json"},t?.headers),n.body=JSON.stringify(a)):n.body=a,Object.assign(Object.assign({},n),e))};function hf(r,t,e,a,n,i){return _(this,void 0,void 0,function*(){return new Promise((o,s)=>{r(e,lf(t,a,n,i)).then(c=>{if(!c.ok)throw c;if(a?.noResolveJson)return c;let d=c.headers.get("content-type");return!d||!d.includes("application/json")?{}:c.json()}).then(c=>o(c)).catch(c=>df(c,s,a))})})}function xe(r,t,e,a,n){return _(this,void 0,void 0,function*(){return hf(r,"POST",t,a,n,e)})}var ro=class{constructor(t,e={},a){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},cr),e),this.fetch=lr(a)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(t){return _(this,void 0,void 0,function*(){try{return{data:(yield xe(this.fetch,`${this.url}/CreateIndex`,t,{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Se(e))return{data:null,error:e};throw e}})}getIndex(t,e){return _(this,void 0,void 0,function*(){try{return{data:yield xe(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Se(a))return{data:null,error:a};throw a}})}listIndexes(t){return _(this,void 0,void 0,function*(){try{return{data:yield xe(this.fetch,`${this.url}/ListIndexes`,t,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Se(e))return{data:null,error:e};throw e}})}deleteIndex(t,e){return _(this,void 0,void 0,function*(){try{return{data:(yield xe(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:this.headers}))||{},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Se(a))return{data:null,error:a};throw a}})}};var no=class{constructor(t,e={},a){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},cr),e),this.fetch=lr(a)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(t){return _(this,void 0,void 0,function*(){try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield xe(this.fetch,`${this.url}/PutVectors`,t,{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Se(e))return{data:null,error:e};throw e}})}getVectors(t){return _(this,void 0,void 0,function*(){try{return{data:yield xe(this.fetch,`${this.url}/GetVectors`,t,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Se(e))return{data:null,error:e};throw e}})}listVectors(t){return _(this,void 0,void 0,function*(){try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:yield xe(this.fetch,`${this.url}/ListVectors`,t,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Se(e))return{data:null,error:e};throw e}})}queryVectors(t){return _(this,void 0,void 0,function*(){try{return{data:yield xe(this.fetch,`${this.url}/QueryVectors`,t,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Se(e))return{data:null,error:e};throw e}})}deleteVectors(t){return _(this,void 0,void 0,function*(){try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield xe(this.fetch,`${this.url}/DeleteVectors`,t,{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Se(e))return{data:null,error:e};throw e}})}};var io=class{constructor(t,e={},a){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},cr),e),this.fetch=lr(a)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return _(this,void 0,void 0,function*(){try{return{data:(yield xe(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Se(e))return{data:null,error:e};throw e}})}getBucket(t){return _(this,void 0,void 0,function*(){try{return{data:yield xe(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:t},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Se(e))return{data:null,error:e};throw e}})}listBuckets(){return _(this,arguments,void 0,function*(t={}){try{return{data:yield xe(this.fetch,`${this.url}/ListVectorBuckets`,t,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Se(e))return{data:null,error:e};throw e}})}deleteBucket(t){return _(this,void 0,void 0,function*(){try{return{data:(yield xe(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Se(e))return{data:null,error:e};throw e}})}};var xn=class extends io{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new oo(this.url,this.headers,t,this.fetch)}},oo=class extends ro{constructor(t,e,a,n){super(t,e,n),this.vectorBucketName=a}createIndex(t){let e=Object.create(null,{createIndex:{get:()=>super.createIndex}});return _(this,void 0,void 0,function*(){return e.createIndex.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){let t=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return _(this,arguments,void 0,function*(e={}){return t.listIndexes.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}getIndex(t){let e=Object.create(null,{getIndex:{get:()=>super.getIndex}});return _(this,void 0,void 0,function*(){return e.getIndex.call(this,this.vectorBucketName,t)})}deleteIndex(t){let e=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return _(this,void 0,void 0,function*(){return e.deleteIndex.call(this,this.vectorBucketName,t)})}index(t){return new so(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},so=class extends no{constructor(t,e,a,n,i){super(t,e,i),this.vectorBucketName=a,this.indexName=n}putVectors(t){let e=Object.create(null,{putVectors:{get:()=>super.putVectors}});return _(this,void 0,void 0,function*(){return e.putVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(t){let e=Object.create(null,{getVectors:{get:()=>super.getVectors}});return _(this,void 0,void 0,function*(){return e.getVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){let t=Object.create(null,{listVectors:{get:()=>super.listVectors}});return _(this,arguments,void 0,function*(e={}){return t.listVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(t){let e=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return _(this,void 0,void 0,function*(){return e.queryVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(t){let e=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return _(this,void 0,void 0,function*(){return e.deleteVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}};var In=class extends Qi{constructor(t,e={},a,n){super(t,e,a,n)}from(t){return new Xi(this.url,this.headers,t,this.fetch)}get vectors(){return new xn(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new eo(this.url+"/iceberg",this.headers,this.fetch)}};var Uh="2.81.1";var Ln="";typeof Deno<"u"?Ln="deno":typeof document<"u"?Ln="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ln="react-native":Ln="node";var uf={"X-Client-Info":`supabase-js-${Ln}/${Uh}`},$h={headers:uf},Gh={schema:"public"},Wh={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Kh={};var pf=r=>r?(...t)=>r(...t):(...t)=>fetch(...t),yf=()=>Headers,Zh=(r,t,e)=>{let a=pf(e),n=yf();return async(i,o)=>{var s;let c=(s=await t())!==null&&s!==void 0?s:r,d=new n(o?.headers);return d.has("apikey")||d.set("apikey",r),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),a(i,Object.assign(Object.assign({},o),{headers:d}))}};function ff(r){return r.endsWith("/")?r:r+"/"}function Xh(r,t){var e,a;let{db:n,auth:i,realtime:o,global:s}=r,{db:c,auth:d,realtime:l,global:h}=t,p={db:Object.assign(Object.assign({},c),n),auth:Object.assign(Object.assign({},d),i),realtime:Object.assign(Object.assign({},l),o),storage:{},global:Object.assign(Object.assign(Object.assign({},h),s),{headers:Object.assign(Object.assign({},(e=h?.headers)!==null&&e!==void 0?e:{}),(a=s?.headers)!==null&&a!==void 0?a:{})}),accessToken:async()=>""};return r.accessToken?p.accessToken=r.accessToken:delete p.accessToken,p}function Jh(r){let t=r?.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(ff(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var co="2.81.1";var pa=30*1e3,lo=3,ho=lo*pa,Yh="http://localhost:9999",Qh="supabase.auth.token";var eu={"X-Client-Info":`gotrue-js/${co}`};var Dn="X-Supabase-Api-Version",Vc={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},tu=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,au=600*1e3;var Nt=class extends Error{constructor(t,e,a){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=e,this.code=a}};function S(r){return typeof r=="object"&&r!==null&&"__isAuthError"in r}var uo=class extends Nt{constructor(t,e,a){super(t,e,a),this.name="AuthApiError",this.status=e,this.code=a}};function ru(r){return S(r)&&r.name==="AuthApiError"}var Ke=class extends Nt{constructor(t,e){super(t),this.name="AuthUnknownError",this.originalError=e}},ft=class extends Nt{constructor(t,e,a,n){super(t,a,n),this.name=e,this.status=a}},Ee=class extends ft{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}};function nu(r){return S(r)&&r.name==="AuthSessionMissingError"}var It=class extends ft{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}},ya=class extends ft{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}},fa=class extends ft{constructor(t,e=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=e}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}};function iu(r){return S(r)&&r.name==="AuthImplicitGrantRedirectError"}var An=class extends ft{constructor(t,e=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=e}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},hr=class extends ft{constructor(t,e){super(t,"AuthRetryableFetchError",e,void 0)}};function po(r){return S(r)&&r.name==="AuthRetryableFetchError"}var Rn=class extends ft{constructor(t,e,a){super(t,"AuthWeakPasswordError",e,"weak_password"),this.reasons=a}};var ga=class extends ft{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}};var yo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),ou=` 	
\r=`.split(""),gf=(()=>{let r=new Array(128);for(let t=0;t<r.length;t+=1)r[t]=-1;for(let t=0;t<ou.length;t+=1)r[ou[t].charCodeAt(0)]=-2;for(let t=0;t<yo.length;t+=1)r[yo[t].charCodeAt(0)]=t;return r})();function su(r,t,e){if(r!==null)for(t.queue=t.queue<<8|r,t.queuedBits+=8;t.queuedBits>=6;){let a=t.queue>>t.queuedBits-6&63;e(yo[a]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){let a=t.queue>>t.queuedBits-6&63;e(yo[a]),t.queuedBits-=6}}function cu(r,t,e){let a=gf[r];if(a>-1)for(t.queue=t.queue<<6|a,t.queuedBits+=6;t.queuedBits>=8;)e(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(a===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(r)}"`)}}function zc(r){let t=[],e=o=>{t.push(String.fromCodePoint(o))},a={utf8seq:0,codepoint:0},n={queue:0,queuedBits:0},i=o=>{vf(o,a,e)};for(let o=0;o<r.length;o+=1)cu(r.charCodeAt(o),n,i);return t.join("")}function mf(r,t){if(r<=127){t(r);return}else if(r<=2047){t(192|r>>6),t(128|r&63);return}else if(r<=65535){t(224|r>>12),t(128|r>>6&63),t(128|r&63);return}else if(r<=1114111){t(240|r>>18),t(128|r>>12&63),t(128|r>>6&63),t(128|r&63);return}throw new Error(`Unrecognized Unicode codepoint: ${r.toString(16)}`)}function kf(r,t){for(let e=0;e<r.length;e+=1){let a=r.charCodeAt(e);if(a>55295&&a<=56319){let n=(a-55296)*1024&65535;a=(r.charCodeAt(e+1)-56320&65535|n)+65536,e+=1}mf(a,t)}}function vf(r,t,e){if(t.utf8seq===0){if(r<=127){e(r);return}for(let a=1;a<6;a+=1)if((r>>7-a&1)===0){t.utf8seq=a;break}if(t.utf8seq===2)t.codepoint=r&31;else if(t.utf8seq===3)t.codepoint=r&15;else if(t.utf8seq===4)t.codepoint=r&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(r<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|r&63,t.utf8seq-=1,t.utf8seq===0&&e(t.codepoint)}}function Ut(r){let t=[],e={queue:0,queuedBits:0},a=n=>{t.push(n)};for(let n=0;n<r.length;n+=1)cu(r.charCodeAt(n),e,a);return new Uint8Array(t)}function du(r){let t=[];return kf(r,e=>t.push(e)),new Uint8Array(t)}function Lt(r){let t=[],e={queue:0,queuedBits:0},a=n=>{t.push(n)};return r.forEach(n=>su(n,e,a)),su(null,e,a),t.join("")}function lu(r){return Math.round(Date.now()/1e3)+r}function hu(){return Symbol("auth-callback")}var ue=()=>typeof window<"u"&&typeof document<"u",ma={tested:!1,writable:!1},fo=()=>{if(!ue())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ma.tested)return ma.writable;let r=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(r,r),globalThis.localStorage.removeItem(r),ma.tested=!0,ma.writable=!0}catch{ma.tested=!0,ma.writable=!1}return ma.writable};function uu(r){let t={},e=new URL(r);if(e.hash&&e.hash[0]==="#")try{new URLSearchParams(e.hash.substring(1)).forEach((n,i)=>{t[i]=n})}catch{}return e.searchParams.forEach((a,n)=>{t[n]=a}),t}var go=r=>r?(...t)=>r(...t):(...t)=>fetch(...t),pu=r=>typeof r=="object"&&r!==null&&"status"in r&&"ok"in r&&"json"in r&&typeof r.json=="function",ka=async(r,t,e)=>{await r.setItem(t,JSON.stringify(e))},$t=async(r,t)=>{let e=await r.getItem(t);if(!e)return null;try{return JSON.parse(e)}catch{return e}},Dt=async(r,t)=>{await r.removeItem(t)},En=class r{constructor(){this.promise=new r.promiseConstructor((t,e)=>{this.resolve=t,this.reject=e})}};En.promiseConstructor=Promise;function mo(r){let t=r.split(".");if(t.length!==3)throw new ga("Invalid JWT structure");for(let a=0;a<t.length;a++)if(!tu.test(t[a]))throw new ga("JWT not in base64url format");return{header:JSON.parse(zc(t[0])),payload:JSON.parse(zc(t[1])),signature:Ut(t[2]),raw:{header:t[0],payload:t[1]}}}async function yu(r){return await new Promise(t=>{setTimeout(()=>t(null),r)})}function fu(r,t){return new Promise((a,n)=>{(async()=>{for(let i=0;i<1/0;i++)try{let o=await r(i);if(!t(i,null,o)){a(o);return}}catch(o){if(!t(i,o)){n(o);return}}})()})}function Mf(r){return("0"+r.toString(16)).substr(-2)}function wf(){let t=new Uint32Array(56);if(typeof crypto>"u"){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",a=e.length,n="";for(let i=0;i<56;i++)n+=e.charAt(Math.floor(Math.random()*a));return n}return crypto.getRandomValues(t),Array.from(t,Mf).join("")}async function Cf(r){let e=new TextEncoder().encode(r),a=await crypto.subtle.digest("SHA-256",e),n=new Uint8Array(a);return Array.from(n).map(i=>String.fromCharCode(i)).join("")}async function _f(r){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),r;let e=await Cf(r);return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function va(r,t,e=!1){let a=wf(),n=a;e&&(n+="/PASSWORD_RECOVERY"),await ka(r,`${t}-code-verifier`,n);let i=await _f(a);return[i,a===i?"plain":"s256"]}var bf=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function gu(r){let t=r.headers.get(Dn);if(!t||!t.match(bf))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function mu(r){if(!r)throw new Error("Missing exp claim");let t=Math.floor(Date.now()/1e3);if(r<=t)throw new Error("JWT has expired")}function ku(r){switch(r){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var Sf=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ma(r){if(!Sf.test(r))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function ko(){let r={};return new Proxy(r,{get:(t,e)=>{if(e==="__isUserNotAvailableProxy")return!0;if(typeof e=="symbol"){let a=e.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${e}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,e)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${e}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,e)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${e}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function vu(r,t){return new Proxy(r,{get:(e,a,n)=>{if(a==="__isInsecureUserWarningProxy")return!0;if(typeof a=="symbol"){let i=a.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(e,a,n)}return!t.value&&typeof a=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(e,a,n)}})}function qc(r){return JSON.parse(JSON.stringify(r))}var wa=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),xf=[502,503,504];async function Mu(r){var t;if(!pu(r))throw new hr(wa(r),0);if(xf.includes(r.status))throw new hr(wa(r),r.status);let e;try{e=await r.json()}catch(i){throw new Ke(wa(i),i)}let a,n=gu(r);if(n&&n.getTime()>=Vc["2024-01-01"].timestamp&&typeof e=="object"&&e&&typeof e.code=="string"?a=e.code:typeof e=="object"&&e&&typeof e.error_code=="string"&&(a=e.error_code),a){if(a==="weak_password")throw new Rn(wa(e),r.status,((t=e.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(a==="session_not_found")throw new Ee}else if(typeof e=="object"&&e&&typeof e.weak_password=="object"&&e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new Rn(wa(e),r.status,e.weak_password.reasons);throw new uo(wa(e),r.status||500,a)}var If=(r,t,e,a)=>{let n={method:r,headers:t?.headers||{}};return r==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t?.headers),n.body=JSON.stringify(a),Object.assign(Object.assign({},n),e))};async function L(r,t,e,a){var n;let i=Object.assign({},a?.headers);i[Dn]||(i[Dn]=Vc["2024-01-01"].name),a?.jwt&&(i.Authorization=`Bearer ${a.jwt}`);let o=(n=a?.query)!==null&&n!==void 0?n:{};a?.redirectTo&&(o.redirect_to=a.redirectTo);let s=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await Lf(r,t,e+s,{headers:i,noResolveJson:a?.noResolveJson},{},a?.body);return a?.xform?a?.xform(c):{data:Object.assign({},c),error:null}}async function Lf(r,t,e,a,n,i){let o=If(t,a,n,i),s;try{s=await r(e,Object.assign({},o))}catch(c){throw console.error(c),new hr(wa(c),0)}if(s.ok||await Mu(s),a?.noResolveJson)return s;try{return await s.json()}catch(c){await Mu(c)}}function Ze(r){var t;let e=null;Df(r)&&(e=Object.assign({},r),r.expires_at||(e.expires_at=lu(r.expires_in)));let a=(t=r.user)!==null&&t!==void 0?t:r;return{data:{session:e,user:a},error:null}}function Bc(r){let t=Ze(r);return!t.error&&r.weak_password&&typeof r.weak_password=="object"&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.message&&typeof r.weak_password.message=="string"&&r.weak_password.reasons.reduce((e,a)=>e&&typeof a=="string",!0)&&(t.data.weak_password=r.weak_password),t}function gt(r){var t;return{data:{user:(t=r.user)!==null&&t!==void 0?t:r},error:null}}function wu(r){return{data:r,error:null}}function Cu(r){let{action_link:t,email_otp:e,hashed_token:a,redirect_to:n,verification_type:i}=r,o=Qt(r,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),s={action_link:t,email_otp:e,hashed_token:a,redirect_to:n,verification_type:i},c=Object.assign({},o);return{data:{properties:s,user:c},error:null}}function Hc(r){return r}function Df(r){return r.access_token&&r.refresh_token&&r.expires_in}var vo=["global","local","others"];var ur=class{constructor({url:t="",headers:e={},fetch:a}){this.url=t,this.headers=e,this.fetch=go(a),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,e=vo[0]){if(vo.indexOf(e)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${vo.join(", ")}`);try{return await L(this.fetch,"POST",`${this.url}/logout?scope=${e}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(a){if(S(a))return{data:null,error:a};throw a}}async inviteUserByEmail(t,e={}){try{return await L(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:e.data},headers:this.headers,redirectTo:e.redirectTo,xform:gt})}catch(a){if(S(a))return{data:{user:null},error:a};throw a}}async generateLink(t){try{let{options:e}=t,a=Qt(t,["options"]),n=Object.assign(Object.assign({},a),e);return"newEmail"in a&&(n.new_email=a?.newEmail,delete n.newEmail),await L(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:Cu,redirectTo:e?.redirectTo})}catch(e){if(S(e))return{data:{properties:null,user:null},error:e};throw e}}async createUser(t){try{return await L(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:gt})}catch(e){if(S(e))return{data:{user:null},error:e};throw e}}async listUsers(t){var e,a,n,i,o,s,c;try{let d={nextPage:null,lastPage:0,total:0},l=await L(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(a=(e=t?.page)===null||e===void 0?void 0:e.toString())!==null&&a!==void 0?a:"",per_page:(i=(n=t?.perPage)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:""},xform:Hc});if(l.error)throw l.error;let h=await l.json(),p=(o=l.headers.get("x-total-count"))!==null&&o!==void 0?o:0,u=(c=(s=l.headers.get("link"))===null||s===void 0?void 0:s.split(","))!==null&&c!==void 0?c:[];return u.length>0&&(u.forEach(y=>{let m=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),g=JSON.parse(y.split(";")[1].split("=")[1]);d[`${g}Page`]=m}),d.total=parseInt(p)),{data:Object.assign(Object.assign({},h),d),error:null}}catch(d){if(S(d))return{data:{users:[]},error:d};throw d}}async getUserById(t){Ma(t);try{return await L(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:gt})}catch(e){if(S(e))return{data:{user:null},error:e};throw e}}async updateUserById(t,e){Ma(t);try{return await L(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:e,headers:this.headers,xform:gt})}catch(a){if(S(a))return{data:{user:null},error:a};throw a}}async deleteUser(t,e=!1){Ma(t);try{return await L(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:e},xform:gt})}catch(a){if(S(a))return{data:{user:null},error:a};throw a}}async _listFactors(t){Ma(t.userId);try{let{data:e,error:a}=await L(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:e,error:a}}catch(e){if(S(e))return{data:null,error:e};throw e}}async _deleteFactor(t){Ma(t.userId),Ma(t.id);try{return{data:await L(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(e){if(S(e))return{data:null,error:e};throw e}}async _listOAuthClients(t){var e,a,n,i,o,s,c;try{let d={nextPage:null,lastPage:0,total:0},l=await L(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(a=(e=t?.page)===null||e===void 0?void 0:e.toString())!==null&&a!==void 0?a:"",per_page:(i=(n=t?.perPage)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:""},xform:Hc});if(l.error)throw l.error;let h=await l.json(),p=(o=l.headers.get("x-total-count"))!==null&&o!==void 0?o:0,u=(c=(s=l.headers.get("link"))===null||s===void 0?void 0:s.split(","))!==null&&c!==void 0?c:[];return u.length>0&&(u.forEach(y=>{let m=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),g=JSON.parse(y.split(";")[1].split("=")[1]);d[`${g}Page`]=m}),d.total=parseInt(p)),{data:Object.assign(Object.assign({},h),d),error:null}}catch(d){if(S(d))return{data:{clients:[]},error:d};throw d}}async _createOAuthClient(t){try{return await L(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:e=>({data:e,error:null})})}catch(e){if(S(e))return{data:null,error:e};throw e}}async _getOAuthClient(t){try{return await L(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:e=>({data:e,error:null})})}catch(e){if(S(e))return{data:null,error:e};throw e}}async _updateOAuthClient(t,e){try{return await L(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:e,headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if(S(a))return{data:null,error:a};throw a}}async _deleteOAuthClient(t){try{return await L(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(e){if(S(e))return{data:null,error:e};throw e}}async _regenerateOAuthClientSecret(t){try{return await L(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:e=>({data:e,error:null})})}catch(e){if(S(e))return{data:null,error:e};throw e}}};function Nc(r={}){return{getItem:t=>r[t]||null,setItem:(t,e)=>{r[t]=e},removeItem:t=>{delete r[t]}}}var Ca={debug:!!(globalThis&&fo()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")},Tn=class extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}},Mo=class extends Tn{};async function Uc(r,t,e){Ca.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",r,t);let a=new globalThis.AbortController;return t>0&&setTimeout(()=>{a.abort(),Ca.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",r)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(r,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:a.signal},async n=>{if(n){Ca.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",r,n.name);try{return await e()}finally{Ca.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",r,n.name)}}else{if(t===0)throw Ca.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",r),new Mo(`Acquiring an exclusive Navigator LockManager lock "${r}" immediately failed`);if(Ca.debug)try{let i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await e()}}))}function _u(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function $c(r){if(!/^0x[a-fA-F0-9]{40}$/.test(r))throw new Error(`@supabase/auth-js: Address "${r}" is invalid.`);return r.toLowerCase()}function bu(r){return parseInt(r,16)}function Su(r){let t=new TextEncoder().encode(r);return"0x"+Array.from(t,a=>a.toString(16).padStart(2,"0")).join("")}function xu(r){var t;let{chainId:e,domain:a,expirationTime:n,issuedAt:i=new Date,nonce:o,notBefore:s,requestId:c,resources:d,scheme:l,uri:h,version:p}=r;{if(!Number.isInteger(e))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${e}`);if(!a)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(p!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${p}`);if(!((t=r.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${r.statement}`)}let u=$c(r.address),y=l?`${l}://${a}`:a,m=r.statement?`${r.statement}
`:"",g=`${y} wants you to sign in with your Ethereum account:
${u}

${m}`,v=`URI: ${h}
Version: ${p}
Chain ID: ${e}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(n&&(v+=`
Expiration Time: ${n.toISOString()}`),s&&(v+=`
Not Before: ${s.toISOString()}`),c&&(v+=`
Request ID: ${c}`),d){let C=`
Resources:`;for(let M of d){if(!M||typeof M!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${M}`);C+=`
- ${M}`}v+=C}return`${g}
${v}`}var re=class extends Error{constructor({message:t,code:e,cause:a,name:n}){var i;super(t,{cause:a}),this.__isWebAuthnError=!0,this.name=(i=n??(a instanceof Error?a.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=e}},_a=class extends re{constructor(t,e){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e,message:t}),this.name="WebAuthnUnknownError",this.originalError=e}};function Iu({error:r,options:t}){var e,a,n;let{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(r.name==="AbortError"){if(t.signal instanceof AbortSignal)return new re({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:r})}else if(r.name==="ConstraintError"){if(((e=i.authenticatorSelection)===null||e===void 0?void 0:e.requireResidentKey)===!0)return new re({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:r});if(t.mediation==="conditional"&&((a=i.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new re({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:r});if(((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new re({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:r})}else{if(r.name==="InvalidStateError")return new re({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:r});if(r.name==="NotAllowedError")return new re({message:r.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r});if(r.name==="NotSupportedError")return i.pubKeyCredParams.filter(s=>s.type==="public-key").length===0?new re({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:r}):new re({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:r});if(r.name==="SecurityError"){let o=window.location.hostname;if(Gc(o)){if(i.rp.id!==o)return new re({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:r})}else return new re({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:r})}else if(r.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new re({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:r})}else if(r.name==="UnknownError")return new re({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:r})}return new re({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r})}function Lu({error:r,options:t}){let{publicKey:e}=t;if(!e)throw Error("options was missing required publicKey property");if(r.name==="AbortError"){if(t.signal instanceof AbortSignal)return new re({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:r})}else{if(r.name==="NotAllowedError")return new re({message:r.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r});if(r.name==="SecurityError"){let a=window.location.hostname;if(Gc(a)){if(e.rpId!==a)return new re({message:`The RP ID "${e.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:r})}else return new re({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:r})}else if(r.name==="UnknownError")return new re({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:r})}return new re({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r})}var Wc=class{createNewAbortSignal(){if(this.controller){let e=new Error("Cancelling existing WebAuthn API call for new one");e.name="AbortError",this.controller.abort(e)}let t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){let t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}},Af=new Wc;function Au(r){if(!r)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(r);let{challenge:t,user:e,excludeCredentials:a}=r,n=Qt(r,["challenge","user","excludeCredentials"]),i=Ut(t).buffer,o=Object.assign(Object.assign({},e),{id:Ut(e.id).buffer}),s=Object.assign(Object.assign({},n),{challenge:i,user:o});if(a&&a.length>0){s.excludeCredentials=new Array(a.length);for(let c=0;c<a.length;c++){let d=a[c];s.excludeCredentials[c]=Object.assign(Object.assign({},d),{id:Ut(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return s}function Ru(r){if(!r)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(r);let{challenge:t,allowCredentials:e}=r,a=Qt(r,["challenge","allowCredentials"]),n=Ut(t).buffer,i=Object.assign(Object.assign({},a),{challenge:n});if(e&&e.length>0){i.allowCredentials=new Array(e.length);for(let o=0;o<e.length;o++){let s=e[o];i.allowCredentials[o]=Object.assign(Object.assign({},s),{id:Ut(s.id).buffer,type:s.type||"public-key",transports:s.transports})}}return i}function Eu(r){var t;if("toJSON"in r&&typeof r.toJSON=="function")return r.toJSON();let e=r;return{id:r.id,rawId:r.id,response:{attestationObject:Lt(new Uint8Array(r.response.attestationObject)),clientDataJSON:Lt(new Uint8Array(r.response.clientDataJSON))},type:"public-key",clientExtensionResults:r.getClientExtensionResults(),authenticatorAttachment:(t=e.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function Tu(r){var t;if("toJSON"in r&&typeof r.toJSON=="function")return r.toJSON();let e=r,a=r.getClientExtensionResults(),n=r.response;return{id:r.id,rawId:r.id,response:{authenticatorData:Lt(new Uint8Array(n.authenticatorData)),clientDataJSON:Lt(new Uint8Array(n.clientDataJSON)),signature:Lt(new Uint8Array(n.signature)),userHandle:n.userHandle?Lt(new Uint8Array(n.userHandle)):void 0},type:"public-key",clientExtensionResults:a,authenticatorAttachment:(t=e.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function Gc(r){return r==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(r)}function Du(){var r,t;return!!(ue()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((r=navigator?.credentials)===null||r===void 0?void 0:r.create)=="function"&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.get)=="function")}async function Rf(r){try{let t=await navigator.credentials.create(r);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new _a("Browser returned unexpected credential type",t)}:{data:null,error:new _a("Empty credential response",t)}}catch(t){return{data:null,error:Iu({error:t,options:r})}}}async function Ef(r){try{let t=await navigator.credentials.get(r);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new _a("Browser returned unexpected credential type",t)}:{data:null,error:new _a("Empty credential response",t)}}catch(t){return{data:null,error:Lu({error:t,options:r})}}}var Tf={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Pf={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function wo(...r){let t=n=>n!==null&&typeof n=="object"&&!Array.isArray(n),e=n=>n instanceof ArrayBuffer||ArrayBuffer.isView(n),a={};for(let n of r)if(n)for(let i in n){let o=n[i];if(o!==void 0)if(Array.isArray(o))a[i]=o;else if(e(o))a[i]=o;else if(t(o)){let s=a[i];t(s)?a[i]=wo(s,o):a[i]=wo(o)}else a[i]=o}return a}function Ff(r,t){return wo(Tf,r,t||{})}function Of(r,t){return wo(Pf,r,t||{})}var Co=class{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:e,friendlyName:a,signal:n},i){try{let{data:o,error:s}=await this.client.mfa.challenge({factorId:t,webauthn:e});if(!o)return{data:null,error:s};let c=n??Af.createNewAbortSignal();if(o.webauthn.type==="create"){let{user:d}=o.webauthn.credential_options.publicKey;d.name||(d.name=`${d.id}:${a}`),d.displayName||(d.displayName=d.name)}switch(o.webauthn.type){case"create":{let d=Ff(o.webauthn.credential_options.publicKey,i?.create),{data:l,error:h}=await Rf({publicKey:d,signal:c});return l?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:l}},error:null}:{data:null,error:h}}case"request":{let d=Of(o.webauthn.credential_options.publicKey,i?.request),{data:l,error:h}=await Ef(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:d,signal:c}));return l?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:l}},error:null}:{data:null,error:h}}}}catch(o){return S(o)?{data:null,error:o}:{data:null,error:new Ke("Unexpected error in challenge",o)}}}async _verify({challengeId:t,factorId:e,webauthn:a}){return this.client.mfa.verify({factorId:e,challengeId:t,webauthn:a})}async _authenticate({factorId:t,webauthn:{rpId:e=typeof window<"u"?window.location.hostname:void 0,rpOrigins:a=typeof window<"u"?[window.location.origin]:void 0,signal:n}={}},i){if(!e)return{data:null,error:new Nt("rpId is required for WebAuthn authentication")};try{if(!Du())return{data:null,error:new Ke("Browser does not support WebAuthn",null)};let{data:o,error:s}=await this.challenge({factorId:t,webauthn:{rpId:e,rpOrigins:a},signal:n},{request:i});if(!o)return{data:null,error:s};let{webauthn:c}=o;return this._verify({factorId:t,challengeId:o.challengeId,webauthn:{type:c.type,rpId:e,rpOrigins:a,credential_response:c.credential_response}})}catch(o){return S(o)?{data:null,error:o}:{data:null,error:new Ke("Unexpected error in authenticate",o)}}}async _register({friendlyName:t,webauthn:{rpId:e=typeof window<"u"?window.location.hostname:void 0,rpOrigins:a=typeof window<"u"?[window.location.origin]:void 0,signal:n}={}},i){if(!e)return{data:null,error:new Nt("rpId is required for WebAuthn registration")};try{if(!Du())return{data:null,error:new Ke("Browser does not support WebAuthn",null)};let{data:o,error:s}=await this._enroll({friendlyName:t});if(!o)return await this.client.mfa.listFactors().then(l=>{var h;return(h=l.data)===null||h===void 0?void 0:h.all.find(p=>p.factor_type==="webauthn"&&p.friendly_name===t&&p.status!=="unverified")}).then(l=>l?this.client.mfa.unenroll({factorId:l?.id}):void 0),{data:null,error:s};let{data:c,error:d}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:e,rpOrigins:a},signal:n},{create:i});return c?this._verify({factorId:o.id,challengeId:c.challengeId,webauthn:{rpId:e,rpOrigins:a,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:d}}catch(o){return S(o)?{data:null,error:o}:{data:null,error:new Ke("Unexpected error in register",o)}}}};_u();var jf={url:Yh,storageKey:Qh,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:eu,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function Pu(r,t,e){return await e()}var pr={},Vf=(()=>{class r{get jwks(){var e,a;return(a=(e=pr[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&a!==void 0?a:{keys:[]}}set jwks(e){pr[this.storageKey]=Object.assign(Object.assign({},pr[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,a;return(a=(e=pr[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&a!==void 0?a:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){pr[this.storageKey]=Object.assign(Object.assign({},pr[this.storageKey]),{cachedAt:e})}constructor(e){var a,n,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;let o=Object.assign(Object.assign({},jf),e);if(this.storageKey=o.storageKey,this.instanceID=(a=r.nextInstanceID[this.storageKey])!==null&&a!==void 0?a:0,r.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.instanceID>0&&ue()){let s=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(s),this.logDebugMessages&&console.trace(s)}if(this.persistSession=o.persistSession,this.autoRefreshToken=o.autoRefreshToken,this.admin=new ur({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=go(o.fetch),this.lock=o.lock||Pu,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,this.throwOnError=o.throwOnError,o.lock?this.lock=o.lock:ue()&&(!((n=globalThis?.navigator)===null||n===void 0)&&n.locks)?this.lock=Uc:this.lock=Pu,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Co(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:fo()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Nc(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=Nc(this.memoryStorage)),ue()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${co}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let a={},n="none";if(ue()&&(a=uu(window.location.href),this._isImplicitGrantCallback(a)?n="implicit":await this._isPKCECallback(a)&&(n="pkce")),ue()&&this.detectSessionInUrl&&n!=="none"){let{data:i,error:o}=await this._getSessionFromURL(a,n);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),iu(o)){let d=(e=o.details)===null||e===void 0?void 0:e.code;if(d==="identity_already_exists"||d==="identity_not_found"||d==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}let{session:s,redirectType:c}=i;return this._debug("#_initialize()","detected session in URL",s,"redirect type",c),await this._saveSession(s),setTimeout(async()=>{c==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",s):await this._notifyAllSubscribers("SIGNED_IN",s)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(a){return S(a)?this._returnResult({error:a}):this._returnResult({error:new Ke("Unexpected error during initialization",a)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var a,n,i;try{let o=await L(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(a=e?.options)===null||a===void 0?void 0:a.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(i=e?.options)===null||i===void 0?void 0:i.captchaToken}},xform:Ze}),{data:s,error:c}=o;if(c||!s)return this._returnResult({data:{user:null,session:null},error:c});let d=s.session,l=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",d)),this._returnResult({data:{user:l,session:d},error:null})}catch(o){if(S(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signUp(e){var a,n,i;try{let o;if("email"in e){let{email:h,password:p,options:u}=e,y=null,m=null;this.flowType==="pkce"&&([y,m]=await va(this.storage,this.storageKey)),o=await L(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:u?.emailRedirectTo,body:{email:h,password:p,data:(a=u?.data)!==null&&a!==void 0?a:{},gotrue_meta_security:{captcha_token:u?.captchaToken},code_challenge:y,code_challenge_method:m},xform:Ze})}else if("phone"in e){let{phone:h,password:p,options:u}=e;o=await L(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:p,data:(n=u?.data)!==null&&n!==void 0?n:{},channel:(i=u?.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:u?.captchaToken}},xform:Ze})}else throw new ya("You must provide either an email or phone number and a password");let{data:s,error:c}=o;if(c||!s)return this._returnResult({data:{user:null,session:null},error:c});let d=s.session,l=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",d)),this._returnResult({data:{user:l,session:d},error:null})}catch(o){if(S(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithPassword(e){try{let a;if("email"in e){let{email:o,password:s,options:c}=e;a=await L(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:s,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:Bc})}else if("phone"in e){let{phone:o,password:s,options:c}=e;a=await L(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:s,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:Bc})}else throw new ya("You must provide either an email or phone number and a password");let{data:n,error:i}=a;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!n||!n.session||!n.user){let o=new It;return this._returnResult({data:{user:null,session:null},error:o})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:i})}catch(a){if(S(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithOAuth(e){var a,n,i,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){let{chain:a}=e;switch(a){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${a}"`)}}async signInWithEthereum(e){var a,n,i,o,s,c,d,l,h,p,u;let y,m;if("message"in e)y=e.message,m=e.signature;else{let{chain:g,wallet:v,statement:C,options:M}=e,w;if(ue())if(typeof v=="object")w=v;else{let mt=window;if("ethereum"in mt&&typeof mt.ethereum=="object"&&"request"in mt.ethereum&&typeof mt.ethereum.request=="function")w=mt.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!M?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=v}let E=new URL((a=M?.url)!==null&&a!==void 0?a:window.location.href),pe=await w.request({method:"eth_requestAccounts"}).then(mt=>mt).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!pe||pe.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");let K=$c(pe[0]),J=(n=M?.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!J){let mt=await w.request({method:"eth_chainId"});J=bu(mt)}let Q0={domain:E.host,address:K,statement:C,uri:E.href,version:"1",chainId:J,nonce:(i=M?.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(s=(o=M?.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&s!==void 0?s:new Date,expirationTime:(c=M?.signInWithEthereum)===null||c===void 0?void 0:c.expirationTime,notBefore:(d=M?.signInWithEthereum)===null||d===void 0?void 0:d.notBefore,requestId:(l=M?.signInWithEthereum)===null||l===void 0?void 0:l.requestId,resources:(h=M?.signInWithEthereum)===null||h===void 0?void 0:h.resources};y=xu(Q0),m=await w.request({method:"personal_sign",params:[Su(y),K]})}try{let{data:g,error:v}=await L(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:y,signature:m},!((p=e.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(u=e.options)===null||u===void 0?void 0:u.captchaToken}}:null),xform:Ze});if(v)throw v;if(!g||!g.session||!g.user){let C=new It;return this._returnResult({data:{user:null,session:null},error:C})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:Object.assign({},g),error:v})}catch(g){if(S(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}}async signInWithSolana(e){var a,n,i,o,s,c,d,l,h,p,u,y;let m,g;if("message"in e)m=e.message,g=e.signature;else{let{chain:v,wallet:C,statement:M,options:w}=e,E;if(ue())if(typeof C=="object")E=C;else{let K=window;if("solana"in K&&typeof K.solana=="object"&&("signIn"in K.solana&&typeof K.solana.signIn=="function"||"signMessage"in K.solana&&typeof K.solana.signMessage=="function"))E=K.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof C!="object"||!w?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");E=C}let pe=new URL((a=w?.url)!==null&&a!==void 0?a:window.location.href);if("signIn"in E&&E.signIn){let K=await E.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},w?.signInWithSolana),{version:"1",domain:pe.host,uri:pe.href}),M?{statement:M}:null)),J;if(Array.isArray(K)&&K[0]&&typeof K[0]=="object")J=K[0];else if(K&&typeof K=="object"&&"signedMessage"in K&&"signature"in K)J=K;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in J&&"signature"in J&&(typeof J.signedMessage=="string"||J.signedMessage instanceof Uint8Array)&&J.signature instanceof Uint8Array)m=typeof J.signedMessage=="string"?J.signedMessage:new TextDecoder().decode(J.signedMessage),g=J.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in E)||typeof E.signMessage!="function"||!("publicKey"in E)||typeof E!="object"||!E.publicKey||!("toBase58"in E.publicKey)||typeof E.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");m=[`${pe.host} wants you to sign in with your Solana account:`,E.publicKey.toBase58(),...M?["",M,""]:[""],"Version: 1",`URI: ${pe.href}`,`Issued At: ${(i=(n=w?.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((o=w?.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${w.signInWithSolana.notBefore}`]:[],...!((s=w?.signInWithSolana)===null||s===void 0)&&s.expirationTime?[`Expiration Time: ${w.signInWithSolana.expirationTime}`]:[],...!((c=w?.signInWithSolana)===null||c===void 0)&&c.chainId?[`Chain ID: ${w.signInWithSolana.chainId}`]:[],...!((d=w?.signInWithSolana)===null||d===void 0)&&d.nonce?[`Nonce: ${w.signInWithSolana.nonce}`]:[],...!((l=w?.signInWithSolana)===null||l===void 0)&&l.requestId?[`Request ID: ${w.signInWithSolana.requestId}`]:[],...!((p=(h=w?.signInWithSolana)===null||h===void 0?void 0:h.resources)===null||p===void 0)&&p.length?["Resources",...w.signInWithSolana.resources.map(J=>`- ${J}`)]:[]].join(`
`);let K=await E.signMessage(new TextEncoder().encode(m),"utf8");if(!K||!(K instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=K}}try{let{data:v,error:C}=await L(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:m,signature:Lt(g)},!((u=e.options)===null||u===void 0)&&u.captchaToken?{gotrue_meta_security:{captcha_token:(y=e.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:Ze});if(C)throw C;if(!v||!v.session||!v.user){let M=new It;return this._returnResult({data:{user:null,session:null},error:M})}return v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),this._returnResult({data:Object.assign({},v),error:C})}catch(v){if(S(v))return this._returnResult({data:{user:null,session:null},error:v});throw v}}async _exchangeCodeForSession(e){let a=await $t(this.storage,`${this.storageKey}-code-verifier`),[n,i]=(a??"").split("/");try{let{data:o,error:s}=await L(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:Ze});if(await Dt(this.storage,`${this.storageKey}-code-verifier`),s)throw s;if(!o||!o.session||!o.user){let c=new It;return this._returnResult({data:{user:null,session:null,redirectType:null},error:c})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign(Object.assign({},o),{redirectType:i??null}),error:s})}catch(o){if(S(o))return this._returnResult({data:{user:null,session:null,redirectType:null},error:o});throw o}}async signInWithIdToken(e){try{let{options:a,provider:n,token:i,access_token:o,nonce:s}=e,c=await L(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:i,access_token:o,nonce:s,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:Ze}),{data:d,error:l}=c;if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!d||!d.session||!d.user){let h=new It;return this._returnResult({data:{user:null,session:null},error:h})}return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),this._returnResult({data:d,error:l})}catch(a){if(S(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithOtp(e){var a,n,i,o,s;try{if("email"in e){let{email:c,options:d}=e,l=null,h=null;this.flowType==="pkce"&&([l,h]=await va(this.storage,this.storageKey));let{error:p}=await L(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:c,data:(a=d?.data)!==null&&a!==void 0?a:{},create_user:(n=d?.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:d?.captchaToken},code_challenge:l,code_challenge_method:h},redirectTo:d?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:p})}if("phone"in e){let{phone:c,options:d}=e,{data:l,error:h}=await L(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:c,data:(i=d?.data)!==null&&i!==void 0?i:{},create_user:(o=d?.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:d?.captchaToken},channel:(s=d?.channel)!==null&&s!==void 0?s:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:l?.message_id},error:h})}throw new ya("You must provide either an email or phone number.")}catch(c){if(S(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async verifyOtp(e){var a,n;try{let i,o;"options"in e&&(i=(a=e.options)===null||a===void 0?void 0:a.redirectTo,o=(n=e.options)===null||n===void 0?void 0:n.captchaToken);let{data:s,error:c}=await L(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:i,xform:Ze});if(c)throw c;if(!s)throw new Error("An error occurred on token verification.");let d=s.session,l=s.user;return d?.access_token&&(await this._saveSession(d),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",d)),this._returnResult({data:{user:l,session:d},error:null})}catch(i){if(S(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(e){var a,n,i,o,s;try{let c=null,d=null;this.flowType==="pkce"&&([c,d]=await va(this.storage,this.storageKey));let l=await L(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(a=e.options)===null||a===void 0?void 0:a.redirectTo)!==null&&n!==void 0?n:void 0}),!((i=e?.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:c,code_challenge_method:d}),headers:this.headers,xform:wu});return!((o=l.data)===null||o===void 0)&&o.url&&ue()&&!(!((s=e.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(l.data.url),this._returnResult(l)}catch(c){if(S(c))return this._returnResult({data:null,error:c});throw c}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{let{data:{session:a},error:n}=e;if(n)throw n;if(!a)throw new Ee;let{error:i}=await L(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:a.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(e){if(S(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{let a=`${this.url}/resend`;if("email"in e){let{email:n,type:i,options:o}=e,{error:s}=await L(this.fetch,"POST",a,{headers:this.headers,body:{email:n,type:i,gotrue_meta_security:{captcha_token:o?.captchaToken}},redirectTo:o?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:s})}else if("phone"in e){let{phone:n,type:i,options:o}=e,{data:s,error:c}=await L(this.fetch,"POST",a,{headers:this.headers,body:{phone:n,type:i,gotrue_meta_security:{captcha_token:o?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:s?.message_id},error:c})}throw new ya("You must provide either an email or phone number and a type")}catch(a){if(S(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async a=>a))}async _acquireLock(e,a){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){let n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await n,await a()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;let n=a();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){let i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{let a=await this.__loadSession();return await e(a)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null,a=await $t(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",a),a!==null&&(this._isValidSession(a)?e=a:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};let n=e.expires_at?e.expires_at*1e3-Date.now()<ho:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){let s=await $t(this.userStorage,this.storageKey+"-user");s?.user?e.user=s.user:e.user=ko()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){let s={value:this.suppressGetSessionWarning};e.user=vu(e.user,s),s.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}let{data:i,error:o}=await this._callRefreshToken(e.refresh_token);return o?this._returnResult({data:{session:null},error:o}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await L(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:gt}):await this._useSession(async a=>{var n,i,o;let{data:s,error:c}=a;if(c)throw c;return!(!((n=s.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ee}:await L(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(i=s.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0,xform:gt})})}catch(a){if(S(a))return nu(a)&&(await this._removeSession(),await Dt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:a});throw a}}async updateUser(e,a={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,a))}async _updateUser(e,a={}){try{return await this._useSession(async n=>{let{data:i,error:o}=n;if(o)throw o;if(!i.session)throw new Ee;let s=i.session,c=null,d=null;this.flowType==="pkce"&&e.email!=null&&([c,d]=await va(this.storage,this.storageKey));let{data:l,error:h}=await L(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:a?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:c,code_challenge_method:d}),jwt:s.access_token,xform:gt});if(h)throw h;return s.user=l.user,await this._saveSession(s),await this._notifyAllSubscribers("USER_UPDATED",s),this._returnResult({data:{user:s.user},error:null})})}catch(n){if(S(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Ee;let a=Date.now()/1e3,n=a,i=!0,o=null,{payload:s}=mo(e.access_token);if(s.exp&&(n=s.exp,i=n<=a),i){let{data:c,error:d}=await this._callRefreshToken(e.refresh_token);if(d)return this._returnResult({data:{user:null,session:null},error:d});if(!c)return{data:{user:null,session:null},error:null};o=c}else{let{data:c,error:d}=await this._getUser(e.access_token);if(d)throw d;o={access_token:e.access_token,refresh_token:e.refresh_token,user:c.user,token_type:"bearer",expires_in:n-a,expires_at:n},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return this._returnResult({data:{user:o.user,session:o},error:null})}catch(a){if(S(a))return this._returnResult({data:{session:null,user:null},error:a});throw a}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async a=>{var n;if(!e){let{data:s,error:c}=a;if(c)throw c;e=(n=s.session)!==null&&n!==void 0?n:void 0}if(!e?.refresh_token)throw new Ee;let{data:i,error:o}=await this._callRefreshToken(e.refresh_token);return o?this._returnResult({data:{user:null,session:null},error:o}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(a){if(S(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async _getSessionFromURL(e,a){try{if(!ue())throw new fa("No browser detected.");if(e.error||e.error_description||e.error_code)throw new fa(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(a){case"implicit":if(this.flowType==="pkce")throw new An("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new fa("Not a valid implicit grant flow url.");break;default:}if(a==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new An("No code detected.");let{data:M,error:w}=await this._exchangeCodeForSession(e.code);if(w)throw w;let E=new URL(window.location.href);return E.searchParams.delete("code"),window.history.replaceState(window.history.state,"",E.toString()),{data:{session:M.session,redirectType:null},error:null}}let{provider_token:n,provider_refresh_token:i,access_token:o,refresh_token:s,expires_in:c,expires_at:d,token_type:l}=e;if(!o||!c||!s||!l)throw new fa("No session defined in URL");let h=Math.round(Date.now()/1e3),p=parseInt(c),u=h+p;d&&(u=parseInt(d));let y=u-h;y*1e3<=pa&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${y}s, should have been closer to ${p}s`);let m=u-p;h-m>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",m,u,h):h-m<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",m,u,h);let{data:g,error:v}=await this._getUser(o);if(v)throw v;let C={provider_token:n,provider_refresh_token:i,access_token:o,expires_in:p,expires_at:u,refresh_token:s,token_type:l,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:C,redirectType:e.type},error:null})}catch(n){if(S(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){let a=await $t(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&a)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async a=>{var n;let{data:i,error:o}=a;if(o)return this._returnResult({error:o});let s=(n=i.session)===null||n===void 0?void 0:n.access_token;if(s){let{error:c}=await this.admin.signOut(s,e);if(c&&!(ru(c)&&(c.status===404||c.status===401||c.status===403)))return this._returnResult({error:c})}return e!=="others"&&(await this._removeSession(),await Dt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){let a=hu(),n={id:a,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",a),this.stateChangeEmitters.delete(a)}};return this._debug("#onAuthStateChange()","registered callback with id",a),this.stateChangeEmitters.set(a,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(a)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async a=>{var n,i;try{let{data:{session:o},error:s}=a;if(s)throw s;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,a={}){let n=null,i=null;this.flowType==="pkce"&&([n,i]=await va(this.storage,this.storageKey,!0));try{return await L(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:i,gotrue_meta_security:{captcha_token:a.captchaToken}},headers:this.headers,redirectTo:a.redirectTo})}catch(o){if(S(o))return this._returnResult({data:null,error:o});throw o}}async getUserIdentities(){var e;try{let{data:a,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(e=a.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(a){if(S(a))return this._returnResult({data:null,error:a});throw a}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var a;try{let{data:n,error:i}=await this._useSession(async o=>{var s,c,d,l,h;let{data:p,error:u}=o;if(u)throw u;let y=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(s=e.options)===null||s===void 0?void 0:s.redirectTo,scopes:(c=e.options)===null||c===void 0?void 0:c.scopes,queryParams:(d=e.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:!0});return await L(this.fetch,"GET",y,{headers:this.headers,jwt:(h=(l=p.session)===null||l===void 0?void 0:l.access_token)!==null&&h!==void 0?h:void 0})});if(i)throw i;return ue()&&!(!((a=e.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(n?.url),this._returnResult({data:{provider:e.provider,url:n?.url},error:null})}catch(n){if(S(n))return this._returnResult({data:{provider:e.provider,url:null},error:n});throw n}}async linkIdentityIdToken(e){return await this._useSession(async a=>{var n;try{let{error:i,data:{session:o}}=a;if(i)throw i;let{options:s,provider:c,token:d,access_token:l,nonce:h}=e,p=await L(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=o?.access_token)!==null&&n!==void 0?n:void 0,body:{provider:c,id_token:d,access_token:l,nonce:h,link_identity:!0,gotrue_meta_security:{captcha_token:s?.captchaToken}},xform:Ze}),{data:u,error:y}=p;return y?this._returnResult({data:{user:null,session:null},error:y}):!u||!u.session||!u.user?this._returnResult({data:{user:null,session:null},error:new It}):(u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("USER_UPDATED",u.session)),this._returnResult({data:u,error:y}))}catch(i){if(S(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(e){try{return await this._useSession(async a=>{var n,i;let{data:o,error:s}=a;if(s)throw s;return await L(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0})})}catch(a){if(S(a))return this._returnResult({data:null,error:a});throw a}}async _refreshAccessToken(e){let a=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{let n=Date.now();return await fu(async i=>(i>0&&await yu(200*Math.pow(2,i-1)),this._debug(a,"refreshing attempt",i),await L(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Ze})),(i,o)=>{let s=200*Math.pow(2,i);return o&&po(o)&&Date.now()+s-n<pa})}catch(n){if(this._debug(a,"error",n),S(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(a,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,a){let n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:a.redirectTo,scopes:a.scopes,queryParams:a.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",a,"url",n),ue()&&!a.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,a;let n="#_recoverAndRefresh()";this._debug(n,"begin");try{let i=await $t(this.storage,this.storageKey);if(i&&this.userStorage){let s=await $t(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!s&&(s={user:i.user},await ka(this.userStorage,this.storageKey+"-user",s)),i.user=(e=s?.user)!==null&&e!==void 0?e:ko()}else if(i&&!i.user&&!i.user){let s=await $t(this.storage,this.storageKey+"-user");s&&s?.user?(i.user=s.user,await Dt(this.storage,this.storageKey+"-user"),await ka(this.storage,this.storageKey,i)):i.user=ko()}if(this._debug(n,"session from storage",i),!this._isValidSession(i)){this._debug(n,"session is not valid"),i!==null&&await this._removeSession();return}let o=((a=i.expires_at)!==null&&a!==void 0?a:1/0)*1e3-Date.now()<ho;if(this._debug(n,`session has${o?"":" not"} expired with margin of ${ho}s`),o){if(this.autoRefreshToken&&i.refresh_token){let{error:s}=await this._callRefreshToken(i.refresh_token);s&&(console.error(s),po(s)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",s),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{let{data:s,error:c}=await this._getUser(i.access_token);!c&&s?.user?(i.user=s.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(s){console.error("Error getting user data:",s),this._debug(n,"error getting user data, skipping SIGNED_IN notification",s)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(n,"error",i),console.error(i);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var a,n;if(!e)throw new Ee;if(this.refreshingDeferred)return this.refreshingDeferred.promise;let i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new En;let{data:o,error:s}=await this._refreshAccessToken(e);if(s)throw s;if(!o.session)throw new Ee;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);let c={data:o.session,error:null};return this.refreshingDeferred.resolve(c),c}catch(o){if(this._debug(i,"error",o),S(o)){let s={data:null,error:o};return po(o)||await this._removeSession(),(a=this.refreshingDeferred)===null||a===void 0||a.resolve(s),s}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(o),o}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,a,n=!0){let i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",a,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:a});let o=[],s=Array.from(this.stateChangeEmitters.values()).map(async c=>{try{await c.callback(e,a)}catch(d){o.push(d)}});if(await Promise.all(s),o.length>0){for(let c=0;c<o.length;c+=1)console.error(o[c]);throw o[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;let a=Object.assign({},e),n=a.user&&a.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&a.user&&await ka(this.userStorage,this.storageKey+"-user",{user:a.user});let i=Object.assign({},a);delete i.user;let o=qc(i);await ka(this.storage,this.storageKey,o)}else{let i=qc(a);await ka(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await Dt(this.storage,this.storageKey),await Dt(this.storage,this.storageKey+"-code-verifier"),await Dt(this.storage,this.storageKey+"-user"),this.userStorage&&await Dt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");let e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&ue()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(a){console.error("removing visibilitychange callback failed",a)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");let e=setInterval(()=>this._autoRefreshTokenTick(),pa);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");let e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{let e=Date.now();try{return await this._useSession(async a=>{let{data:{session:n}}=a;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}let i=Math.floor((n.expires_at*1e3-e)/pa);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${pa}ms, refresh threshold is ${lo} ticks`),i<=lo&&await this._callRefreshToken(n.refresh_token)})}catch(a){console.error("Auto refresh tick failed with error. This is likely a transient error.",a)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Tn)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ue()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){let a=`#_onVisibilityChanged(${e})`;this._debug(a,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(a,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,a,n){let i=[`provider=${encodeURIComponent(a)}`];if(n?.redirectTo&&i.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n?.scopes&&i.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){let[o,s]=await va(this.storage,this.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(s)}`});i.push(c.toString())}if(n?.queryParams){let o=new URLSearchParams(n.queryParams);i.push(o.toString())}return n?.skipBrowserRedirect&&i.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async a=>{var n;let{data:i,error:o}=a;return o?this._returnResult({data:null,error:o}):await L(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=i?.session)===null||n===void 0?void 0:n.access_token})})}catch(a){if(S(a))return this._returnResult({data:null,error:a});throw a}}async _enroll(e){try{return await this._useSession(async a=>{var n,i;let{data:o,error:s}=a;if(s)return this._returnResult({data:null,error:s});let c=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:d,error:l}=await L(this.fetch,"POST",`${this.url}/factors`,{body:c,headers:this.headers,jwt:(n=o?.session)===null||n===void 0?void 0:n.access_token});return l?this._returnResult({data:null,error:l}):(e.factorType==="totp"&&d.type==="totp"&&(!((i=d?.totp)===null||i===void 0)&&i.qr_code)&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),this._returnResult({data:d,error:null}))})}catch(a){if(S(a))return this._returnResult({data:null,error:a});throw a}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async a=>{var n;let{data:i,error:o}=a;if(o)return this._returnResult({data:null,error:o});let s=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?Eu(e.webauthn.credential_response):Tu(e.webauthn.credential_response)})}:{code:e.code}),{data:c,error:d}=await L(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:s,headers:this.headers,jwt:(n=i?.session)===null||n===void 0?void 0:n.access_token});return d?this._returnResult({data:null,error:d}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+c.expires_in},c)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",c),this._returnResult({data:c,error:d}))})}catch(a){if(S(a))return this._returnResult({data:null,error:a});throw a}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async a=>{var n;let{data:i,error:o}=a;if(o)return this._returnResult({data:null,error:o});let s=await L(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(n=i?.session)===null||n===void 0?void 0:n.access_token});if(s.error)return s;let{data:c}=s;if(c.type!=="webauthn")return{data:c,error:null};switch(c.webauthn.type){case"create":return{data:Object.assign(Object.assign({},c),{webauthn:Object.assign(Object.assign({},c.webauthn),{credential_options:Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:Au(c.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},c),{webauthn:Object.assign(Object.assign({},c.webauthn),{credential_options:Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:Ru(c.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(a){if(S(a))return this._returnResult({data:null,error:a});throw a}})}async _challengeAndVerify(e){let{data:a,error:n}=await this._challenge({factorId:e.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:e.factorId,challengeId:a.id,code:e.code})}async _listFactors(){var e;let{data:{user:a},error:n}=await this.getUser();if(n)return{data:null,error:n};let i={all:[],phone:[],totp:[],webauthn:[]};for(let o of(e=a?.factors)!==null&&e!==void 0?e:[])i.all.push(o),o.status==="verified"&&i[o.factor_type].push(o);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){var e,a;let{data:{session:n},error:i}=await this.getSession();if(i)return this._returnResult({data:null,error:i});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};let{payload:o}=mo(n.access_token),s=null;o.aal&&(s=o.aal);let c=s;((a=(e=n.user.factors)===null||e===void 0?void 0:e.filter(h=>h.status==="verified"))!==null&&a!==void 0?a:[]).length>0&&(c="aal2");let l=o.amr||[];return{data:{currentLevel:s,nextLevel:c,currentAuthenticationMethods:l},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async a=>{let{data:{session:n},error:i}=a;return i?this._returnResult({data:null,error:i}):n?await L(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:n.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new Ee})})}catch(a){if(S(a))return this._returnResult({data:null,error:a});throw a}}async _approveAuthorization(e,a){try{return await this._useSession(async n=>{let{data:{session:i},error:o}=n;if(o)return this._returnResult({data:null,error:o});if(!i)return this._returnResult({data:null,error:new Ee});let s=await L(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:c=>({data:c,error:null})});return s.data&&s.data.redirect_url&&ue()&&!a?.skipBrowserRedirect&&window.location.assign(s.data.redirect_url),s})}catch(n){if(S(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(e,a){try{return await this._useSession(async n=>{let{data:{session:i},error:o}=n;if(o)return this._returnResult({data:null,error:o});if(!i)return this._returnResult({data:null,error:new Ee});let s=await L(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:c=>({data:c,error:null})});return s.data&&s.data.redirect_url&&ue()&&!a?.skipBrowserRedirect&&window.location.assign(s.data.redirect_url),s})}catch(n){if(S(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(e,a={keys:[]}){let n=a.keys.find(c=>c.kid===e);if(n)return n;let i=Date.now();if(n=this.jwks.keys.find(c=>c.kid===e),n&&this.jwks_cached_at+au>i)return n;let{data:o,error:s}=await L(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(s)throw s;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=i,n=o.keys.find(c=>c.kid===e),!n)?null:n}async getClaims(e,a={}){try{let n=e;if(!n){let{data:y,error:m}=await this.getSession();if(m||!y.session)return this._returnResult({data:null,error:m});n=y.session.access_token}let{header:i,payload:o,signature:s,raw:{header:c,payload:d}}=mo(n);a?.allowExpired||mu(o.exp);let l=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,a?.keys?{keys:a.keys}:a?.jwks);if(!l){let{error:y}=await this.getUser(n);if(y)throw y;return{data:{claims:o,header:i,signature:s},error:null}}let h=ku(i.alg),p=await crypto.subtle.importKey("jwk",l,h,!0,["verify"]);if(!await crypto.subtle.verify(h,p,s,du(`${c}.${d}`)))throw new ga("Invalid JWT signature");return{data:{claims:o,header:i,signature:s},error:null}}catch(n){if(S(n))return this._returnResult({data:null,error:n});throw n}}}return r.nextInstanceID={},r})(),Kc=Vf;var zf=Kc,Zc=zf;var _o=class extends Zc{constructor(t){super(t)}};var bo=class{constructor(t,e,a){var n,i,o;this.supabaseUrl=t,this.supabaseKey=e;let s=Jh(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",s),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",s),this.storageUrl=new URL("storage/v1",s),this.functionsUrl=new URL("functions/v1",s);let c=`sb-${s.hostname.split(".")[0]}-auth-token`,d={db:Gh,realtime:Kh,auth:Object.assign(Object.assign({},Wh),{storageKey:c}),global:$h},l=Xh(a??{},d);this.storageKey=(n=l.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(i=l.global.headers)!==null&&i!==void 0?i:{},l.accessToken?(this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(h,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=l.auth)!==null&&o!==void 0?o:{},this.headers,l.global.fetch),this.fetch=Zh(e,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.accessToken&&this.accessToken().then(h=>this.realtime.setAuth(h)).catch(h=>console.warn("Failed to set initial Realtime auth token:",h)),this.rest=new Dh(new URL("rest/v1",s).href,{headers:this.headers,schema:l.db.schema,fetch:this.fetch}),this.storage=new In(this.storageUrl.href,this.headers,this.fetch,a?.storage),l.accessToken||this._listenForAuthEvents()}get functions(){return new mn(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},a={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,a)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t,e;if(this.accessToken)return await this.accessToken();let{data:a}=await this.auth.getSession();return(e=(t=a.session)===null||t===void 0?void 0:t.access_token)!==null&&e!==void 0?e:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:a,storage:n,userStorage:i,storageKey:o,flowType:s,lock:c,debug:d,throwOnError:l},h,p){let u={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new _o({url:this.authUrl.href,headers:Object.assign(Object.assign({},u),h),storageKey:o,autoRefreshToken:t,persistSession:e,detectSessionInUrl:a,storage:n,userStorage:i,flowType:s,lock:c,debug:d,throwOnError:l,fetch:p,hasCustomAuthorizationHeader:Object.keys(this.headers).some(y=>y.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new _n(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,a)=>{this._handleTokenChanged(e,"CLIENT",a?.access_token)})}_handleTokenChanged(t,e,a){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==a?(this.changedAccessToken=a,this.realtime.setAuth(a)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};var Fu=(r,t,e)=>new bo(r,t,e);function qf(){if(typeof window<"u"||typeof process>"u")return!1;let r=process.version;if(r==null)return!1;let t=r.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}qf()&&console.warn("\u26A0\uFE0F  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");var Xc={supabaseUrl:"https://wxltfyevnqrmqrtszpkp.supabase.co",supabaseKey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Ind4bHRmeWV2bnFybXFydHN6cGtwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjI5NDI2MDIsImV4cCI6MjA3ODUxODYwMn0.lvBJos0aR01yUQePUCv53NFYjUJS64IV7OUzZ4uU1Mo"};var So=Fu(Xc.supabaseUrl,Xc.supabaseKey);var JM={All:"Alle",Quarterly:"Quartal"};var yr=class r{getUser(){return de(So.auth.getUser()).pipe(T(({data:t})=>t.user??null),Ye(1))}login(t,e){return de(So.auth.signInWithPassword({email:t,password:e})).pipe(Ye(1),T(a=>{if(a.error)throw a.error;return a}))}logout(){return de(So.auth.signOut())}static \u0275fac=function(e){return new(e||r)};static \u0275prov=b({token:r,factory:r.\u0275fac})};function xo(r){return t=>t.pipe(T(e=>r.next(e)),kt(e=>x(r.error(e))))}function Ou(){let r=f(ic),t=f(yr),e=f(Bt);return{getUser$:r.on(ee.getUser).pipe(ye(()=>t.getUser().pipe(xo({next:a=>ee.getUserSuccess(a),error:a=>ee.getUserFailure(a)})))),login$:r.on(ee.login).pipe(ye(({payload:{email:a,password:n}})=>t.login(a,n).pipe(xo({next:()=>ee.loginSuccess(),error(i){return ee.loginFailure(i.message)}})))),getUserOnLoginSuccess$:r.on(ee.loginSuccess).pipe(T(()=>ee.getUser())),navigateOnLoginSuccess$:r.on(ee.loginSuccess).pipe(Q(()=>e.navigate(["/base"]))),logout$:r.on(ee.logout).pipe(ye(()=>t.logout().pipe(xo({next:()=>ee.logoutSuccess(),error:a=>ee.logoutFailure(a)})))),navigateOnLogoutSuccess$:r.on(ee.logoutSuccess).pipe(Q(()=>e.navigate(["/login"])))}}var Io=Fl(Ul("users"),Oi({user:null,loadProcessStatus:"init",isLoggedIn:!1,loginError:null}),ql(()=>Ou()),Bl(er(ee.getUserSuccess,({payload:r})=>({user:r??null,loadProcessStatus:"success",isLoggedIn:r!==null})),er(ee.getUserFailure,()=>({loadProcessStatus:"error"})),er(ee.loginSuccess,()=>({isLoggedIn:!0})),er(ee.loginFailure,({payload:r})=>({loginError:r})),er(ee.logoutSuccess,()=>({isLoggedIn:!1,user:null}))));var fr=class r{dispatcher=f(oc);store=f(Io);user=this.store.user;isLoggedIn=this.store.isLoggedIn;loginError=this.store.loginError;loadProcessStatus$=El(this.store.loadProcessStatus);getUser(){this.dispatcher.dispatch(ee.getUser())}login(t,e){this.dispatcher.dispatch(ee.login({email:t,password:e}))}logout(){this.dispatcher.dispatch(ee.logout())}static \u0275fac=function(e){return new(e||r)};static \u0275prov=b({token:r,factory:r.\u0275fac})};function Fw(){return[yr,fr,Io]}var Uu=(()=>{class r{_renderer;_elementRef;onChange=e=>{};onTouched=()=>{};constructor(e,a){this._renderer=e,this._elementRef=a}setProperty(e,a){this._renderer.setProperty(this._elementRef.nativeElement,e,a)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static \u0275fac=function(a){return new(a||r)(A(tt),A(W))};static \u0275dir=I({type:r})}return r})(),Bf=(()=>{class r extends Uu{static \u0275fac=(()=>{let e;return function(n){return(e||(e=se(r)))(n||r)}})();static \u0275dir=I({type:r,features:[$]})}return r})(),e1=new D("");var Hf={provide:e1,useExisting:Et(()=>qo),multi:!0};function Nf(){let r=We()?We().getUserAgent():"";return/android (\d+)/.test(r.toLowerCase())}var Uf=new D(""),qo=(()=>{class r extends Uu{_compositionMode;_composing=!1;constructor(e,a,n){super(e,a),this._compositionMode=n,this._compositionMode==null&&(this._compositionMode=!Nf())}writeValue(e){let a=e??"";this.setProperty("value",a)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static \u0275fac=function(a){return new(a||r)(A(tt),A(W),A(Uf,8))};static \u0275dir=I({type:r,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(a,n){a&1&&Pe("input",function(o){return n._handleInput(o.target.value)})("blur",function(){return n.onTouched()})("compositionstart",function(){return n._compositionStart()})("compositionend",function(o){return n._compositionEnd(o.target.value)})},standalone:!1,features:[ae([Hf]),$]})}return r})();function t1(r){return r==null||a1(r)===0}function a1(r){return r==null?null:Array.isArray(r)||typeof r=="string"?r.length:r instanceof Set?r.size:null}var qn=new D(""),Bo=new D(""),$f=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,ju=class{static min(t){return Gf(t)}static max(t){return Wf(t)}static required(t){return $u(t)}static requiredTrue(t){return Kf(t)}static email(t){return Zf(t)}static minLength(t){return Xf(t)}static maxLength(t){return Jf(t)}static pattern(t){return Yf(t)}static nullValidator(t){return Ao()}static compose(t){return Ju(t)}static composeAsync(t){return Yu(t)}};function Gf(r){return t=>{if(t.value==null||r==null)return null;let e=parseFloat(t.value);return!isNaN(e)&&e<r?{min:{min:r,actual:t.value}}:null}}function Wf(r){return t=>{if(t.value==null||r==null)return null;let e=parseFloat(t.value);return!isNaN(e)&&e>r?{max:{max:r,actual:t.value}}:null}}function $u(r){return t1(r.value)?{required:!0}:null}function Kf(r){return r.value===!0?null:{required:!0}}function Zf(r){return t1(r.value)||$f.test(r.value)?null:{email:!0}}function Xf(r){return t=>{let e=t.value?.length??a1(t.value);return e===null||e===0?null:e<r?{minlength:{requiredLength:r,actualLength:e}}:null}}function Jf(r){return t=>{let e=t.value?.length??a1(t.value);return e!==null&&e>r?{maxlength:{requiredLength:r,actualLength:e}}:null}}function Yf(r){if(!r)return Ao;let t,e;return typeof r=="string"?(e="",r.charAt(0)!=="^"&&(e+="^"),e+=r,r.charAt(r.length-1)!=="$"&&(e+="$"),t=new RegExp(e)):(e=r.toString(),t=r),a=>{if(t1(a.value))return null;let n=a.value;return t.test(n)?null:{pattern:{requiredPattern:e,actualValue:n}}}}function Ao(r){return null}function Gu(r){return r!=null}function Wu(r){return Pr(r)?de(r):r}function Ku(r){let t={};return r.forEach(e=>{t=e!=null?k(k({},t),e):t}),Object.keys(t).length===0?null:t}function Zu(r,t){return t.map(e=>e(r))}function Qf(r){return!r.validate}function Xu(r){return r.map(t=>Qf(t)?t:e=>t.validate(e))}function Ju(r){if(!r)return null;let t=r.filter(Gu);return t.length==0?null:function(e){return Ku(Zu(e,t))}}function r1(r){return r!=null?Ju(Xu(r)):null}function Yu(r){if(!r)return null;let t=r.filter(Gu);return t.length==0?null:function(e){let a=Zu(e,t).map(Wu);return W1(a).pipe(T(Ku))}}function n1(r){return r!=null?Yu(Xu(r)):null}function Vu(r,t){return r===null?[t]:Array.isArray(r)?[...r,t]:[r,t]}function Qu(r){return r._rawValidators}function e0(r){return r._rawAsyncValidators}function Jc(r){return r?Array.isArray(r)?r:[r]:[]}function Ro(r,t){return Array.isArray(r)?r.includes(t):r===t}function zu(r,t){let e=Jc(t);return Jc(r).forEach(n=>{Ro(e,n)||e.push(n)}),e}function qu(r,t){return Jc(t).filter(e=>!Ro(r,e))}var Eo=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=r1(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=n1(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,e){return this.control?this.control.hasError(t,e):!1}getError(t,e){return this.control?this.control.getError(t,e):null}},Gt=class extends Eo{name;get formDirective(){return null}get path(){return null}},ba=class extends Eo{_parent=null;name=null;valueAccessor=null},To=class{_cd;constructor(t){this._cd=t}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},eg={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Qw=P(k({},eg),{"[class.ng-submitted]":"isSubmitted"}),t0=(()=>{class r extends To{constructor(e){super(e)}static \u0275fac=function(a){return new(a||r)(A(ba,2))};static \u0275dir=I({type:r,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(a,n){a&2&&$e("ng-untouched",n.isUntouched)("ng-touched",n.isTouched)("ng-pristine",n.isPristine)("ng-dirty",n.isDirty)("ng-valid",n.isValid)("ng-invalid",n.isInvalid)("ng-pending",n.isPending)},standalone:!1,features:[$]})}return r})(),a0=(()=>{class r extends To{constructor(e){super(e)}static \u0275fac=function(a){return new(a||r)(A(Gt,10))};static \u0275dir=I({type:r,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(a,n){a&2&&$e("ng-untouched",n.isUntouched)("ng-touched",n.isTouched)("ng-pristine",n.isPristine)("ng-dirty",n.isDirty)("ng-valid",n.isValid)("ng-invalid",n.isInvalid)("ng-pending",n.isPending)("ng-submitted",n.isSubmitted)},standalone:!1,features:[$]})}return r})();var Pn="VALID",Lo="INVALID",gr="PENDING",Fn="DISABLED",Wt=class{},Po=class extends Wt{value;source;constructor(t,e){super(),this.value=t,this.source=e}},jn=class extends Wt{pristine;source;constructor(t,e){super(),this.pristine=t,this.source=e}},Vn=class extends Wt{touched;source;constructor(t,e){super(),this.touched=t,this.source=e}},mr=class extends Wt{status;source;constructor(t,e){super(),this.status=t,this.source=e}},Fo=class extends Wt{source;constructor(t){super(),this.source=t}},zn=class extends Wt{source;constructor(t){super(),this.source=t}};function i1(r){return(Ho(r)?r.validators:r)||null}function tg(r){return Array.isArray(r)?r1(r):r||null}function o1(r,t){return(Ho(t)?t.asyncValidators:r)||null}function ag(r){return Array.isArray(r)?n1(r):r||null}function Ho(r){return r!=null&&!Array.isArray(r)&&typeof r=="object"}function r0(r,t,e){let a=r.controls;if(!(t?Object.keys(a):a).length)throw new O(1e3,"");if(!a[e])throw new O(1001,"")}function n0(r,t,e){r._forEachChild((a,n)=>{if(e[n]===void 0)throw new O(1002,"")})}var kr=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(t,e){this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get status(){return B(this.statusReactive)}set status(t){B(()=>this.statusReactive.set(t))}_status=me(()=>this.statusReactive());statusReactive=ne(void 0);get valid(){return this.status===Pn}get invalid(){return this.status===Lo}get pending(){return this.status==gr}get disabled(){return this.status===Fn}get enabled(){return this.status!==Fn}errors;get pristine(){return B(this.pristineReactive)}set pristine(t){B(()=>this.pristineReactive.set(t))}_pristine=me(()=>this.pristineReactive());pristineReactive=ne(!0);get dirty(){return!this.pristine}get touched(){return B(this.touchedReactive)}set touched(t){B(()=>this.touchedReactive.set(t))}_touched=me(()=>this.touchedReactive());touchedReactive=ne(!1);get untouched(){return!this.touched}_events=new Y;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(zu(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(zu(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(qu(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(qu(t,this._rawAsyncValidators))}hasValidator(t){return Ro(this._rawValidators,t)}hasAsyncValidator(t){return Ro(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){let e=this.touched===!1;this.touched=!0;let a=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsTouched(P(k({},t),{sourceControl:a})),e&&t.emitEvent!==!1&&this._events.next(new Vn(!0,a))}markAllAsDirty(t={}){this.markAsDirty({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsDirty(t))}markAllAsTouched(t={}){this.markAsTouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsTouched(t))}markAsUntouched(t={}){let e=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let a=t.sourceControl??this;this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:a})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,a),e&&t.emitEvent!==!1&&this._events.next(new Vn(!1,a))}markAsDirty(t={}){let e=this.pristine===!0;this.pristine=!1;let a=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsDirty(P(k({},t),{sourceControl:a})),e&&t.emitEvent!==!1&&this._events.next(new jn(!1,a))}markAsPristine(t={}){let e=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let a=t.sourceControl??this;this._forEachChild(n=>{n.markAsPristine({onlySelf:!0,emitEvent:t.emitEvent})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t,a),e&&t.emitEvent!==!1&&this._events.next(new jn(!0,a))}markAsPending(t={}){this.status=gr;let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new mr(this.status,e)),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.markAsPending(P(k({},t),{sourceControl:e}))}disable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=Fn,this.errors=null,this._forEachChild(n=>{n.disable(P(k({},t),{onlySelf:!0}))}),this._updateValue();let a=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Po(this.value,a)),this._events.next(new mr(this.status,a)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(P(k({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(n=>n(!0))}enable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=Pn,this._forEachChild(a=>{a.enable(P(k({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(P(k({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(a=>a(!1))}_updateAncestors(t,e){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine({},e),this._parent._updateTouched({},e))}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let a=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Pn||this.status===gr)&&this._runAsyncValidator(a,t.emitEvent)}let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Po(this.value,e)),this._events.next(new mr(this.status,e)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(P(k({},t),{sourceControl:e}))}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Fn:Pn}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t,e){if(this.asyncValidator){this.status=gr,this._hasOwnPendingAsyncValidator={emitEvent:e!==!1,shouldHaveEmitted:t!==!1};let a=Wu(this.asyncValidator(this));this._asyncValidationSubscription=a.subscribe(n=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(n,{emitEvent:e,shouldHaveEmitted:t})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let t=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,t}return!1}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(e.emitEvent!==!1,this,e.shouldHaveEmitted)}get(t){let e=t;return e==null||(Array.isArray(e)||(e=e.split(".")),e.length===0)?null:e.reduce((a,n)=>a&&a._find(n),this)}getError(t,e){let a=e?this.get(e):this;return a&&a.errors?a.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t,e,a){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),(t||a)&&this._events.next(new mr(this.status,e)),this._parent&&this._parent._updateControlsErrors(t,e,a)}_initObservables(){this.valueChanges=new le,this.statusChanges=new le}_calculateStatus(){return this._allControlsDisabled()?Fn:this.errors?Lo:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(gr)?gr:this._anyControlsHaveStatus(Lo)?Lo:Pn}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t,e){let a=!this._anyControlsDirty(),n=this.pristine!==a;this.pristine=a,this._parent&&!t.onlySelf&&this._parent._updatePristine(t,e),n&&this._events.next(new jn(this.pristine,e))}_updateTouched(t={},e){this.touched=this._anyControlsTouched(),this._events.next(new Vn(this.touched,e)),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,e)}_onDisabledChange=[];_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Ho(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let e=this._parent&&this._parent.dirty;return!t&&!!e&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=tg(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=ag(this._rawAsyncValidators)}},vr=class extends kr{constructor(t,e,a){super(i1(e),o1(a,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,a={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:a.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,a={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:a.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){n0(this,!0,t),Object.keys(t).forEach(a=>{r0(this,!0,a),this.controls[a].setValue(t[a],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t!=null&&(Object.keys(t).forEach(a=>{let n=this.controls[a];n&&n.patchValue(t[a],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((a,n)=>{a.reset(t?t[n]:null,{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e),e?.emitEvent!==!1&&this._events.next(new zn(this))}getRawValue(){return this._reduceChildren({},(t,e,a)=>(t[a]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,a)=>a._syncPendingControls()?!0:e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{let a=this.controls[e];a&&t(a,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[e,a]of Object.entries(this.controls))if(this.contains(e)&&t(a))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(e,a,n)=>((a.enabled||this.disabled)&&(e[n]=a.value),e))}_reduceChildren(t,e){let a=t;return this._forEachChild((n,i)=>{a=e(a,n,i)}),a}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var Yc=class extends vr{};var No=new D("",{providedIn:"root",factory:()=>s1}),s1="always";function rg(r,t){return[...t.path,r]}function Oo(r,t,e=s1){c1(r,t),t.valueAccessor.writeValue(r.value),(r.disabled||e==="always")&&t.valueAccessor.setDisabledState?.(r.disabled),ig(r,t),sg(r,t),og(r,t),ng(r,t)}function jo(r,t,e=!0){let a=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(a),t.valueAccessor.registerOnTouched(a)),zo(r,t),r&&(t._invokeOnDestroyCallbacks(),r._registerOnCollectionChange(()=>{}))}function Vo(r,t){r.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function ng(r,t){if(t.valueAccessor.setDisabledState){let e=a=>{t.valueAccessor.setDisabledState(a)};r.registerOnDisabledChange(e),t._registerOnDestroy(()=>{r._unregisterOnDisabledChange(e)})}}function c1(r,t){let e=Qu(r);t.validator!==null?r.setValidators(Vu(e,t.validator)):typeof e=="function"&&r.setValidators([e]);let a=e0(r);t.asyncValidator!==null?r.setAsyncValidators(Vu(a,t.asyncValidator)):typeof a=="function"&&r.setAsyncValidators([a]);let n=()=>r.updateValueAndValidity();Vo(t._rawValidators,n),Vo(t._rawAsyncValidators,n)}function zo(r,t){let e=!1;if(r!==null){if(t.validator!==null){let n=Qu(r);if(Array.isArray(n)&&n.length>0){let i=n.filter(o=>o!==t.validator);i.length!==n.length&&(e=!0,r.setValidators(i))}}if(t.asyncValidator!==null){let n=e0(r);if(Array.isArray(n)&&n.length>0){let i=n.filter(o=>o!==t.asyncValidator);i.length!==n.length&&(e=!0,r.setAsyncValidators(i))}}}let a=()=>{};return Vo(t._rawValidators,a),Vo(t._rawAsyncValidators,a),e}function ig(r,t){t.valueAccessor.registerOnChange(e=>{r._pendingValue=e,r._pendingChange=!0,r._pendingDirty=!0,r.updateOn==="change"&&i0(r,t)})}function og(r,t){t.valueAccessor.registerOnTouched(()=>{r._pendingTouched=!0,r.updateOn==="blur"&&r._pendingChange&&i0(r,t),r.updateOn!=="submit"&&r.markAsTouched()})}function i0(r,t){r._pendingDirty&&r.markAsDirty(),r.setValue(r._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1}function sg(r,t){let e=(a,n)=>{t.valueAccessor.writeValue(a),n&&t.viewToModelUpdate(a)};r.registerOnChange(e),t._registerOnDestroy(()=>{r._unregisterOnChange(e)})}function o0(r,t){r==null,c1(r,t)}function cg(r,t){return zo(r,t)}function s0(r,t){if(!r.hasOwnProperty("model"))return!1;let e=r.model;return e.isFirstChange()?!0:!Object.is(t,e.currentValue)}function dg(r){return Object.getPrototypeOf(r.constructor)===Bf}function c0(r,t){r._syncPendingControls(),t.forEach(e=>{let a=e.control;a.updateOn==="submit"&&a._pendingChange&&(e.viewToModelUpdate(a._pendingValue),a._pendingChange=!1)})}function d0(r,t){if(!t)return null;Array.isArray(t);let e,a,n;return t.forEach(i=>{i.constructor===qo?e=i:dg(i)?a=i:n=i}),n||a||e||null}function lg(r,t){let e=r.indexOf(t);e>-1&&r.splice(e,1)}var hg={provide:Gt,useExisting:Et(()=>ug)},On=Promise.resolve(),ug=(()=>{class r extends Gt{callSetDisabledState;get submitted(){return B(this.submittedReactive)}_submitted=me(()=>this.submittedReactive());submittedReactive=ne(!1);_directives=new Set;form;ngSubmit=new le;options;constructor(e,a,n){super(),this.callSetDisabledState=n,this.form=new vr({},r1(e),n1(a))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){On.then(()=>{let a=this._findContainer(e.path);e.control=a.registerControl(e.name,e.control),Oo(e.control,e,this.callSetDisabledState),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){On.then(()=>{let a=this._findContainer(e.path);a&&a.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){On.then(()=>{let a=this._findContainer(e.path),n=new vr({});o0(n,e),a.registerControl(e.name,n),n.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){On.then(()=>{let a=this._findContainer(e.path);a&&a.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,a){On.then(()=>{this.form.get(e.path).setValue(a)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submittedReactive.set(!0),c0(this.form,this._directives),this.ngSubmit.emit(e),this.form._events.next(new Fo(this.control)),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}static \u0275fac=function(a){return new(a||r)(A(qn,10),A(Bo,10),A(No,8))};static \u0275dir=I({type:r,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(a,n){a&1&&Pe("submit",function(o){return n.onSubmit(o)})("reset",function(){return n.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[ae([hg]),$]})}return r})();function Bu(r,t){let e=r.indexOf(t);e>-1&&r.splice(e,1)}function Hu(r){return typeof r=="object"&&r!==null&&Object.keys(r).length===2&&"value"in r&&"disabled"in r}var Do=class extends kr{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(t=null,e,a){super(i1(e),o1(a,e)),this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ho(e)&&(e.nonNullable||e.initialValueIsDefault)&&(Hu(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&e.emitModelToViewChange!==!1&&this._onChange.forEach(a=>a(this.value,e.emitViewToModelChange!==!1)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1,e?.emitEvent!==!1&&this._events.next(new zn(this))}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){Bu(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){Bu(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){Hu(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var pg=r=>r instanceof Do;var t7=(()=>{class r{static \u0275fac=function(a){return new(a||r)};static \u0275dir=I({type:r,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return r})();var d1=new D(""),yg={provide:ba,useExisting:Et(()=>fg)},fg=(()=>{class r extends ba{_ngModelWarningConfig;callSetDisabledState;viewModel;form;set isDisabled(e){}model;update=new le;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(e,a,n,i,o){super(),this._ngModelWarningConfig=i,this.callSetDisabledState=o,this._setValidators(e),this._setAsyncValidators(a),this.valueAccessor=d0(this,n)}ngOnChanges(e){if(this._isControlChanged(e)){let a=e.form.previousValue;a&&jo(a,this,!1),Oo(this.form,this,this.callSetDisabledState),this.form.updateValueAndValidity({emitEvent:!1})}s0(e,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&jo(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_isControlChanged(e){return e.hasOwnProperty("form")}static \u0275fac=function(a){return new(a||r)(A(qn,10),A(Bo,10),A(e1,10),A(d1,8),A(No,8))};static \u0275dir=I({type:r,selectors:[["","formControl",""]],inputs:{form:[0,"formControl","form"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],standalone:!1,features:[ae([yg]),$,oe]})}return r})(),gg={provide:Gt,useExisting:Et(()=>l1)},l1=(()=>{class r extends Gt{callSetDisabledState;get submitted(){return B(this._submittedReactive)}set submitted(e){this._submittedReactive.set(e)}_submitted=me(()=>this._submittedReactive());_submittedReactive=ne(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new le;constructor(e,a,n){super(),this.callSetDisabledState=n,this._setValidators(e),this._setAsyncValidators(a)}ngOnChanges(e){e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(zo(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){let a=this.form.get(e.path);return Oo(a,e,this.callSetDisabledState),a.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),a}getControl(e){return this.form.get(e.path)}removeControl(e){jo(e.control||null,e,!1),lg(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,a){this.form.get(e.path).setValue(a)}onSubmit(e){return this._submittedReactive.set(!0),c0(this.form,this.directives),this.ngSubmit.emit(e),this.form._events.next(new Fo(this.control)),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0,a={}){this.form.reset(e,a),this._submittedReactive.set(!1)}_updateDomValue(){this.directives.forEach(e=>{let a=e.control,n=this.form.get(e.path);a!==n&&(jo(a||null,e),pg(n)&&(Oo(n,e,this.callSetDisabledState),e.control=n))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){let a=this.form.get(e.path);o0(a,e),a.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){let a=this.form.get(e.path);a&&cg(a,e)&&a.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){c1(this.form,this),this._oldForm&&zo(this._oldForm,this)}static \u0275fac=function(a){return new(a||r)(A(qn,10),A(Bo,10),A(No,8))};static \u0275dir=I({type:r,selectors:[["","formGroup",""]],hostBindings:function(a,n){a&1&&Pe("submit",function(o){return n.onSubmit(o)})("reset",function(){return n.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[ae([gg]),$,oe]})}return r})();var mg={provide:ba,useExisting:Et(()=>h1)},h1=(()=>{class r extends ba{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(e){}model;update=new le;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(e,a,n,i,o){super(),this._ngModelWarningConfig=o,this._parent=e,this._setValidators(a),this._setAsyncValidators(n),this.valueAccessor=d0(this,i)}ngOnChanges(e){this._added||this._setUpControl(),s0(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return rg(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(a){return new(a||r)(A(Gt,13),A(qn,10),A(Bo,10),A(e1,10),A(d1,8))};static \u0275dir=I({type:r,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[ae([mg]),$,oe]})}return r})();var kg=(()=>{class r{_validator=Ao;_onChange;_enabled;ngOnChanges(e){if(this.inputName in e){let a=this.normalizeInput(e[this.inputName].currentValue);this._enabled=this.enabled(a),this._validator=this._enabled?this.createValidator(a):Ao,this._onChange&&this._onChange()}}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._onChange=e}enabled(e){return e!=null}static \u0275fac=function(a){return new(a||r)};static \u0275dir=I({type:r,features:[oe]})}return r})();var vg={provide:qn,useExisting:Et(()=>Mg),multi:!0};var Mg=(()=>{class r extends kg{required;inputName="required";normalizeInput=ke;createValidator=e=>$u;enabled(e){return e}static \u0275fac=(()=>{let e;return function(n){return(e||(e=se(r)))(n||r)}})();static \u0275dir=I({type:r,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(a,n){a&2&&nt("required",n._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[ae([vg]),$]})}return r})();var wg=(()=>{class r{static \u0275fac=function(a){return new(a||r)};static \u0275mod=ce({type:r});static \u0275inj=ie({})}return r})(),Qc=class extends kr{constructor(t,e,a){super(i1(e),o1(a,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(t){return this.controls[this._adjustIndex(t)]}push(t,e={}){Array.isArray(t)?t.forEach(a=>{this.controls.push(a),this._registerControl(a)}):(this.controls.push(t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,a={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:a.emitEvent})}removeAt(t,e={}){let a=this._adjustIndex(t);a<0&&(a=0),this.controls[a]&&this.controls[a]._registerOnCollectionChange(()=>{}),this.controls.splice(a,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,a={}){let n=this._adjustIndex(t);n<0&&(n=0),this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),this.controls.splice(n,1),e&&(this.controls.splice(n,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:a.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){n0(this,!1,t),t.forEach((a,n)=>{r0(this,!1,n),this.at(n).setValue(a,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t!=null&&(t.forEach((a,n)=>{this.at(n)&&this.at(n).patchValue(a,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((a,n)=>{a.reset(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e),e?.emitEvent!==!1&&this._events.next(new zn(this))}getRawValue(){return this.controls.map(t=>t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_adjustIndex(t){return t<0?t+this.length:t}_syncPendingControls(){let t=this.controls.reduce((e,a)=>a._syncPendingControls()?!0:e,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){this.controls.forEach((e,a)=>{t(e,a)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_allControlsDisabled(){for(let t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}_find(t){return this.at(t)??null}};function Nu(r){return!!r&&(r.asyncValidators!==void 0||r.validators!==void 0||r.updateOn!==void 0)}var Cg=(()=>{class r{useNonNullable=!1;get nonNullable(){let e=new r;return e.useNonNullable=!0,e}group(e,a=null){let n=this._reduceControls(e),i={};return Nu(a)?i=a:a!==null&&(i.validators=a.validator,i.asyncValidators=a.asyncValidator),new vr(n,i)}record(e,a=null){let n=this._reduceControls(e);return new Yc(n,a)}control(e,a,n){let i={};return this.useNonNullable?(Nu(a)?i=a:(i.validators=a,i.asyncValidators=n),new Do(e,P(k({},i),{nonNullable:!0}))):new Do(e,a,n)}array(e,a,n){let i=e.map(o=>this._createControl(o));return new Qc(i,a,n)}_reduceControls(e){let a={};return Object.keys(e).forEach(n=>{a[n]=this._createControl(e[n])}),a}_createControl(e){if(e instanceof Do)return e;if(e instanceof kr)return e;if(Array.isArray(e)){let a=e[0],n=e.length>1?e[1]:null,i=e.length>2?e[2]:null;return this.control(a,n,i)}else return this.control(e)}static \u0275fac=function(a){return new(a||r)};static \u0275prov=b({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),l0=(()=>{class r{static \u0275fac=function(a){return new(a||r)};static \u0275prov=b({token:r,factory:()=>f(Cg).nonNullable,providedIn:"root"})}return r})();var h0=(()=>{class r{static withConfig(e){return{ngModule:r,providers:[{provide:d1,useValue:e.warnOnNgModelWithFormControl??"always"},{provide:No,useValue:e.callSetDisabledState??s1}]}}static \u0275fac=function(a){return new(a||r)};static \u0275mod=ce({type:r});static \u0275inj=ie({imports:[wg]})}return r})();var bg=["*"];var d7=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]];var l7=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]];var h7=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]];var u7=[["path",{d:"m15 18-.722-3.25",key:"1j64jw"}],["path",{d:"M2 8a10.645 10.645 0 0 0 20 0",key:"1e7gxb"}],["path",{d:"m20 15-1.726-2.05",key:"1cnuld"}],["path",{d:"m4 15 1.726-2.05",key:"1dsqqd"}],["path",{d:"m9 18 .722-3.25",key:"ypw2yx"}]],p7=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]];var y7=[["path",{d:"M11 15h2a2 2 0 1 0 0-4h-3c-.6 0-1.1.2-1.4.6L3 17",key:"geh8rc"}],["path",{d:"m7 21 1.6-1.4c.3-.4.8-.6 1.4-.6h4c1.1 0 2.1-.4 2.8-1.2l4.6-4.4a2 2 0 0 0-2.75-2.91l-4.2 3.9",key:"1fto5m"}],["path",{d:"m2 16 6 6",key:"1pfhp9"}],["circle",{cx:"16",cy:"9",r:"2.9",key:"1n0dlu"}],["circle",{cx:"6",cy:"5",r:"3",key:"151irh"}]];var f7=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]];var g7=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M8 12h5",key:"1g6qi8"}],["path",{d:"M16 9.5a4 4 0 1 0 0 5.2",key:"b2px4r"}]];var m7=[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]];var Bn={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"},u1=new D("LucideIcons",{factory:()=>new Hn({})}),Hn=class{constructor(t){this.icons=t}getIcon(t){return this.hasIcon(t)?this.icons[t]:null}hasIcon(t){return typeof this.icons=="object"&&t in this.icons}},Sg=(()=>{class r{constructor(){this.color=Bn.stroke,this.size=Bn.width,this.strokeWidth=Bn["stroke-width"],this.absoluteStrokeWidth=!1}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=b({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();function xg(r,t=3){return parseFloat(r.toFixed(t)).toString(10)}var u0=(()=>{class r{constructor(e,a,n,i,o){this.elem=e,this.renderer=a,this.changeDetector=n,this.iconProviders=i,this.iconConfig=o,this.absoluteStrokeWidth=!1,this.defaultSize=Bn.height}get size(){return this._size??this.iconConfig.size}set size(e){e?this._size=this.parseNumber(e):delete this._size}get strokeWidth(){return this._strokeWidth??this.iconConfig.strokeWidth}set strokeWidth(e){e?this._strokeWidth=this.parseNumber(e):delete this._strokeWidth}ngOnChanges(e){if(e.name||e.img||e.color||e.size||e.absoluteStrokeWidth||e.strokeWidth||e.class){this.color=this.color??this.iconConfig.color,this.size=this.parseNumber(this.size??this.iconConfig.size),this.strokeWidth=this.parseNumber(this.strokeWidth??this.iconConfig.strokeWidth),this.absoluteStrokeWidth=this.absoluteStrokeWidth??this.iconConfig.absoluteStrokeWidth;let a=this.img??this.name;if(typeof a=="string"){let n=this.getIcon(this.toPascalCase(a));if(n)this.replaceElement(n);else throw new Error(`The "${a}" icon has not been provided by any available icon providers.`)}else if(Array.isArray(a))this.replaceElement(a);else throw new Error("No icon name or image has been provided.")}this.changeDetector.markForCheck()}replaceElement(e){let a=P(k({},Bn),{width:this.size,height:this.size,stroke:this.color??this.iconConfig.color,"stroke-width":this.absoluteStrokeWidth?xg(this.strokeWidth/(this.size/this.defaultSize)):this.strokeWidth.toString(10)}),n=this.createElement(["svg",a,e]);n.classList.add("lucide"),typeof this.name=="string"&&n.classList.add(`lucide-${this.name.replace("_","-")}`),this.class&&n.classList.add(...this.class.split(/ /).map(o=>o.trim()).filter(o=>o.length>0));let i=this.elem.nativeElement.childNodes;for(let o of i)this.renderer.removeChild(this.elem.nativeElement,o);this.renderer.appendChild(this.elem.nativeElement,n)}toPascalCase(e){return e.replace(/(\w)([a-z0-9]*)(_|-|\s*)/g,(a,n,i)=>n.toUpperCase()+i.toLowerCase())}parseNumber(e){if(typeof e=="string"){let a=parseInt(e,10);if(isNaN(a))throw new Error(`${e} is not numeric.`);return a}return e}getIcon(e){for(let a of Array.isArray(this.iconProviders)?this.iconProviders:[this.iconProviders])if(a.hasIcon(e))return a.getIcon(e);return null}createElement([e,a,n=[]]){let i=this.renderer.createElement(e,"http://www.w3.org/2000/svg");return Object.keys(a).forEach(o=>{let s=typeof a[o]=="string"?a[o]:a[o].toString(10);this.renderer.setAttribute(i,o,s)}),n.length&&n.forEach(o=>{let s=this.createElement(o);this.renderer.appendChild(i,s)}),i}}return r.\u0275fac=function(e){return new(e||r)(A(W),A(tt),A(Ge),A(u1),A(Sg))},r.\u0275cmp=Z({type:r,selectors:[["lucide-angular"],["lucide-icon"],["i-lucide"],["span-lucide"]],inputs:{class:"class",name:"name",img:"img",color:"color",absoluteStrokeWidth:"absoluteStrokeWidth",size:"size",strokeWidth:"strokeWidth"},standalone:!1,features:[oe],ngContentSelectors:bg,decls:1,vars:0,template:function(e,a){e&1&&(it(),Ce(0))},encapsulation:2}),r})(),p1=class{constructor(t){this.icons=t}},Ig=r=>new Hn(r??{}),p0=(()=>{class r{static pick(e){return{ngModule:r,providers:[{provide:u1,multi:!0,useValue:new Hn(e)},{provide:u1,multi:!0,useFactory:Ig,deps:[[new ds,p1]]}]}}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=ce({type:r}),r.\u0275inj=ie({imports:[[]]}),r})();var Dg=["noContentFallback"],Ag=["maffiButton",""],Rg=["*"];function Eg(r,t){if(r&1&&fe(0,"i-lucide",1),r&2){let e=te();we("name",t)("size",e._size())}}function Tg(r,t){r&1&&(F(0,"div",2),Ar(),F(1,"svg",4),fe(2,"path",5)(3,"path",6),V()())}function Pg(r,t){r&1&&fe(0,"span",7,0)}var Kt=class r{icon=De();theme=De("primary");isLoading=De(!1);disabled=De(!1);size=De("small");noContentFallback=jr("noContentFallback");buttonType=me(()=>this.icon()&&this.noContentFallback()?"fab":"button");_size=me(()=>{switch(this.size()){case"mini":return 12;case"small":return 18;case"medium":return 24;case"large":return 32}});isDisabled=me(()=>this.isLoading()||this.disabled());classes=me(()=>{let t=`
      relative
      inline-flex
      gap-2
      items-center
      min-h-10
      text-sm
    `,e=`
      hover:cursor-pointer
      disabled:hover:cursor-auto

      focus-visible:outline-dotted
      focus-visible:outline-1
      focus-visible:outline-blue-700
      focus-visible:outline-offset-2

      disabled:text-black
      disabled:bg-gray-200

      transition-colors
    `,a=this.getTypeClasses(this.buttonType()),n=this.getThemeClasses();return`${t} ${e} ${a} ${n}`});getThemeClasses(){switch(this.theme()){case"primary":return`
          text-white
          bg-blue-900
          hover:bg-blue-800
          active:bg-blue-800
        `;case"secondary":return`
        text-neutral-900
        hover:bg-neutral-200
        active:bg-neutral-200
        `;case"plain":return`
          text-neutral-900
        `;case"inactive":return`
          text-neutral-400
          hover:text-neutral-900
        `;default:throw new Error(`Theme ${this.theme()} is not supported for Button2Component`)}}getTypeClasses(t){switch(t){case"fab":return"rounded-full aspect-square justify-center";case"button":return"px-4 py-2 w-fit rounded-lg justify-start"}}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=Z({type:r,selectors:[["button","maffiButton",""]],viewQuery:function(e,a){e&1&&Or(a.noContentFallback,Dg,5),e&2&&ti()},hostVars:3,hostBindings:function(e,a){e&2&&(yd("disabled",a.isDisabled()),Pa(a.classes()))},inputs:{icon:[1,"icon"],theme:[1,"theme"],isLoading:[1,"isLoading"],disabled:[1,"disabled"],size:[1,"size"]},attrs:Ag,ngContentSelectors:Rg,decls:5,vars:2,consts:[["noContentFallback",""],[3,"name","size"],["role","status",1,"absolute","top-1/2","left-1/2","-translate-x-1/2","-translate-y-1/2","opacity-30"],["aria-hidden","true",1,"absolute","inset-0","-m-2"],["aria-hidden","true","viewBox","0 0 100 101","xmlns","http://www.w3.org/2000/svg",1,"fill-primary","h-6","w-6","animate-spin"],["d","M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z","fill","currentColor"],["d","M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z","fill","currentFill"],[1,"hidden"]],template:function(e,a){if(e&1&&(it(),ze(0,Eg,1,2,"i-lucide",1),ze(1,Tg,4,0,"div",2),Ce(2,0,null,Pg,2,0),fe(4,"span",3)),e&2){let n;qe((n=a.icon())?0:-1,n),j(),qe(a.isLoading()?1:-1)}},dependencies:[p0,u0],encapsulation:2,changeDetection:0})};var f1;try{f1=typeof Intl<"u"&&Intl.v8BreakIterator}catch{f1=!1}var je=(()=>{class r{_platformId=f(vt);isBrowser=this._platformId?ii(this._platformId):typeof document=="object"&&!!document;EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent);TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent);BLINK=this.isBrowser&&!!(window.chrome||f1)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT;WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT;IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window);FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent);ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT;SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT;constructor(){}static \u0275fac=function(a){return new(a||r)};static \u0275prov=b({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var Nn;function y0(){if(Nn==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Nn=!0}))}finally{Nn=Nn||!1}return Nn}function g1(r){return y0()?r:!!r.capture}var m1;function f0(){if(m1==null){let r=typeof document<"u"?document.head:null;m1=!!(r&&(r.createShadowRoot||r.attachShadow))}return m1}function k1(r){if(f0()){let t=r.getRootNode?r.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}function Sa(r){return r.composedPath?r.composedPath()[0]:r.target}var Mr,g0=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function R7(){if(Mr)return Mr;if(typeof document!="object"||!document)return Mr=new Set(g0),Mr;let r=document.createElement("input");return Mr=new Set(g0.filter(t=>(r.setAttribute("type",t),r.type===t))),Mr}function v1(r){return r.buttons===0||r.detail===0}function M1(r){let t=r.touches&&r.touches[0]||r.changedTouches&&r.changedTouches[0];return!!t&&t.identifier===-1&&(t.radiusX==null||t.radiusX===1)&&(t.radiusY==null||t.radiusY===1)}function Un(r){return r instanceof W?r.nativeElement:r}var m0=new D("cdk-input-modality-detector-options"),k0={ignoreKeys:[18,17,224,91,16]},v0=650,w1={passive:!0,capture:!0},M0=(()=>{class r{_platform=f(je);_listenerCleanups;modalityDetected;modalityChanged;get mostRecentModality(){return this._modality.value}_mostRecentTarget=null;_modality=new Me(null);_options;_lastTouchMs=0;_onKeydown=e=>{this._options?.ignoreKeys?.some(a=>a===e.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Sa(e))};_onMousedown=e=>{Date.now()-this._lastTouchMs<v0||(this._modality.next(v1(e)?"keyboard":"mouse"),this._mostRecentTarget=Sa(e))};_onTouchstart=e=>{if(M1(e)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Sa(e)};constructor(){let e=f(Le),a=f(N),n=f(m0,{optional:!0});if(this._options=k(k({},k0),n),this.modalityDetected=this._modality.pipe(Xn(1)),this.modalityChanged=this.modalityDetected.pipe(os()),this._platform.isBrowser){let i=f(Aa).createRenderer(null,null);this._listenerCleanups=e.runOutsideAngular(()=>[i.listen(a,"keydown",this._onKeydown,w1),i.listen(a,"mousedown",this._onMousedown,w1),i.listen(a,"touchstart",this._onTouchstart,w1)])}}ngOnDestroy(){this._modality.complete(),this._listenerCleanups?.forEach(e=>e())}static \u0275fac=function(a){return new(a||r)};static \u0275prov=b({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),$n=(function(r){return r[r.IMMEDIATE=0]="IMMEDIATE",r[r.EVENTUAL=1]="EVENTUAL",r})($n||{}),w0=new D("cdk-focus-monitor-default-options"),Uo=g1({passive:!0,capture:!0}),Fg=(()=>{class r{_ngZone=f(Le);_platform=f(je);_inputModalityDetector=f(M0);_origin=null;_lastFocusOrigin;_windowFocused=!1;_windowFocusTimeoutId;_originTimeoutId;_originFromTouchInteraction=!1;_elementInfo=new Map;_monitoredElementCount=0;_rootNodeFocusListenerCount=new Map;_detectionMode;_windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)};_document=f(N);_stopInputModalityDetector=new Y;constructor(){let e=f(w0,{optional:!0});this._detectionMode=e?.detectionMode||$n.IMMEDIATE}_rootNodeFocusAndBlurListener=e=>{let a=Sa(e);for(let n=a;n;n=n.parentElement)e.type==="focus"?this._onFocus(e,n):this._onBlur(e,n)};monitor(e,a=!1){let n=Un(e);if(!this._platform.isBrowser||n.nodeType!==1)return x();let i=k1(n)||this._document,o=this._elementInfo.get(n);if(o)return a&&(o.checkChildren=!0),o.subject;let s={checkChildren:a,subject:new Y,rootNode:i};return this._elementInfo.set(n,s),this._registerGlobalListeners(s),s.subject}stopMonitoring(e){let a=Un(e),n=this._elementInfo.get(a);n&&(n.subject.complete(),this._setClasses(a),this._elementInfo.delete(a),this._removeGlobalListeners(n))}focusVia(e,a,n){let i=Un(e),o=this._document.activeElement;i===o?this._getClosestElementsInfo(i).forEach(([s,c])=>this._originChanged(s,a,c)):(this._setOrigin(a),typeof i.focus=="function"&&i.focus(n))}ngOnDestroy(){this._elementInfo.forEach((e,a)=>this.stopMonitoring(a))}_getWindow(){return this._document.defaultView||window}_getFocusOrigin(e){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(e)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:e&&this._isLastInteractionFromInputLabel(e)?"mouse":"program"}_shouldBeAttributedToTouch(e){return this._detectionMode===$n.EVENTUAL||!!e?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(e,a){e.classList.toggle("cdk-focused",!!a),e.classList.toggle("cdk-touch-focused",a==="touch"),e.classList.toggle("cdk-keyboard-focused",a==="keyboard"),e.classList.toggle("cdk-mouse-focused",a==="mouse"),e.classList.toggle("cdk-program-focused",a==="program")}_setOrigin(e,a=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=e,this._originFromTouchInteraction=e==="touch"&&a,this._detectionMode===$n.IMMEDIATE){clearTimeout(this._originTimeoutId);let n=this._originFromTouchInteraction?v0:1;this._originTimeoutId=setTimeout(()=>this._origin=null,n)}})}_onFocus(e,a){let n=this._elementInfo.get(a),i=Sa(e);!n||!n.checkChildren&&a!==i||this._originChanged(a,this._getFocusOrigin(i),n)}_onBlur(e,a){let n=this._elementInfo.get(a);!n||n.checkChildren&&e.relatedTarget instanceof Node&&a.contains(e.relatedTarget)||(this._setClasses(a),this._emitOrigin(n,null))}_emitOrigin(e,a){e.subject.observers.length&&this._ngZone.run(()=>e.subject.next(a))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;let a=e.rootNode,n=this._rootNodeFocusListenerCount.get(a)||0;n||this._ngZone.runOutsideAngular(()=>{a.addEventListener("focus",this._rootNodeFocusAndBlurListener,Uo),a.addEventListener("blur",this._rootNodeFocusAndBlurListener,Uo)}),this._rootNodeFocusListenerCount.set(a,n+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Te(this._stopInputModalityDetector)).subscribe(i=>{this._setOrigin(i,!0)}))}_removeGlobalListeners(e){let a=e.rootNode;if(this._rootNodeFocusListenerCount.has(a)){let n=this._rootNodeFocusListenerCount.get(a);n>1?this._rootNodeFocusListenerCount.set(a,n-1):(a.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Uo),a.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Uo),this._rootNodeFocusListenerCount.delete(a))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(e,a,n){this._setClasses(e,a),this._emitOrigin(n,a),this._lastFocusOrigin=a}_getClosestElementsInfo(e){let a=[];return this._elementInfo.forEach((n,i)=>{(i===e||n.checkChildren&&i.contains(e))&&a.push([i,n])}),a}_isLastInteractionFromInputLabel(e){let{_mostRecentTarget:a,mostRecentModality:n}=this._inputModalityDetector;if(n!=="mouse"||!a||a===e||e.nodeName!=="INPUT"&&e.nodeName!=="TEXTAREA"||e.disabled)return!1;let i=e.labels;if(i){for(let o=0;o<i.length;o++)if(i[o].contains(a))return!0}return!1}static \u0275fac=function(a){return new(a||r)};static \u0275prov=b({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var $o=new WeakMap,Og=(()=>{class r{_appRef;_injector=f(Ie);_environmentInjector=f(Tt);load(e){let a=this._appRef=this._appRef||this._injector.get(Ra),n=$o.get(a);n||(n={loaders:new Set,refs:[]},$o.set(a,n),a.onDestroy(()=>{$o.get(a)?.refs.forEach(i=>i.destroy()),$o.delete(a)})),n.loaders.has(e)||(n.loaders.add(e),n.refs.push(Cd(e,{environmentInjector:this._environmentInjector})))}static \u0275fac=function(a){return new(a||r)};static \u0275prov=b({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function C1(r){return Array.isArray(r)?r:[r]}var C0=new Set,xa,Go=(()=>{class r{_platform=f(je);_nonce=f(Tr,{optional:!0});_matchMedia;constructor(){this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):Vg}matchMedia(e){return(this._platform.WEBKIT||this._platform.BLINK)&&jg(e,this._nonce),this._matchMedia(e)}static \u0275fac=function(a){return new(a||r)};static \u0275prov=b({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function jg(r,t){if(!C0.has(r))try{xa||(xa=document.createElement("style"),t&&xa.setAttribute("nonce",t),xa.setAttribute("type","text/css"),document.head.appendChild(xa)),xa.sheet&&(xa.sheet.insertRule(`@media ${r} {body{ }}`,0),C0.add(r))}catch(e){console.error(e)}}function Vg(r){return{matches:r==="all"||r==="",media:r,addListener:()=>{},removeListener:()=>{}}}var _1=(()=>{class r{_mediaMatcher=f(Go);_zone=f(Le);_queries=new Map;_destroySubject=new Y;constructor(){}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return _0(C1(e)).some(n=>this._registerQuery(n).mql.matches)}observe(e){let n=_0(C1(e)).map(o=>this._registerQuery(o).observable),i=Ir(n);return i=Wn(i.pipe(Ye(1)),i.pipe(Xn(1),K1(0))),i.pipe(T(o=>{let s={matches:!1,breakpoints:{}};return o.forEach(({matches:c,query:d})=>{s.matches=s.matches||c,s.breakpoints[d]=c}),s}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);let a=this._mediaMatcher.matchMedia(e),i={observable:new Yt(o=>{let s=c=>this._zone.run(()=>o.next(c));return a.addListener(s),()=>{a.removeListener(s)}}).pipe(Dr(a),T(({matches:o})=>({query:e,matches:o})),Te(this._destroySubject)),mql:a};return this._queries.set(e,i),i}static \u0275fac=function(a){return new(a||r)};static \u0275prov=b({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function _0(r){return r.map(t=>t.split(",")).reduce((t,e)=>t.concat(e)).map(t=>t.trim())}var Zt=(function(r){return r[r.NONE=0]="NONE",r[r.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",r[r.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",r})(Zt||{}),b0="cdk-high-contrast-black-on-white",S0="cdk-high-contrast-white-on-black",b1="cdk-high-contrast-active",S1=(()=>{class r{_platform=f(je);_hasCheckedHighContrastMode;_document=f(N);_breakpointSubscription;constructor(){this._breakpointSubscription=f(_1).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return Zt.NONE;let e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);let a=this._document.defaultView||window,n=a&&a.getComputedStyle?a.getComputedStyle(e):null,i=(n&&n.backgroundColor||"").replace(/ /g,"");switch(e.remove(),i){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return Zt.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return Zt.BLACK_ON_WHITE}return Zt.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let e=this._document.body.classList;e.remove(b1,b0,S0),this._hasCheckedHighContrastMode=!0;let a=this.getHighContrastMode();a===Zt.BLACK_ON_WHITE?e.add(b1,b0):a===Zt.WHITE_ON_BLACK&&e.add(b1,S0)}}static \u0275fac=function(a){return new(a||r)};static \u0275prov=b({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var x1={},zg=(()=>{class r{_appId=f(Er);getId(e){return this._appId!=="ng"&&(e+=this._appId),x1.hasOwnProperty(e)||(x1[e]=0),`${e}${x1[e]++}`}static \u0275fac=function(a){return new(a||r)};static \u0275prov=b({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var qg=new D("cdk-dir-doc",{providedIn:"root",factory:Bg});function Bg(){return f(N)}var Hg=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function x0(r){let t=r?.toLowerCase()||"";return t==="auto"&&typeof navigator<"u"&&navigator?.language?Hg.test(navigator.language)?"rtl":"ltr":t==="rtl"?"rtl":"ltr"}var I1=(()=>{class r{get value(){return this.valueSignal()}valueSignal=ne("ltr");change=new le;constructor(){let e=f(qg,{optional:!0});if(e){let a=e.body?e.body.dir:null,n=e.documentElement?e.documentElement.dir:null;this.valueSignal.set(x0(a||n||"ltr"))}}ngOnDestroy(){this.change.complete()}static \u0275fac=function(a){return new(a||r)};static \u0275prov=b({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var L1=(()=>{class r{static \u0275fac=function(a){return new(a||r)};static \u0275mod=ce({type:r});static \u0275inj=ie({})}return r})();var I0=(()=>{class r{constructor(){f(S1)._applyBodyHighContrastModeCssClasses()}static \u0275fac=function(a){return new(a||r)};static \u0275mod=ce({type:r});static \u0275inj=ie({imports:[L1,L1]})}return r})();var Ng=["*",[["mat-toolbar-row"]]],Ug=["*","mat-toolbar-row"],$g=(()=>{class r{static \u0275fac=function(a){return new(a||r)};static \u0275dir=I({type:r,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]})}return r})(),Wo=(()=>{class r{_elementRef=f(W);_platform=f(je);_document=f(N);color;_toolbarRows;constructor(){}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){this._toolbarRows.length}static \u0275fac=function(a){return new(a||r)};static \u0275cmp=Z({type:r,selectors:[["mat-toolbar"]],contentQueries:function(a,n,i){if(a&1&&Be(i,$g,5),a&2){let o;_e(o=be())&&(n._toolbarRows=o)}},hostAttrs:[1,"mat-toolbar"],hostVars:6,hostBindings:function(a,n){a&2&&(Pa(n.color?"mat-"+n.color:""),$e("mat-toolbar-multiple-rows",n._toolbarRows.length>0)("mat-toolbar-single-row",n._toolbarRows.length===0))},inputs:{color:"color"},exportAs:["matToolbar"],ngContentSelectors:Ug,decls:2,vars:0,template:function(a,n){a&1&&(it(Ng),Ce(0),Ce(1,1))},styles:[`.mat-toolbar{background:var(--mat-toolbar-container-background-color, var(--mat-sys-surface));color:var(--mat-toolbar-container-text-color, var(--mat-sys-on-surface))}.mat-toolbar,.mat-toolbar h1,.mat-toolbar h2,.mat-toolbar h3,.mat-toolbar h4,.mat-toolbar h5,.mat-toolbar h6{font-family:var(--mat-toolbar-title-text-font, var(--mat-sys-title-large-font));font-size:var(--mat-toolbar-title-text-size, var(--mat-sys-title-large-size));line-height:var(--mat-toolbar-title-text-line-height, var(--mat-sys-title-large-line-height));font-weight:var(--mat-toolbar-title-text-weight, var(--mat-sys-title-large-weight));letter-spacing:var(--mat-toolbar-title-text-tracking, var(--mat-sys-title-large-tracking));margin:0}@media(forced-colors: active){.mat-toolbar{outline:solid 1px}}.mat-toolbar .mat-form-field-underline,.mat-toolbar .mat-form-field-ripple,.mat-toolbar .mat-focused .mat-form-field-ripple{background-color:currentColor}.mat-toolbar .mat-form-field-label,.mat-toolbar .mat-focused .mat-form-field-label,.mat-toolbar .mat-select-value,.mat-toolbar .mat-select-arrow,.mat-toolbar .mat-form-field.mat-focused .mat-select-arrow{color:inherit}.mat-toolbar .mat-input-element{caret-color:currentColor}.mat-toolbar .mat-mdc-button-base.mat-mdc-button-base.mat-unthemed{--mat-button-text-label-text-color: var(--mat-toolbar-container-text-color, var(--mat-sys-on-surface));--mat-button-outlined-label-text-color: var(--mat-toolbar-container-text-color, var(--mat-sys-on-surface))}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap;height:var(--mat-toolbar-standard-height, 64px)}@media(max-width: 599px){.mat-toolbar-row,.mat-toolbar-single-row{height:var(--mat-toolbar-mobile-height, 56px)}}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%;min-height:var(--mat-toolbar-standard-height, 64px)}@media(max-width: 599px){.mat-toolbar-multiple-rows{min-height:var(--mat-toolbar-mobile-height, 56px)}}
`],encapsulation:2,changeDetection:0})}return r})();var D1=()=>({exact:!0}),L0=class r{static \u0275fac=function(e){return new(e||r)};static \u0275cmp=Z({type:r,selectors:[["app-bottom-nav"]],hostAttrs:[1,"sticky","bottom-0","z-10","w-full"],decls:8,vars:9,consts:[["base","routerLinkActive"],["weeklyCheck","routerLinkActive"],["monthlyCheck","routerLinkActive"],[1,"flex","w-full!","items-center","justify-center","border-t-1","bg-indigo-100!"],[1,"flex","items-center","justify-center","gap-3"],["maffiButton","","icon","HandCoins","routerLink","base","routerLinkActive","",3,"routerLinkActiveOptions","theme"],["maffiButton","","icon","ReceiptEuro","routerLink","weekly-check","routerLinkActive","",3,"routerLinkActiveOptions","theme"],["maffiButton","","icon","Calendar","routerLink","monthly-check","routerLinkActive","",3,"routerLinkActiveOptions","theme"]],template:function(e,a){if(e&1&&(F(0,"mat-toolbar",3)(1,"div",4),fe(2,"button",5,0)(4,"button",6,1)(6,"button",7,2),V()()),e&2){let n=Ta(3),i=Ta(5),o=Ta(7);j(2),we("routerLinkActiveOptions",ai(6,D1))("theme",n.isActive?"plain":"inactive"),j(2),we("routerLinkActiveOptions",ai(7,D1))("theme",i.isActive?"plain":"inactive"),j(2),we("routerLinkActiveOptions",ai(8,D1))("theme",o.isActive?"plain":"inactive")}},dependencies:[Kt,Ja,ac,Wo],encapsulation:2})};var D0=class r{usersFacade=f(fr);title=De.required();logout(){this.usersFacade.logout()}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=Z({type:r,selectors:[["app-header"]],inputs:{title:[1,"title"]},decls:4,vars:1,consts:[[1,"sticky","top-0","z-10","flex","justify-between","border-b-1","bg-indigo-100!"],[1,"text-2xl!"],["maffiButton","","icon","LogOut",3,"click"]],template:function(e,a){e&1&&(F(0,"mat-toolbar",0)(1,"h1",1),wt(2),V(),F(3,"button",2),Pe("click",function(){return a.logout()}),V()()),e&2&&(j(2),gd(a.title()))},dependencies:[Wo,Kt],encapsulation:2})};function Ko(r){return r&&typeof r.connect=="function"&&!(r instanceof br)}var Xt=(function(r){return r[r.REPLACED=0]="REPLACED",r[r.INSERTED=1]="INSERTED",r[r.MOVED=2]="MOVED",r[r.REMOVED=3]="REMOVED",r})(Xt||{}),wr=new D("_ViewRepeater");var Ia=class{applyChanges(t,e,a,n,i){t.forEachOperation((o,s,c)=>{let d,l;if(o.previousIndex==null){let h=a(o,s,c);d=e.createEmbeddedView(h.templateRef,h.context,h.index),l=Xt.INSERTED}else c==null?(e.remove(s),l=Xt.REMOVED):(d=e.get(s),e.move(d,c),l=Xt.MOVED);i&&i({context:d?.context,operation:l,record:o})})}detach(){}};var Gg=20,A0=(()=>{class r{_platform=f(je);_listeners;_viewportSize;_change=new Y;_document=f(N);constructor(){let e=f(Le),a=f(Aa).createRenderer(null,null);e.runOutsideAngular(()=>{if(this._platform.isBrowser){let n=i=>this._change.next(i);this._listeners=[a.listen("window","resize",n),a.listen("window","orientationchange",n)]}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){this._listeners?.forEach(e=>e()),this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){let e=this.getViewportScrollPosition(),{width:a,height:n}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+n,right:e.left+a,height:n,width:a}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let e=this._document,a=this._getWindow(),n=e.documentElement,i=n.getBoundingClientRect(),o=-i.top||e.body.scrollTop||a.scrollY||n.scrollTop||0,s=-i.left||e.body.scrollLeft||a.scrollX||n.scrollLeft||0;return{top:o,left:s}}change(e=Gg){return e>0?this._change.pipe(Zn(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}static \u0275fac=function(a){return new(a||r)};static \u0275prov=b({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var Wg=[[["caption"]],[["colgroup"],["col"]],"*"],Kg=["caption","colgroup, col","*"];function Zg(r,t){r&1&&Ce(0,2)}function Xg(r,t){r&1&&(F(0,"thead",0),ge(1,1),V(),F(2,"tbody",0),ge(3,2)(4,3),V(),F(5,"tfoot",0),ge(6,4),V())}function Jg(r,t){r&1&&ge(0,1)(1,2)(2,3)(3,4)}var ct=new D("CDK_TABLE");var Yo=(()=>{class r{template=f(et);constructor(){}static \u0275fac=function(a){return new(a||r)};static \u0275dir=I({type:r,selectors:[["","cdkCellDef",""]]})}return r})(),P0=(()=>{class r{template=f(et);constructor(){}static \u0275fac=function(a){return new(a||r)};static \u0275dir=I({type:r,selectors:[["","cdkHeaderCellDef",""]]})}return r})(),Qo=(()=>{class r{template=f(et);constructor(){}static \u0275fac=function(a){return new(a||r)};static \u0275dir=I({type:r,selectors:[["","cdkFooterCellDef",""]]})}return r})(),Cr=(()=>{class r{_table=f(ct,{optional:!0});_hasStickyChanged=!1;get name(){return this._name}set name(e){this._setNameInput(e)}_name;get sticky(){return this._sticky}set sticky(e){e!==this._sticky&&(this._sticky=e,this._hasStickyChanged=!0)}_sticky=!1;get stickyEnd(){return this._stickyEnd}set stickyEnd(e){e!==this._stickyEnd&&(this._stickyEnd=e,this._hasStickyChanged=!0)}_stickyEnd=!1;cell;headerCell;footerCell;cssClassFriendlyName;_columnCssClassName;constructor(){}hasStickyChanged(){let e=this._hasStickyChanged;return this.resetStickyChanged(),e}resetStickyChanged(){this._hasStickyChanged=!1}_updateColumnCssClassName(){this._columnCssClassName=[`cdk-column-${this.cssClassFriendlyName}`]}_setNameInput(e){e&&(this._name=e,this.cssClassFriendlyName=e.replace(/[^a-z0-9_-]/gi,"-"),this._updateColumnCssClassName())}static \u0275fac=function(a){return new(a||r)};static \u0275dir=I({type:r,selectors:[["","cdkColumnDef",""]],contentQueries:function(a,n,i){if(a&1&&(Be(i,Yo,5),Be(i,P0,5),Be(i,Qo,5)),a&2){let o;_e(o=be())&&(n.cell=o.first),_e(o=be())&&(n.headerCell=o.first),_e(o=be())&&(n.footerCell=o.first)}},inputs:{name:[0,"cdkColumnDef","name"],sticky:[2,"sticky","sticky",ke],stickyEnd:[2,"stickyEnd","stickyEnd",ke]},features:[ae([{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:r}])]})}return r})(),Xo=class{constructor(t,e){e.nativeElement.classList.add(...t._columnCssClassName)}};var F0=(()=>{class r extends Xo{constructor(){let e=f(Cr),a=f(W);super(e,a);let n=e._table?._getCellRole();n&&a.nativeElement.setAttribute("role",n)}static \u0275fac=function(a){return new(a||r)};static \u0275dir=I({type:r,selectors:[["cdk-footer-cell"],["td","cdk-footer-cell",""]],hostAttrs:[1,"cdk-footer-cell"],features:[$]})}return r})(),O0=(()=>{class r extends Xo{constructor(){let e=f(Cr),a=f(W);super(e,a);let n=e._table?._getCellRole();n&&a.nativeElement.setAttribute("role",n)}static \u0275fac=function(a){return new(a||r)};static \u0275dir=I({type:r,selectors:[["cdk-cell"],["td","cdk-cell",""]],hostAttrs:[1,"cdk-cell"],features:[$]})}return r})();var R1=(()=>{class r{template=f(et);_differs=f(jt);columns;_columnsDiffer;constructor(){}ngOnChanges(e){if(!this._columnsDiffer){let a=e.columns&&e.columns.currentValue||[];this._columnsDiffer=this._differs.find(a).create(),this._columnsDiffer.diff(a)}}getColumnsDiff(){return this._columnsDiffer.diff(this.columns)}extractCellTemplate(e){return this instanceof E1?e.headerCell.template:this instanceof Gn?e.footerCell.template:e.cell.template}static \u0275fac=function(a){return new(a||r)};static \u0275dir=I({type:r,features:[oe]})}return r})(),E1=(()=>{class r extends R1{_table=f(ct,{optional:!0});_hasStickyChanged=!1;get sticky(){return this._sticky}set sticky(e){e!==this._sticky&&(this._sticky=e,this._hasStickyChanged=!0)}_sticky=!1;constructor(){super(f(et),f(jt))}ngOnChanges(e){super.ngOnChanges(e)}hasStickyChanged(){let e=this._hasStickyChanged;return this.resetStickyChanged(),e}resetStickyChanged(){this._hasStickyChanged=!1}static \u0275fac=function(a){return new(a||r)};static \u0275dir=I({type:r,selectors:[["","cdkHeaderRowDef",""]],inputs:{columns:[0,"cdkHeaderRowDef","columns"],sticky:[2,"cdkHeaderRowDefSticky","sticky",ke]},features:[$,oe]})}return r})(),Gn=(()=>{class r extends R1{_table=f(ct,{optional:!0});_hasStickyChanged=!1;get sticky(){return this._sticky}set sticky(e){e!==this._sticky&&(this._sticky=e,this._hasStickyChanged=!0)}_sticky=!1;constructor(){super(f(et),f(jt))}ngOnChanges(e){super.ngOnChanges(e)}hasStickyChanged(){let e=this._hasStickyChanged;return this.resetStickyChanged(),e}resetStickyChanged(){this._hasStickyChanged=!1}static \u0275fac=function(a){return new(a||r)};static \u0275dir=I({type:r,selectors:[["","cdkFooterRowDef",""]],inputs:{columns:[0,"cdkFooterRowDef","columns"],sticky:[2,"cdkFooterRowDefSticky","sticky",ke]},features:[$,oe]})}return r})(),es=(()=>{class r extends R1{_table=f(ct,{optional:!0});when;constructor(){super(f(et),f(jt))}static \u0275fac=function(a){return new(a||r)};static \u0275dir=I({type:r,selectors:[["","cdkRowDef",""]],inputs:{columns:[0,"cdkRowDefColumns","columns"],when:[0,"cdkRowDefWhen","when"]},features:[$]})}return r})(),La=(()=>{class r{_viewContainer=f(at);cells;context;static mostRecentCellOutlet=null;constructor(){r.mostRecentCellOutlet=this}ngOnDestroy(){r.mostRecentCellOutlet===this&&(r.mostRecentCellOutlet=null)}static \u0275fac=function(a){return new(a||r)};static \u0275dir=I({type:r,selectors:[["","cdkCellOutlet",""]]})}return r})();var T1=(()=>{class r{static \u0275fac=function(a){return new(a||r)};static \u0275cmp=Z({type:r,selectors:[["cdk-footer-row"],["tr","cdk-footer-row",""]],hostAttrs:["role","row",1,"cdk-footer-row"],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(a,n){a&1&&ge(0,0)},dependencies:[La],encapsulation:2})}return r})(),P1=(()=>{class r{static \u0275fac=function(a){return new(a||r)};static \u0275cmp=Z({type:r,selectors:[["cdk-row"],["tr","cdk-row",""]],hostAttrs:["role","row",1,"cdk-row"],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(a,n){a&1&&ge(0,0)},dependencies:[La],encapsulation:2})}return r})(),j0=(()=>{class r{templateRef=f(et);_contentClassNames=["cdk-no-data-row","cdk-row"];_cellClassNames=["cdk-cell","cdk-no-data-cell"];_cellSelector="td, cdk-cell, [cdk-cell], .cdk-cell";constructor(){}static \u0275fac=function(a){return new(a||r)};static \u0275dir=I({type:r,selectors:[["ng-template","cdkNoDataRow",""]]})}return r})(),R0=["top","bottom","left","right"],A1=class{_isNativeHtmlTable;_stickCellCss;_isBrowser;_needsPositionStickyOnElement;direction;_positionListener;_tableInjector;_elemSizeCache=new WeakMap;_resizeObserver=globalThis?.ResizeObserver?new globalThis.ResizeObserver(t=>this._updateCachedSizes(t)):null;_updatedStickyColumnsParamsToReplay=[];_stickyColumnsReplayTimeout=null;_cachedCellWidths=[];_borderCellCss;_destroyed=!1;constructor(t,e,a=!0,n=!0,i,o,s){this._isNativeHtmlTable=t,this._stickCellCss=e,this._isBrowser=a,this._needsPositionStickyOnElement=n,this.direction=i,this._positionListener=o,this._tableInjector=s,this._borderCellCss={top:`${e}-border-elem-top`,bottom:`${e}-border-elem-bottom`,left:`${e}-border-elem-left`,right:`${e}-border-elem-right`}}clearStickyPositioning(t,e){(e.includes("left")||e.includes("right"))&&this._removeFromStickyColumnReplayQueue(t);let a=[];for(let n of t)n.nodeType===n.ELEMENT_NODE&&a.push(n,...Array.from(n.children));Mt({write:()=>{for(let n of a)this._removeStickyStyle(n,e)}},{injector:this._tableInjector})}updateStickyColumns(t,e,a,n=!0,i=!0){if(!t.length||!this._isBrowser||!(e.some(g=>g)||a.some(g=>g))){this._positionListener?.stickyColumnsUpdated({sizes:[]}),this._positionListener?.stickyEndColumnsUpdated({sizes:[]});return}let o=t[0],s=o.children.length,c=this.direction==="rtl",d=c?"right":"left",l=c?"left":"right",h=e.lastIndexOf(!0),p=a.indexOf(!0),u,y,m;i&&this._updateStickyColumnReplayQueue({rows:[...t],stickyStartStates:[...e],stickyEndStates:[...a]}),Mt({earlyRead:()=>{u=this._getCellWidths(o,n),y=this._getStickyStartColumnPositions(u,e),m=this._getStickyEndColumnPositions(u,a)},write:()=>{for(let g of t)for(let v=0;v<s;v++){let C=g.children[v];e[v]&&this._addStickyStyle(C,d,y[v],v===h),a[v]&&this._addStickyStyle(C,l,m[v],v===p)}this._positionListener&&u.some(g=>!!g)&&(this._positionListener.stickyColumnsUpdated({sizes:h===-1?[]:u.slice(0,h+1).map((g,v)=>e[v]?g:null)}),this._positionListener.stickyEndColumnsUpdated({sizes:p===-1?[]:u.slice(p).map((g,v)=>a[v+p]?g:null).reverse()}))}},{injector:this._tableInjector})}stickRows(t,e,a){if(!this._isBrowser)return;let n=a==="bottom"?t.slice().reverse():t,i=a==="bottom"?e.slice().reverse():e,o=[],s=[],c=[];Mt({earlyRead:()=>{for(let d=0,l=0;d<n.length;d++){if(!i[d])continue;o[d]=l;let h=n[d];c[d]=this._isNativeHtmlTable?Array.from(h.children):[h];let p=this._retrieveElementSize(h).height;l+=p,s[d]=p}},write:()=>{let d=i.lastIndexOf(!0);for(let l=0;l<n.length;l++){if(!i[l])continue;let h=o[l],p=l===d;for(let u of c[l])this._addStickyStyle(u,a,h,p)}a==="top"?this._positionListener?.stickyHeaderRowsUpdated({sizes:s,offsets:o,elements:c}):this._positionListener?.stickyFooterRowsUpdated({sizes:s,offsets:o,elements:c})}},{injector:this._tableInjector})}updateStickyFooterContainer(t,e){this._isNativeHtmlTable&&Mt({write:()=>{let a=t.querySelector("tfoot");a&&(e.some(n=>!n)?this._removeStickyStyle(a,["bottom"]):this._addStickyStyle(a,"bottom",0,!1))}},{injector:this._tableInjector})}destroy(){this._stickyColumnsReplayTimeout&&clearTimeout(this._stickyColumnsReplayTimeout),this._resizeObserver?.disconnect(),this._destroyed=!0}_removeStickyStyle(t,e){if(!t.classList.contains(this._stickCellCss))return;for(let n of e)t.style[n]="",t.classList.remove(this._borderCellCss[n]);R0.some(n=>e.indexOf(n)===-1&&t.style[n])?t.style.zIndex=this._getCalculatedZIndex(t):(t.style.zIndex="",this._needsPositionStickyOnElement&&(t.style.position=""),t.classList.remove(this._stickCellCss))}_addStickyStyle(t,e,a,n){t.classList.add(this._stickCellCss),n&&t.classList.add(this._borderCellCss[e]),t.style[e]=`${a}px`,t.style.zIndex=this._getCalculatedZIndex(t),this._needsPositionStickyOnElement&&(t.style.cssText+="position: -webkit-sticky; position: sticky; ")}_getCalculatedZIndex(t){let e={top:100,bottom:10,left:1,right:1},a=0;for(let n of R0)t.style[n]&&(a+=e[n]);return a?`${a}`:""}_getCellWidths(t,e=!0){if(!e&&this._cachedCellWidths.length)return this._cachedCellWidths;let a=[],n=t.children;for(let i=0;i<n.length;i++){let o=n[i];a.push(this._retrieveElementSize(o).width)}return this._cachedCellWidths=a,a}_getStickyStartColumnPositions(t,e){let a=[],n=0;for(let i=0;i<t.length;i++)e[i]&&(a[i]=n,n+=t[i]);return a}_getStickyEndColumnPositions(t,e){let a=[],n=0;for(let i=t.length;i>0;i--)e[i]&&(a[i]=n,n+=t[i]);return a}_retrieveElementSize(t){let e=this._elemSizeCache.get(t);if(e)return e;let a=t.getBoundingClientRect(),n={width:a.width,height:a.height};return this._resizeObserver&&(this._elemSizeCache.set(t,n),this._resizeObserver.observe(t,{box:"border-box"})),n}_updateStickyColumnReplayQueue(t){this._removeFromStickyColumnReplayQueue(t.rows),this._stickyColumnsReplayTimeout||this._updatedStickyColumnsParamsToReplay.push(t)}_removeFromStickyColumnReplayQueue(t){let e=new Set(t);for(let a of this._updatedStickyColumnsParamsToReplay)a.rows=a.rows.filter(n=>!e.has(n));this._updatedStickyColumnsParamsToReplay=this._updatedStickyColumnsParamsToReplay.filter(a=>!!a.rows.length)}_updateCachedSizes(t){let e=!1;for(let a of t){let n=a.borderBoxSize?.length?{width:a.borderBoxSize[0].inlineSize,height:a.borderBoxSize[0].blockSize}:{width:a.contentRect.width,height:a.contentRect.height};n.width!==this._elemSizeCache.get(a.target)?.width&&Yg(a.target)&&(e=!0),this._elemSizeCache.set(a.target,n)}e&&this._updatedStickyColumnsParamsToReplay.length&&(this._stickyColumnsReplayTimeout&&clearTimeout(this._stickyColumnsReplayTimeout),this._stickyColumnsReplayTimeout=setTimeout(()=>{if(!this._destroyed){for(let a of this._updatedStickyColumnsParamsToReplay)this.updateStickyColumns(a.rows,a.stickyStartStates,a.stickyEndStates,!0,!1);this._updatedStickyColumnsParamsToReplay=[],this._stickyColumnsReplayTimeout=null}},0))}};function Yg(r){return["cdk-cell","cdk-header-cell","cdk-footer-cell"].some(t=>r.classList.contains(t))}var Jo=new D("CDK_SPL");var F1=(()=>{class r{viewContainer=f(at);elementRef=f(W);constructor(){let e=f(ct);e._rowOutlet=this,e._outletAssigned()}static \u0275fac=function(a){return new(a||r)};static \u0275dir=I({type:r,selectors:[["","rowOutlet",""]]})}return r})(),O1=(()=>{class r{viewContainer=f(at);elementRef=f(W);constructor(){let e=f(ct);e._headerRowOutlet=this,e._outletAssigned()}static \u0275fac=function(a){return new(a||r)};static \u0275dir=I({type:r,selectors:[["","headerRowOutlet",""]]})}return r})(),j1=(()=>{class r{viewContainer=f(at);elementRef=f(W);constructor(){let e=f(ct);e._footerRowOutlet=this,e._outletAssigned()}static \u0275fac=function(a){return new(a||r)};static \u0275dir=I({type:r,selectors:[["","footerRowOutlet",""]]})}return r})(),V1=(()=>{class r{viewContainer=f(at);elementRef=f(W);constructor(){let e=f(ct);e._noDataRowOutlet=this,e._outletAssigned()}static \u0275fac=function(a){return new(a||r)};static \u0275dir=I({type:r,selectors:[["","noDataRowOutlet",""]]})}return r})(),z1=(()=>{class r{_differs=f(jt);_changeDetectorRef=f(Ge);_elementRef=f(W);_dir=f(I1,{optional:!0});_platform=f(je);_viewRepeater=f(wr);_viewportRuler=f(A0);_stickyPositioningListener=f(Jo,{optional:!0,skipSelf:!0});_document=f(N);_data;_onDestroy=new Y;_renderRows;_renderChangeSubscription;_columnDefsByName=new Map;_rowDefs;_headerRowDefs;_footerRowDefs;_dataDiffer;_defaultRowDef;_customColumnDefs=new Set;_customRowDefs=new Set;_customHeaderRowDefs=new Set;_customFooterRowDefs=new Set;_customNoDataRow;_headerRowDefChanged=!0;_footerRowDefChanged=!0;_stickyColumnStylesNeedReset=!0;_forceRecalculateCellWidths=!0;_cachedRenderRowsMap=new Map;_isNativeHtmlTable;_stickyStyler;stickyCssClass="cdk-table-sticky";needsPositionStickyOnElement=!0;_isServer;_isShowingNoDataRow=!1;_hasAllOutlets=!1;_hasInitialized=!1;_getCellRole(){if(this._cellRoleInternal===void 0){let e=this._elementRef.nativeElement.getAttribute("role");return e==="grid"||e==="treegrid"?"gridcell":"cell"}return this._cellRoleInternal}_cellRoleInternal=void 0;get trackBy(){return this._trackByFn}set trackBy(e){this._trackByFn=e}_trackByFn;get dataSource(){return this._dataSource}set dataSource(e){this._dataSource!==e&&this._switchDataSource(e)}_dataSource;get multiTemplateDataRows(){return this._multiTemplateDataRows}set multiTemplateDataRows(e){this._multiTemplateDataRows=e,this._rowOutlet&&this._rowOutlet.viewContainer.length&&(this._forceRenderDataRows(),this.updateStickyColumnStyles())}_multiTemplateDataRows=!1;get fixedLayout(){return this._fixedLayout}set fixedLayout(e){this._fixedLayout=e,this._forceRecalculateCellWidths=!0,this._stickyColumnStylesNeedReset=!0}_fixedLayout=!1;contentChanged=new le;viewChange=new Me({start:0,end:Number.MAX_VALUE});_rowOutlet;_headerRowOutlet;_footerRowOutlet;_noDataRowOutlet;_contentColumnDefs;_contentRowDefs;_contentHeaderRowDefs;_contentFooterRowDefs;_noDataRow;_injector=f(Ie);constructor(){f(new ri("role"),{optional:!0})||this._elementRef.nativeElement.setAttribute("role","table"),this._isServer=!this._platform.isBrowser,this._isNativeHtmlTable=this._elementRef.nativeElement.nodeName==="TABLE",this._dataDiffer=this._differs.find([]).create((a,n)=>this.trackBy?this.trackBy(n.dataIndex,n.data):n)}ngOnInit(){this._setupStickyStyler(),this._viewportRuler.change().pipe(Te(this._onDestroy)).subscribe(()=>{this._forceRecalculateCellWidths=!0})}ngAfterContentInit(){this._hasInitialized=!0}ngAfterContentChecked(){this._canRender()&&this._render()}ngOnDestroy(){this._stickyStyler?.destroy(),[this._rowOutlet?.viewContainer,this._headerRowOutlet?.viewContainer,this._footerRowOutlet?.viewContainer,this._cachedRenderRowsMap,this._customColumnDefs,this._customRowDefs,this._customHeaderRowDefs,this._customFooterRowDefs,this._columnDefsByName].forEach(e=>{e?.clear()}),this._headerRowDefs=[],this._footerRowDefs=[],this._defaultRowDef=null,this._onDestroy.next(),this._onDestroy.complete(),Ko(this.dataSource)&&this.dataSource.disconnect(this)}renderRows(){this._renderRows=this._getAllRenderRows();let e=this._dataDiffer.diff(this._renderRows);if(!e){this._updateNoDataRow(),this.contentChanged.next();return}let a=this._rowOutlet.viewContainer;this._viewRepeater.applyChanges(e,a,(n,i,o)=>this._getEmbeddedViewArgs(n.item,o),n=>n.item.data,n=>{n.operation===Xt.INSERTED&&n.context&&this._renderCellTemplateForItem(n.record.item.rowDef,n.context)}),this._updateRowIndexContext(),e.forEachIdentityChange(n=>{let i=a.get(n.currentIndex);i.context.$implicit=n.item.data}),this._updateNoDataRow(),this.contentChanged.next(),this.updateStickyColumnStyles()}addColumnDef(e){this._customColumnDefs.add(e)}removeColumnDef(e){this._customColumnDefs.delete(e)}addRowDef(e){this._customRowDefs.add(e)}removeRowDef(e){this._customRowDefs.delete(e)}addHeaderRowDef(e){this._customHeaderRowDefs.add(e),this._headerRowDefChanged=!0}removeHeaderRowDef(e){this._customHeaderRowDefs.delete(e),this._headerRowDefChanged=!0}addFooterRowDef(e){this._customFooterRowDefs.add(e),this._footerRowDefChanged=!0}removeFooterRowDef(e){this._customFooterRowDefs.delete(e),this._footerRowDefChanged=!0}setNoDataRow(e){this._customNoDataRow=e}updateStickyHeaderRowStyles(){let e=this._getRenderedRows(this._headerRowOutlet);if(this._isNativeHtmlTable){let n=E0(this._headerRowOutlet,"thead");n&&(n.style.display=e.length?"":"none")}let a=this._headerRowDefs.map(n=>n.sticky);this._stickyStyler.clearStickyPositioning(e,["top"]),this._stickyStyler.stickRows(e,a,"top"),this._headerRowDefs.forEach(n=>n.resetStickyChanged())}updateStickyFooterRowStyles(){let e=this._getRenderedRows(this._footerRowOutlet);if(this._isNativeHtmlTable){let n=E0(this._footerRowOutlet,"tfoot");n&&(n.style.display=e.length?"":"none")}let a=this._footerRowDefs.map(n=>n.sticky);this._stickyStyler.clearStickyPositioning(e,["bottom"]),this._stickyStyler.stickRows(e,a,"bottom"),this._stickyStyler.updateStickyFooterContainer(this._elementRef.nativeElement,a),this._footerRowDefs.forEach(n=>n.resetStickyChanged())}updateStickyColumnStyles(){let e=this._getRenderedRows(this._headerRowOutlet),a=this._getRenderedRows(this._rowOutlet),n=this._getRenderedRows(this._footerRowOutlet);(this._isNativeHtmlTable&&!this._fixedLayout||this._stickyColumnStylesNeedReset)&&(this._stickyStyler.clearStickyPositioning([...e,...a,...n],["left","right"]),this._stickyColumnStylesNeedReset=!1),e.forEach((i,o)=>{this._addStickyColumnStyles([i],this._headerRowDefs[o])}),this._rowDefs.forEach(i=>{let o=[];for(let s=0;s<a.length;s++)this._renderRows[s].rowDef===i&&o.push(a[s]);this._addStickyColumnStyles(o,i)}),n.forEach((i,o)=>{this._addStickyColumnStyles([i],this._footerRowDefs[o])}),Array.from(this._columnDefsByName.values()).forEach(i=>i.resetStickyChanged())}_outletAssigned(){!this._hasAllOutlets&&this._rowOutlet&&this._headerRowOutlet&&this._footerRowOutlet&&this._noDataRowOutlet&&(this._hasAllOutlets=!0,this._canRender()&&this._render())}_canRender(){return this._hasAllOutlets&&this._hasInitialized}_render(){this._cacheRowDefs(),this._cacheColumnDefs(),!this._headerRowDefs.length&&!this._footerRowDefs.length&&this._rowDefs.length;let a=this._renderUpdatedColumns()||this._headerRowDefChanged||this._footerRowDefChanged;this._stickyColumnStylesNeedReset=this._stickyColumnStylesNeedReset||a,this._forceRecalculateCellWidths=a,this._headerRowDefChanged&&(this._forceRenderHeaderRows(),this._headerRowDefChanged=!1),this._footerRowDefChanged&&(this._forceRenderFooterRows(),this._footerRowDefChanged=!1),this.dataSource&&this._rowDefs.length>0&&!this._renderChangeSubscription?this._observeRenderChanges():this._stickyColumnStylesNeedReset&&this.updateStickyColumnStyles(),this._checkStickyStates()}_getAllRenderRows(){let e=[],a=this._cachedRenderRowsMap;if(this._cachedRenderRowsMap=new Map,!this._data)return e;for(let n=0;n<this._data.length;n++){let i=this._data[n],o=this._getRenderRowsForData(i,n,a.get(i));this._cachedRenderRowsMap.has(i)||this._cachedRenderRowsMap.set(i,new WeakMap);for(let s=0;s<o.length;s++){let c=o[s],d=this._cachedRenderRowsMap.get(c.data);d.has(c.rowDef)?d.get(c.rowDef).push(c):d.set(c.rowDef,[c]),e.push(c)}}return e}_getRenderRowsForData(e,a,n){return this._getRowDefs(e,a).map(o=>{let s=n&&n.has(o)?n.get(o):[];if(s.length){let c=s.shift();return c.dataIndex=a,c}else return{data:e,rowDef:o,dataIndex:a}})}_cacheColumnDefs(){this._columnDefsByName.clear(),Zo(this._getOwnDefs(this._contentColumnDefs),this._customColumnDefs).forEach(a=>{this._columnDefsByName.has(a.name),this._columnDefsByName.set(a.name,a)})}_cacheRowDefs(){this._headerRowDefs=Zo(this._getOwnDefs(this._contentHeaderRowDefs),this._customHeaderRowDefs),this._footerRowDefs=Zo(this._getOwnDefs(this._contentFooterRowDefs),this._customFooterRowDefs),this._rowDefs=Zo(this._getOwnDefs(this._contentRowDefs),this._customRowDefs);let e=this._rowDefs.filter(a=>!a.when);!this.multiTemplateDataRows&&e.length>1,this._defaultRowDef=e[0]}_renderUpdatedColumns(){let e=(o,s)=>{let c=!!s.getColumnsDiff();return o||c},a=this._rowDefs.reduce(e,!1);a&&this._forceRenderDataRows();let n=this._headerRowDefs.reduce(e,!1);n&&this._forceRenderHeaderRows();let i=this._footerRowDefs.reduce(e,!1);return i&&this._forceRenderFooterRows(),a||n||i}_switchDataSource(e){this._data=[],Ko(this.dataSource)&&this.dataSource.disconnect(this),this._renderChangeSubscription&&(this._renderChangeSubscription.unsubscribe(),this._renderChangeSubscription=null),e||(this._dataDiffer&&this._dataDiffer.diff([]),this._rowOutlet&&this._rowOutlet.viewContainer.clear()),this._dataSource=e}_observeRenderChanges(){if(!this.dataSource)return;let e;Ko(this.dataSource)?e=this.dataSource.connect(this):xr(this.dataSource)?e=this.dataSource:Array.isArray(this.dataSource)&&(e=x(this.dataSource)),this._renderChangeSubscription=e.pipe(Te(this._onDestroy)).subscribe(a=>{this._data=a||[],this.renderRows()})}_forceRenderHeaderRows(){this._headerRowOutlet.viewContainer.length>0&&this._headerRowOutlet.viewContainer.clear(),this._headerRowDefs.forEach((e,a)=>this._renderRow(this._headerRowOutlet,e,a)),this.updateStickyHeaderRowStyles()}_forceRenderFooterRows(){this._footerRowOutlet.viewContainer.length>0&&this._footerRowOutlet.viewContainer.clear(),this._footerRowDefs.forEach((e,a)=>this._renderRow(this._footerRowOutlet,e,a)),this.updateStickyFooterRowStyles()}_addStickyColumnStyles(e,a){let n=Array.from(a?.columns||[]).map(s=>{let c=this._columnDefsByName.get(s);return c}),i=n.map(s=>s.sticky),o=n.map(s=>s.stickyEnd);this._stickyStyler.updateStickyColumns(e,i,o,!this._fixedLayout||this._forceRecalculateCellWidths)}_getRenderedRows(e){let a=[];for(let n=0;n<e.viewContainer.length;n++){let i=e.viewContainer.get(n);a.push(i.rootNodes[0])}return a}_getRowDefs(e,a){if(this._rowDefs.length==1)return[this._rowDefs[0]];let n=[];if(this.multiTemplateDataRows)n=this._rowDefs.filter(i=>!i.when||i.when(a,e));else{let i=this._rowDefs.find(o=>o.when&&o.when(a,e))||this._defaultRowDef;i&&n.push(i)}return n.length,n}_getEmbeddedViewArgs(e,a){let n=e.rowDef,i={$implicit:e.data};return{templateRef:n.template,context:i,index:a}}_renderRow(e,a,n,i={}){let o=e.viewContainer.createEmbeddedView(a.template,i,n);return this._renderCellTemplateForItem(a,i),o}_renderCellTemplateForItem(e,a){for(let n of this._getCellTemplates(e))La.mostRecentCellOutlet&&La.mostRecentCellOutlet._viewContainer.createEmbeddedView(n,a);this._changeDetectorRef.markForCheck()}_updateRowIndexContext(){let e=this._rowOutlet.viewContainer;for(let a=0,n=e.length;a<n;a++){let o=e.get(a).context;o.count=n,o.first=a===0,o.last=a===n-1,o.even=a%2===0,o.odd=!o.even,this.multiTemplateDataRows?(o.dataIndex=this._renderRows[a].dataIndex,o.renderIndex=a):o.index=this._renderRows[a].dataIndex}}_getCellTemplates(e){return!e||!e.columns?[]:Array.from(e.columns,a=>{let n=this._columnDefsByName.get(a);return e.extractCellTemplate(n)})}_forceRenderDataRows(){this._dataDiffer.diff([]),this._rowOutlet.viewContainer.clear(),this.renderRows()}_checkStickyStates(){let e=(a,n)=>a||n.hasStickyChanged();this._headerRowDefs.reduce(e,!1)&&this.updateStickyHeaderRowStyles(),this._footerRowDefs.reduce(e,!1)&&this.updateStickyFooterRowStyles(),Array.from(this._columnDefsByName.values()).reduce(e,!1)&&(this._stickyColumnStylesNeedReset=!0,this.updateStickyColumnStyles())}_setupStickyStyler(){let e=this._dir?this._dir.value:"ltr";this._stickyStyler=new A1(this._isNativeHtmlTable,this.stickyCssClass,this._platform.isBrowser,this.needsPositionStickyOnElement,e,this._stickyPositioningListener,this._injector),(this._dir?this._dir.change:x()).pipe(Te(this._onDestroy)).subscribe(a=>{this._stickyStyler.direction=a,this.updateStickyColumnStyles()})}_getOwnDefs(e){return e.filter(a=>!a._table||a._table===this)}_updateNoDataRow(){let e=this._customNoDataRow||this._noDataRow;if(!e)return;let a=this._rowOutlet.viewContainer.length===0;if(a===this._isShowingNoDataRow)return;let n=this._noDataRowOutlet.viewContainer;if(a){let i=n.createEmbeddedView(e.templateRef),o=i.rootNodes[0];if(i.rootNodes.length===1&&o?.nodeType===this._document.ELEMENT_NODE){o.setAttribute("role","row"),o.classList.add(...e._contentClassNames);let s=o.querySelectorAll(e._cellSelector);for(let c=0;c<s.length;c++)s[c].classList.add(...e._cellClassNames)}}else n.clear();this._isShowingNoDataRow=a,this._changeDetectorRef.markForCheck()}static \u0275fac=function(a){return new(a||r)};static \u0275cmp=Z({type:r,selectors:[["cdk-table"],["table","cdk-table",""]],contentQueries:function(a,n,i){if(a&1&&(Be(i,j0,5),Be(i,Cr,5),Be(i,es,5),Be(i,E1,5),Be(i,Gn,5)),a&2){let o;_e(o=be())&&(n._noDataRow=o.first),_e(o=be())&&(n._contentColumnDefs=o),_e(o=be())&&(n._contentRowDefs=o),_e(o=be())&&(n._contentHeaderRowDefs=o),_e(o=be())&&(n._contentFooterRowDefs=o)}},hostAttrs:[1,"cdk-table"],hostVars:2,hostBindings:function(a,n){a&2&&$e("cdk-table-fixed-layout",n.fixedLayout)},inputs:{trackBy:"trackBy",dataSource:"dataSource",multiTemplateDataRows:[2,"multiTemplateDataRows","multiTemplateDataRows",ke],fixedLayout:[2,"fixedLayout","fixedLayout",ke]},outputs:{contentChanged:"contentChanged"},exportAs:["cdkTable"],features:[ae([{provide:ct,useExisting:r},{provide:wr,useClass:Ia},{provide:Jo,useValue:null}])],ngContentSelectors:Kg,decls:5,vars:2,consts:[["role","rowgroup"],["headerRowOutlet",""],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(a,n){a&1&&(it(Wg),Ce(0),Ce(1,1),ze(2,Zg,1,0),ze(3,Xg,7,0)(4,Jg,4,0)),a&2&&(j(2),qe(n._isServer?2:-1),j(),qe(n._isNativeHtmlTable?3:4))},dependencies:[O1,F1,V1,j1],styles:[`.cdk-table-fixed-layout{table-layout:fixed}
`],encapsulation:2})}return r})();function Zo(r,t){return r.concat(Array.from(t))}function E0(r,t){let e=t.toUpperCase(),a=r.viewContainer.element.nativeElement;for(;a;){let n=a.nodeType===1?a.nodeName:null;if(n===e)return a;if(n==="TABLE")break;a=a.parentNode}return null}function v_(r){return r!=null&&`${r}`!="false"}var Qg=[[["caption"]],[["colgroup"],["col"]],"*"],em=["caption","colgroup, col","*"];function tm(r,t){r&1&&Ce(0,2)}function am(r,t){r&1&&(F(0,"thead",0),ge(1,1),V(),F(2,"tbody",2),ge(3,3)(4,4),V(),F(5,"tfoot",0),ge(6,5),V())}function rm(r,t){r&1&&ge(0,1)(1,3)(2,4)(3,5)}var V0=(()=>{class r extends z1{stickyCssClass="mat-mdc-table-sticky";needsPositionStickyOnElement=!1;static \u0275fac=(()=>{let e;return function(n){return(e||(e=se(r)))(n||r)}})();static \u0275cmp=Z({type:r,selectors:[["mat-table"],["table","mat-table",""]],hostAttrs:[1,"mat-mdc-table","mdc-data-table__table"],hostVars:2,hostBindings:function(a,n){a&2&&$e("mdc-table-fixed-layout",n.fixedLayout)},exportAs:["matTable"],features:[ae([{provide:z1,useExisting:r},{provide:ct,useExisting:r},{provide:wr,useClass:Ia},{provide:Jo,useValue:null}]),$],ngContentSelectors:em,decls:5,vars:2,consts:[["role","rowgroup"],["headerRowOutlet",""],["role","rowgroup",1,"mdc-data-table__content"],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(a,n){a&1&&(it(Qg),Ce(0),Ce(1,1),ze(2,tm,1,0),ze(3,am,7,0)(4,rm,4,0)),a&2&&(j(2),qe(n._isServer?2:-1),j(),qe(n._isNativeHtmlTable?3:4))},dependencies:[O1,F1,V1,j1],styles:[`.mat-mdc-table-sticky{position:sticky !important}mat-table{display:block}mat-header-row{min-height:var(--mat-table-header-container-height, 56px)}mat-row{min-height:var(--mat-table-row-item-container-height, 52px)}mat-footer-row{min-height:var(--mat-table-footer-container-height, 52px)}mat-row,mat-header-row,mat-footer-row{display:flex;border-width:0;border-bottom-width:1px;border-style:solid;align-items:center;box-sizing:border-box}mat-cell:first-of-type,mat-header-cell:first-of-type,mat-footer-cell:first-of-type{padding-left:24px}[dir=rtl] mat-cell:first-of-type:not(:only-of-type),[dir=rtl] mat-header-cell:first-of-type:not(:only-of-type),[dir=rtl] mat-footer-cell:first-of-type:not(:only-of-type){padding-left:0;padding-right:24px}mat-cell:last-of-type,mat-header-cell:last-of-type,mat-footer-cell:last-of-type{padding-right:24px}[dir=rtl] mat-cell:last-of-type:not(:only-of-type),[dir=rtl] mat-header-cell:last-of-type:not(:only-of-type),[dir=rtl] mat-footer-cell:last-of-type:not(:only-of-type){padding-right:0;padding-left:24px}mat-cell,mat-header-cell,mat-footer-cell{flex:1;display:flex;align-items:center;overflow:hidden;word-wrap:break-word;min-height:inherit}.mat-mdc-table{min-width:100%;border:0;border-spacing:0;table-layout:auto;white-space:normal;background-color:var(--mat-table-background-color, var(--mat-sys-surface))}.mdc-data-table__cell{box-sizing:border-box;overflow:hidden;text-align:left;text-overflow:ellipsis}[dir=rtl] .mdc-data-table__cell{text-align:right}.mdc-data-table__cell,.mdc-data-table__header-cell{padding:0 16px}.mat-mdc-header-row{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;height:var(--mat-table-header-container-height, 56px);color:var(--mat-table-header-headline-color, var(--mat-sys-on-surface, rgba(0, 0, 0, 0.87)));font-family:var(--mat-table-header-headline-font, var(--mat-sys-title-small-font, Roboto, sans-serif));line-height:var(--mat-table-header-headline-line-height, var(--mat-sys-title-small-line-height));font-size:var(--mat-table-header-headline-size, var(--mat-sys-title-small-size, 14px));font-weight:var(--mat-table-header-headline-weight, var(--mat-sys-title-small-weight, 500))}.mat-mdc-row{height:var(--mat-table-row-item-container-height, 52px);color:var(--mat-table-row-item-label-text-color, var(--mat-sys-on-surface, rgba(0, 0, 0, 0.87)))}.mat-mdc-row,.mdc-data-table__content{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-table-row-item-label-text-font, var(--mat-sys-body-medium-font, Roboto, sans-serif));line-height:var(--mat-table-row-item-label-text-line-height, var(--mat-sys-body-medium-line-height));font-size:var(--mat-table-row-item-label-text-size, var(--mat-sys-body-medium-size, 14px));font-weight:var(--mat-table-row-item-label-text-weight, var(--mat-sys-body-medium-weight))}.mat-mdc-footer-row{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;height:var(--mat-table-footer-container-height, 52px);color:var(--mat-table-row-item-label-text-color, var(--mat-sys-on-surface, rgba(0, 0, 0, 0.87)));font-family:var(--mat-table-footer-supporting-text-font, var(--mat-sys-body-medium-font, Roboto, sans-serif));line-height:var(--mat-table-footer-supporting-text-line-height, var(--mat-sys-body-medium-line-height));font-size:var(--mat-table-footer-supporting-text-size, var(--mat-sys-body-medium-size, 14px));font-weight:var(--mat-table-footer-supporting-text-weight, var(--mat-sys-body-medium-weight));letter-spacing:var(--mat-table-footer-supporting-text-tracking, var(--mat-sys-body-medium-tracking))}.mat-mdc-header-cell{border-bottom-color:var(--mat-table-row-item-outline-color, var(--mat-sys-outline, rgba(0, 0, 0, 0.12)));border-bottom-width:var(--mat-table-row-item-outline-width, 1px);border-bottom-style:solid;letter-spacing:var(--mat-table-header-headline-tracking, var(--mat-sys-title-small-tracking));font-weight:inherit;line-height:inherit;box-sizing:border-box;text-overflow:ellipsis;overflow:hidden;outline:none;text-align:left}[dir=rtl] .mat-mdc-header-cell{text-align:right}.mdc-data-table__row:last-child>.mat-mdc-header-cell{border-bottom:none}.mat-mdc-cell{border-bottom-color:var(--mat-table-row-item-outline-color, var(--mat-sys-outline, rgba(0, 0, 0, 0.12)));border-bottom-width:var(--mat-table-row-item-outline-width, 1px);border-bottom-style:solid;letter-spacing:var(--mat-table-row-item-label-text-tracking, var(--mat-sys-body-medium-tracking));line-height:inherit}.mdc-data-table__row:last-child>.mat-mdc-cell{border-bottom:none}.mat-mdc-footer-cell{letter-spacing:var(--mat-table-row-item-label-text-tracking, var(--mat-sys-body-medium-tracking))}mat-row.mat-mdc-row,mat-header-row.mat-mdc-header-row,mat-footer-row.mat-mdc-footer-row{border-bottom:none}.mat-mdc-table tbody,.mat-mdc-table tfoot,.mat-mdc-table thead,.mat-mdc-cell,.mat-mdc-footer-cell,.mat-mdc-header-row,.mat-mdc-row,.mat-mdc-footer-row,.mat-mdc-table .mat-mdc-header-cell{background:inherit}.mat-mdc-table mat-header-row.mat-mdc-header-row,.mat-mdc-table mat-row.mat-mdc-row,.mat-mdc-table mat-footer-row.mat-mdc-footer-cell{height:unset}mat-header-cell.mat-mdc-header-cell,mat-cell.mat-mdc-cell,mat-footer-cell.mat-mdc-footer-cell{align-self:stretch}
`],encapsulation:2})}return r})(),z0=(()=>{class r extends Yo{static \u0275fac=(()=>{let e;return function(n){return(e||(e=se(r)))(n||r)}})();static \u0275dir=I({type:r,selectors:[["","matCellDef",""]],features:[ae([{provide:Yo,useExisting:r}]),$]})}return r})();var q0=(()=>{class r extends Qo{static \u0275fac=(()=>{let e;return function(n){return(e||(e=se(r)))(n||r)}})();static \u0275dir=I({type:r,selectors:[["","matFooterCellDef",""]],features:[ae([{provide:Qo,useExisting:r}]),$]})}return r})(),B0=(()=>{class r extends Cr{get name(){return this._name}set name(e){this._setNameInput(e)}_updateColumnCssClassName(){super._updateColumnCssClassName(),this._columnCssClassName.push(`mat-column-${this.cssClassFriendlyName}`)}static \u0275fac=(()=>{let e;return function(n){return(e||(e=se(r)))(n||r)}})();static \u0275dir=I({type:r,selectors:[["","matColumnDef",""]],inputs:{name:[0,"matColumnDef","name"]},features:[ae([{provide:Cr,useExisting:r},{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:r}]),$]})}return r})();var H0=(()=>{class r extends F0{static \u0275fac=(()=>{let e;return function(n){return(e||(e=se(r)))(n||r)}})();static \u0275dir=I({type:r,selectors:[["mat-footer-cell"],["td","mat-footer-cell",""]],hostAttrs:[1,"mat-mdc-footer-cell","mdc-data-table__cell"],features:[$]})}return r})(),N0=(()=>{class r extends O0{static \u0275fac=(()=>{let e;return function(n){return(e||(e=se(r)))(n||r)}})();static \u0275dir=I({type:r,selectors:[["mat-cell"],["td","mat-cell",""]],hostAttrs:[1,"mat-mdc-cell","mdc-data-table__cell"],features:[$]})}return r})();var U0=(()=>{class r extends Gn{static \u0275fac=(()=>{let e;return function(n){return(e||(e=se(r)))(n||r)}})();static \u0275dir=I({type:r,selectors:[["","matFooterRowDef",""]],inputs:{columns:[0,"matFooterRowDef","columns"],sticky:[2,"matFooterRowDefSticky","sticky",ke]},features:[ae([{provide:Gn,useExisting:r}]),$]})}return r})(),$0=(()=>{class r extends es{static \u0275fac=(()=>{let e;return function(n){return(e||(e=se(r)))(n||r)}})();static \u0275dir=I({type:r,selectors:[["","matRowDef",""]],inputs:{columns:[0,"matRowDefColumns","columns"],when:[0,"matRowDefWhen","when"]},features:[ae([{provide:es,useExisting:r}]),$]})}return r})();var G0=(()=>{class r extends T1{static \u0275fac=(()=>{let e;return function(n){return(e||(e=se(r)))(n||r)}})();static \u0275cmp=Z({type:r,selectors:[["mat-footer-row"],["tr","mat-footer-row",""]],hostAttrs:["role","row",1,"mat-mdc-footer-row","mdc-data-table__row"],exportAs:["matFooterRow"],features:[ae([{provide:T1,useExisting:r}]),$],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(a,n){a&1&&ge(0,0)},dependencies:[La],encapsulation:2})}return r})(),W0=(()=>{class r extends P1{static \u0275fac=(()=>{let e;return function(n){return(e||(e=se(r)))(n||r)}})();static \u0275cmp=Z({type:r,selectors:[["mat-row"],["tr","mat-row",""]],hostAttrs:["role","row",1,"mat-mdc-row","mdc-data-table__row"],exportAs:["matRow"],features:[ae([{provide:P1,useExisting:r}]),$],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(a,n){a&1&&ge(0,0)},dependencies:[La],encapsulation:2})}return r})();var nm=new D("MATERIAL_ANIMATIONS");var K0=null;function q1(){return f(nm,{optional:!0})?.animationsDisabled||f(nd,{optional:!0})==="NoopAnimations"?"di-disabled":(K0??=f(Go).matchMedia("(prefers-reduced-motion)").matches,K0?"reduced-motion":"enabled")}function B_(){return q1()!=="enabled"}var im=["determinateSpinner"];function om(r,t){if(r&1&&(Ar(),F(0,"svg",11),fe(1,"circle",12),V()),r&2){let e=te();nt("viewBox",e._viewBox()),j(),ra("stroke-dasharray",e._strokeCircumference(),"px")("stroke-dashoffset",e._strokeCircumference()/2,"px")("stroke-width",e._circleStrokeWidth(),"%"),nt("r",e._circleRadius())}}var sm=new D("mat-progress-spinner-default-options",{providedIn:"root",factory:cm});function cm(){return{diameter:Z0}}var Z0=100,dm=10,X0=(()=>{class r{_elementRef=f(W);_noopAnimations;get color(){return this._color||this._defaultColor}set color(e){this._color=e}_color;_defaultColor="primary";_determinateCircle;constructor(){let e=f(sm),a=q1(),n=this._elementRef.nativeElement;this._noopAnimations=a==="di-disabled"&&!!e&&!e._forceAnimations,this.mode=n.nodeName.toLowerCase()==="mat-spinner"?"indeterminate":"determinate",!this._noopAnimations&&a==="reduced-motion"&&n.classList.add("mat-progress-spinner-reduced-motion"),e&&(e.color&&(this.color=this._defaultColor=e.color),e.diameter&&(this.diameter=e.diameter),e.strokeWidth&&(this.strokeWidth=e.strokeWidth))}mode;get value(){return this.mode==="determinate"?this._value:0}set value(e){this._value=Math.max(0,Math.min(100,e||0))}_value=0;get diameter(){return this._diameter}set diameter(e){this._diameter=e||0}_diameter=Z0;get strokeWidth(){return this._strokeWidth??this.diameter/10}set strokeWidth(e){this._strokeWidth=e||0}_strokeWidth;_circleRadius(){return(this.diameter-dm)/2}_viewBox(){let e=this._circleRadius()*2+this.strokeWidth;return`0 0 ${e} ${e}`}_strokeCircumference(){return 2*Math.PI*this._circleRadius()}_strokeDashOffset(){return this.mode==="determinate"?this._strokeCircumference()*(100-this._value)/100:null}_circleStrokeWidth(){return this.strokeWidth/this.diameter*100}static \u0275fac=function(a){return new(a||r)};static \u0275cmp=Z({type:r,selectors:[["mat-progress-spinner"],["mat-spinner"]],viewQuery:function(a,n){if(a&1&&ei(im,5),a&2){let i;_e(i=be())&&(n._determinateCircle=i.first)}},hostAttrs:["role","progressbar","tabindex","-1",1,"mat-mdc-progress-spinner","mdc-circular-progress"],hostVars:18,hostBindings:function(a,n){a&2&&(nt("aria-valuemin",0)("aria-valuemax",100)("aria-valuenow",n.mode==="determinate"?n.value:null)("mode",n.mode),Pa("mat-"+n.color),ra("width",n.diameter,"px")("height",n.diameter,"px")("--mat-progress-spinner-size",n.diameter+"px")("--mat-progress-spinner-active-indicator-width",n.diameter+"px"),$e("_mat-animation-noopable",n._noopAnimations)("mdc-circular-progress--indeterminate",n.mode==="indeterminate"))},inputs:{color:"color",mode:"mode",value:[2,"value","value",Vr],diameter:[2,"diameter","diameter",Vr],strokeWidth:[2,"strokeWidth","strokeWidth",Vr]},exportAs:["matProgressSpinner"],decls:14,vars:11,consts:[["circle",""],["determinateSpinner",""],["aria-hidden","true",1,"mdc-circular-progress__determinate-container"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__determinate-circle-graphic"],["cx","50%","cy","50%",1,"mdc-circular-progress__determinate-circle"],["aria-hidden","true",1,"mdc-circular-progress__indeterminate-container"],[1,"mdc-circular-progress__spinner-layer"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-left"],[3,"ngTemplateOutlet"],[1,"mdc-circular-progress__gap-patch"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-right"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__indeterminate-circle-graphic"],["cx","50%","cy","50%"]],template:function(a,n){if(a&1&&(rt(0,om,2,8,"ng-template",null,0,kd),F(2,"div",2,1),Ar(),F(4,"svg",3),fe(5,"circle",4),V()(),ed(),F(6,"div",5)(7,"div",6)(8,"div",7),ge(9,8),V(),F(10,"div",9),ge(11,8),V(),F(12,"div",10),ge(13,8),V()()()),a&2){let i=Ta(1);j(4),nt("viewBox",n._viewBox()),j(),ra("stroke-dasharray",n._strokeCircumference(),"px")("stroke-dashoffset",n._strokeDashOffset(),"px")("stroke-width",n._circleStrokeWidth(),"%"),nt("r",n._circleRadius()),j(4),we("ngTemplateOutlet",i),j(2),we("ngTemplateOutlet",i),j(2),we("ngTemplateOutlet",i)}},dependencies:[Br],styles:[`.mat-mdc-progress-spinner{--mat-progress-spinner-animation-multiplier: 1;display:block;overflow:hidden;line-height:0;position:relative;direction:ltr;transition:opacity 250ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-progress-spinner circle{stroke-width:var(--mat-progress-spinner-active-indicator-width, 4px)}.mat-mdc-progress-spinner._mat-animation-noopable,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__determinate-circle{transition:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__spinner-layer,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container{animation:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container circle{stroke-dasharray:0 !important}@media(forced-colors: active){.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle{stroke:currentColor;stroke:CanvasText}}.mat-progress-spinner-reduced-motion{--mat-progress-spinner-animation-multiplier: 1.25}.mdc-circular-progress__determinate-container,.mdc-circular-progress__indeterminate-circle-graphic,.mdc-circular-progress__indeterminate-container,.mdc-circular-progress__spinner-layer{position:absolute;width:100%;height:100%}.mdc-circular-progress__determinate-container{transform:rotate(-90deg)}.mdc-circular-progress--indeterminate .mdc-circular-progress__determinate-container{opacity:0}.mdc-circular-progress__indeterminate-container{font-size:0;letter-spacing:0;white-space:nowrap;opacity:0}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{opacity:1;animation:mdc-circular-progress-container-rotate calc(1568.2352941176ms*var(--mat-progress-spinner-animation-multiplier)) linear infinite}.mdc-circular-progress__determinate-circle-graphic,.mdc-circular-progress__indeterminate-circle-graphic{fill:rgba(0,0,0,0)}.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:var(--mat-progress-spinner-active-indicator-color, var(--mat-sys-primary))}@media(forced-colors: active){.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}.mdc-circular-progress__determinate-circle{transition:stroke-dashoffset 500ms cubic-bezier(0, 0, 0.2, 1)}.mdc-circular-progress__gap-patch{position:absolute;top:0;left:47.5%;box-sizing:border-box;width:5%;height:100%;overflow:hidden}.mdc-circular-progress__gap-patch .mdc-circular-progress__indeterminate-circle-graphic{left:-900%;width:2000%;transform:rotate(180deg)}.mdc-circular-progress__circle-clipper .mdc-circular-progress__indeterminate-circle-graphic{width:200%}.mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{left:-100%}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-left .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-left-spin calc(1333ms*var(--mat-progress-spinner-animation-multiplier)) cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-right-spin calc(1333ms*var(--mat-progress-spinner-animation-multiplier)) cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress__circle-clipper{display:inline-flex;position:relative;width:50%;height:100%;overflow:hidden}.mdc-circular-progress--indeterminate .mdc-circular-progress__spinner-layer{animation:mdc-circular-progress-spinner-layer-rotate calc(5332ms*var(--mat-progress-spinner-animation-multiplier)) cubic-bezier(0.4, 0, 0.2, 1) infinite both}@keyframes mdc-circular-progress-container-rotate{to{transform:rotate(360deg)}}@keyframes mdc-circular-progress-spinner-layer-rotate{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@keyframes mdc-circular-progress-left-spin{from{transform:rotate(265deg)}50%{transform:rotate(130deg)}to{transform:rotate(265deg)}}@keyframes mdc-circular-progress-right-spin{from{transform:rotate(-265deg)}50%{transform:rotate(-130deg)}to{transform:rotate(-265deg)}}
`],encapsulation:2,changeDetection:0})}return r})();var J0=(()=>{class r{static \u0275fac=function(a){return new(a||r)};static \u0275mod=ce({type:r});static \u0275inj=ie({imports:[I0]})}return r})();var _r=class r{decimalPipe=f(Hr);transform(t){return Number.isFinite(+t)?this.decimalPipe.transform(t):t.toString()}static \u0275fac=function(e){return new(e||r)};static \u0275pipe=Qn({name:"safeNumber",type:r,pure:!0})};var hm=["category"],um=["value"],pm=r=>({$implicit:r});function ym(r,t){r&1&&fe(0,"mat-spinner",2)}function fm(r,t){if(r&1){let e=Ea();F(0,"input",20,0),Pe("blur",function(){Pt(e);let n=te(3);return Ft(n.resetForm())})("keyup.enter",function(){Pt(e);let n=te(3);return Ft(n.onCategoryEnterPressed())}),V()}}function gm(r,t){if(r&1){let e=Ea();F(0,"span",21),Pe("click",function(){Pt(e);let n=te().$implicit,i=te(2);return Ft(i.editCategory(n))}),wt(1),V()}if(r&2){let e=te().$implicit;j(),Fa(" ",e.category," ")}}function mm(r,t){if(r&1&&(F(0,"td",17),ze(1,fm,2,0,"input",18)(2,gm,2,1,"span",19),V()),r&2){let e=t.$implicit,a=te(2);j(),qe(a.selectedRow()===e.id&&a.selectedField()==="category"?1:2)}}function km(r,t){r&1&&(F(0,"td",22),wt(1," Summe "),V())}function vm(r,t){if(r&1){let e=Ea();F(0,"input",25,1),Pe("blur",function(){Pt(e);let n=te(3);return Ft(n.resetForm())})("keyup.enter",function(){Pt(e);let n=te(3);return Ft(n.selectedRow.set(null))}),V()}}function Mm(r,t){if(r&1){let e=Ea();F(0,"span",21),Pe("click",function(){Pt(e);let n=te().$implicit,i=te(2);return Ft(i.editValue(n))}),wt(1),ys(2,"safeNumber"),V()}if(r&2){let e=te().$implicit;j(),Fa(" ",fs(2,1,e.value)," ")}}function wm(r,t){if(r&1&&(F(0,"td",23),ze(1,vm,2,0,"input",24)(2,Mm,3,3,"span",19),V()),r&2){let e=t.$implicit,a=te(2);j(),qe(a.selectedRow()===e.id&&a.selectedField()==="value"?1:2)}}function Cm(r,t){if(r&1&&(F(0,"td",26),wt(1),ys(2,"safeNumber"),V()),r&2){let e=te(2);j(),Fa(" ",fs(2,1,e.total())," ")}}function _m(r,t){if(r&1){let e=Ea();F(0,"td",27)(1,"button",28),Pe("click",function(){let n=Pt(e).$implicit,i=te(2);return Ft(i.deleteRow.emit(n.id))}),V()()}}function bm(r,t){r&1&&fe(0,"td",29)}function Sm(r,t){}function xm(r,t){if(r&1&&(F(0,"td",31),rt(1,Sm,0,0,"ng-template",32),V()),r&2){let e=t.$implicit,a=te().$implicit;j(),we("ngTemplateOutlet",a.template)("ngTemplateOutletContext",md(2,pm,e))}}function Im(r,t){r&1&&fe(0,"td",29)}function Lm(r,t){if(r&1&&(ta(0,14),rt(1,xm,2,4,"td",30)(2,Im,1,0,"td",13),aa()),r&2){let e=t.$implicit;we("matColumnDef",e.name)}}function Dm(r,t){r&1&&fe(0,"tr",33)}function Am(r,t){r&1&&fe(0,"tr",34)}function Rm(r,t){if(r&1&&(F(0,"div",3)(1,"table",4),ta(2,5),rt(3,mm,3,1,"td",6)(4,km,2,0,"td",7),aa(),ta(5,8),rt(6,wm,3,1,"td",9)(7,Cm,3,3,"td",10),aa(),ta(8,11),rt(9,_m,2,0,"td",12)(10,bm,1,0,"td",13),aa(),ud(11,Lm,3,1,"ng-container",14,hd),rt(13,Dm,1,0,"tr",15)(14,Am,1,0,"tr",16),V()()),r&2){let e=te();j(),we("dataSource",e.data())("trackBy",e.trackByFn)("formGroup",e.form),j(10),pd(e.customColumns()),j(2),we("matRowDefColumns",e.displayedColumns()),j(),we("matFooterRowDef",e.displayedColumns())}}var Y0=class r{fb=f(l0);safeNumberPipe=f(_r);data=De.required();isLoading=De.required();isAdded=De.required();customColumns=De([]);updateRow=gs();deleteRow=gs();category=jr("category");value=jr("value");selectedRow=ne(null);selectedField=ne(null);total=me(()=>this.data().reduce((t,e)=>{let a=Number(e.value),n=Number.isFinite(a);return t+(n?a:0)},0));displayedColumns=me(()=>["category","value"].concat(this.customColumns().map(t=>t.name)).concat("delete_button"));focusCategoryOnAdd=Ot(()=>{this.isAdded()&&B(()=>{let t=this.data().at(-1);this.editCategory(t)})});form=this.initForm();trackByFn(t,e){return e?.id}setForm(t){this.form=this.fb.group({id:this.fb.control(t.id),category:this.fb.control(t.category),value:this.fb.control(this.safeNumberPipe.transform(t.value))}),this.form.valueChanges.pipe(Zn(500)).subscribe(()=>{this.updateRow.emit(this.form.getRawValue())})}editCategory(t){this.setForm(t),this.selectedRow.set(t.id),this.selectedField.set("category"),setTimeout(()=>this.category()?.nativeElement.select())}editValue(t){this.setForm(t),this.selectedRow.set(t.id),this.selectedField.set("value"),setTimeout(()=>this.value()?.nativeElement.select())}resetForm(){this.selectedRow.set(null),this.selectedField.set(null),this.form=this.initForm()}onCategoryEnterPressed(){this.selectedField.set("value"),setTimeout(()=>this.value()?.nativeElement.select())}initForm(){return this.fb.group({id:this.fb.control(null),category:this.fb.control(""),value:this.fb.control("")})}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=Z({type:r,selectors:[["app-money-table"]],viewQuery:function(e,a){e&1&&(Or(a.category,hm,5),Or(a.value,um,5)),e&2&&ti(2)},hostAttrs:[1,"md:self-center","md:w-2/3"],inputs:{data:[1,"data"],isLoading:[1,"isLoading"],isAdded:[1,"isAdded"],customColumns:[1,"customColumns"]},outputs:{updateRow:"updateRow",deleteRow:"deleteRow"},features:[ae([Hr,_r])],decls:2,vars:1,consts:[["category",""],["value",""],[1,"self-center"],[1,"flex","w-full","items-center","justify-center","rounded-lg","bg-sky-50","p-1"],["mat-table","",1,"!min-w-[95%]","!bg-transparent","!p-4",3,"dataSource","trackBy","formGroup"],["matColumnDef","category"],["mat-cell","","class","!h-1 !w-24 !p-0.5 !text-xs",4,"matCellDef"],["mat-footer-cell","","class","!h-1 !p-0 !pt-2 font-semibold",4,"matFooterCellDef"],["matColumnDef","value"],["mat-cell","","class","!h-1 !w-12 !p-0 !text-right !text-xs",4,"matCellDef"],["mat-footer-cell","","class","!p-0 !pt-2 !text-right font-semibold",4,"matFooterCellDef"],["matColumnDef","delete_button"],["mat-cell","","class","self-right w-1 !p-0 !text-right",4,"matCellDef"],["mat-footer-cell","",4,"matFooterCellDef"],[3,"matColumnDef"],["mat-row","","class","!h-1",4,"matRowDef","matRowDefColumns"],["mat-footer-row","","class","!h-1",4,"matFooterRowDef"],["mat-cell","",1,"!h-1","!w-24","!p-0.5","!text-xs"],["formControlName","category",1,"w-24","rounded","border-1","border-blue-400","bg-sky-100","p-1","outline-none"],[1,"block","h-5","w-full"],["formControlName","category",1,"w-24","rounded","border-1","border-blue-400","bg-sky-100","p-1","outline-none",3,"blur","keyup.enter"],[1,"block","h-5","w-full",3,"click"],["mat-footer-cell","",1,"!h-1","!p-0","!pt-2","font-semibold"],["mat-cell","",1,"!h-1","!w-12","!p-0","!text-right","!text-xs"],["formControlName","value",1,"w-12","rounded","border-1","border-blue-400","bg-sky-100","p-1","text-right","outline-none"],["formControlName","value",1,"w-12","rounded","border-1","border-blue-400","bg-sky-100","p-1","text-right","outline-none",3,"blur","keyup.enter"],["mat-footer-cell","",1,"!p-0","!pt-2","!text-right","font-semibold"],["mat-cell","",1,"self-right","w-1","!p-0","!text-right"],["maffiButton","","icon","Trash","size","mini","theme","secondary",3,"click"],["mat-footer-cell",""],["mat-cell","","class","!overflow-visible !p-0 !text-xs",4,"matCellDef"],["mat-cell","",1,"!overflow-visible","!p-0","!text-xs"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["mat-row","",1,"!h-1"],["mat-footer-row","",1,"!h-1"]],template:function(e,a){e&1&&ze(0,ym,1,0,"mat-spinner",2)(1,Rm,15,5,"div",3),e&2&&qe(a.isLoading()?0:1)},dependencies:[Kt,N0,z0,B0,H0,G0,U0,J0,X0,W0,$0,V0,h0,qo,t0,a0,l1,h1,q0,Br,_r],encapsulation:2})};export{Br as a,f4 as b,T2 as c,Js as d,$a as e,Bt as f,my as g,rc as h,Fl as i,Oi as j,er as k,ic as l,oc as m,zl as n,ql as o,Bl as p,Ul as q,So as r,JM as s,xo as t,fr as u,Fw as v,v1 as w,M1 as x,Sa as y,je as z,g1 as A,Un as B,Fg as C,Og as D,zg as E,I1 as F,e1 as G,qo as H,ju as I,ba as J,t0 as K,a0 as L,ug as M,Do as N,t7 as O,fg as P,l1 as Q,h1 as R,Mg as S,l0 as T,h0 as U,v_ as V,R7 as W,B_ as X,d7 as Y,l7 as Z,h7 as _,u7 as $,p7 as aa,y7 as ba,f7 as ca,g7 as da,m7 as ea,u0 as fa,p0 as ga,Kt as ha,L0 as ia,D0 as ja,X0 as ka,J0 as la,Y0 as ma};
