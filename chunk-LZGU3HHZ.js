import{a as h,c as Q}from"./chunk-5DDKB22L.js";import"./chunk-SSK5MFVN.js";import"./chunk-TSM5CTRX.js";import{c as $}from"./chunk-E5ZRVIZR.js";import{$a as Oe,$c as qe,A as xe,Aa as O,Ad as Ge,Cd as Ze,Db as me,Dd as H,Ec as Xe,Fa as c,Ga as d,Ha as p,Hc as je,Hd as Je,Ia as g,Ib as j,Jb as R,Jc as Qe,Ld as et,M as L,Nd as fe,O as s,Oc as S,Pa as D,Q as m,R as f,Ra as v,Ta as l,Td as _,Ua as Me,Ud as tt,V as N,Va as Re,W as Ce,Wa as Pe,Wc as He,Xa as ke,Ya as le,Yc as $e,Z as we,Za as de,a as M,ab as De,b as E,bb as ce,bd as ze,ca as ne,cd as We,d as ue,db as Se,e as B,eb as Ee,fa as b,fb as Fe,gb as Y,h as he,ha as ae,hb as Ae,ka as se,la as u,mb as Ie,n as _e,na as ye,oa as Te,ra as V,rb as Be,rc as Ve,sb as Le,ua as pe,ub as Ne,uc as Ye,v as be,w as ge,xd as Ke,yb as X,za as k,zd as Ue}from"./chunk-RGJL7WR7.js";var q=class n{facade=s(h);fixedCosts=this.facade.fixedCosts;isLoading=this.facade.isLoading;isSaving=this.facade.isSaving;isAdded=this.facade.isFixedAdded;total=this.facade.totalFixedCosts;constructor(){this.facade.loadFixedCosts()}addFixedCost(){this.facade.add({category:"Neu",value:0,due_in:"Alle",type:"Fix"})}updateFixedCost(r){this.facade.update(r)}deleteFixedCost(r){this.facade.delete(r,"Alle","Fix")}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=u({type:n,selectors:[["app-fixed-costs-table"]],decls:1,vars:5,consts:[["headerTitle","Fixkosten","headerIcon","BanknoteArrowDown",3,"addRow","updateRow","deleteRow","data","total","isLoading","isAdded","isSaving"]],template:function(e,t){e&1&&(d(0,"app-money-table-v2",0),v("addRow",function(){return t.addFixedCost()})("updateRow",function(i){return t.updateFixedCost(i)})("deleteRow",function(i){return t.deleteFixedCost(i)}),p()),e&2&&c("data",t.fixedCosts())("total",t.total())("isLoading",t.isLoading())("isAdded",t.isAdded())("isSaving",!1)},dependencies:[H,S,_],encapsulation:2})};var z=class n{facade=s(h);quarterlyCosts=this.facade.quarterlyCosts;total=this.facade.totalQuarterlyCosts;isLoading=this.facade.isLoading;isAdded=this.facade.isQuarterlyAdded;add(){this.facade.add({category:"Neu",value:0,due_in:"Quartal",type:"Fix"})}update(r){this.facade.update(r)}delete(r){this.facade.delete(r,"Quartal","Fix")}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=u({type:n,selectors:[["app-quarterly-costs"]],decls:1,vars:5,consts:[["headerTitle","Quartalskosten","headerIcon","BanknoteArrowDown",3,"addRow","updateRow","deleteRow","data","total","isLoading","isSaving","isAdded"]],template:function(e,t){e&1&&(d(0,"app-money-table-v2",0),v("addRow",function(){return t.add()})("updateRow",function(i){return t.update(i)})("deleteRow",function(i){return t.delete(i)}),p()),e&2&&c("data",t.quarterlyCosts())("total",t.total())("isLoading",t.isLoading())("isSaving",!1)("isAdded",t.isAdded())},dependencies:[_],encapsulation:2})};var x=ue(Ve());var ot=ue(Ve());var W=class n{transform(r){return!r||r.length===0?null:r.map(e=>(0,ot.default)(e).format("MMMM")).join(", ")}static \u0275fac=function(e){return new(e||n)};static \u0275pipe=Te({name:"toMonth",type:n,pure:!0})};var pt=["*"];function lt(n,r){if(n&1&&g(0,"div",3),n&2){let e=l(2);Ee(e.arrowStyles)}}function dt(n,r){if(n&1){let e=D();d(0,"div",0),v("keydown",function(o){m(e);let i=l();return f(i._handleKeydown(o))})("click",function(){m(e);let o=l();return f(o._handleClick())})("mouseover",function(){m(e);let o=l();return f(o._handleMouseOver())})("mouseleave",function(){m(e);let o=l();return f(o._handleMouseLeave())})("animationstart",function(o){m(e);let i=l();return f(i._onAnimationStart(o.animationName))})("animationend",function(o){m(e);let i=l();return f(i._onAnimationDone(o.animationName))})("animationcancel",function(o){m(e);let i=l();return f(i._onAnimationDone(o.animationName))}),d(1,"div",1),Re(2),p(),k(3,lt,1,2,"div",2),p()}if(n&2){let e=l();Fe(e._classList),Se("mtx-popover-panel-animations-disabled",e._animationsDisabled)("mtx-popover-panel-exit-animation",e._panelAnimationState==="void")("mtx-popover-panel-animating",e._isAnimating)("mtx-popover-panel-without-arrow",e.hideArrow),c("id",e.panelId)("cdkTrapFocus",e.focusTrapEnabled)("cdkTrapFocusAutoCapture",e.focusTrapAutoCaptureEnabled),pe("aria-label",e.ariaLabel||null)("aria-labelledby",e.ariaLabelledby||null)("aria-describedby",e.ariaDescribedby||null),b(3),O(e.hideArrow?-1:3)}}var ct=new L("MtxPopoverContent");function mt(){throw Error(`mtx-popover-trigger: must pass in an mtx-popover instance.

    Example:
      <mtx-popover #popover="mtxPopover"></mtx-popover>
      <button [mtxPopoverTriggerFor]="popover"></button>`)}function ft(){throw Error(`mtxPopoverPosition[0] value must be either 'above', 'below', 'before' or 'after'.
    Example: <mtx-popover [position]="['below', 'after']" #popover="mtxPopover"></mtx-popover>`)}function vt(){throw Error(`mtxPopoverPosition[1] value must be either 'above', 'below', 'before', 'after' or 'center'.
    Example: <mtx-popover [position]="['below', 'after']" #popover="mtxPopover"></mtx-popover>`)}var ut=new L("mtx-popover-default-options",{providedIn:"root",factory:()=>({backdropClass:"cdk-overlay-transparent-backdrop"})}),ht=0,ve="_mtx-popover-enter",K="_mtx-popover-exit",U=(()=>{class n{constructor(){this._changeDetectorRef=s(j),this._elementRef=s(ne),this._unusedNgZone=s(Ce),this._defaultOptions=s(ut),this._elevationPrefix="mat-elevation-z",this._baseElevation=null,this._animationsDisabled=We(),this._classList={},this._panelAnimationState="void",this._animationDone=new he,this._isAnimating=!1,this.closeDisabled=!1,this.overlayPanelClass=this._defaultOptions.overlayPanelClass||"",this.backdropClass=this._defaultOptions.backdropClass,this.triggerEvent=this._defaultOptions.triggerEvent??"hover",this.enterDelay=this._defaultOptions.enterDelay??100,this.leaveDelay=this._defaultOptions.leaveDelay??100,this._position=this._defaultOptions.position??["below","after"],this.xOffset=this._defaultOptions.xOffset??0,this.yOffset=this._defaultOptions.yOffset??0,this.arrowWidth=this._defaultOptions.arrowWidth??16,this.arrowHeight=this._defaultOptions.arrowHeight??16,this.arrowOffsetX=this._defaultOptions.arrowOffsetX??20,this.arrowOffsetY=this._defaultOptions.arrowOffsetY??20,this.hideArrow=this._defaultOptions.hideArrow??!1,this.closeOnPanelClick=this._defaultOptions.closeOnPanelClick??!1,this.closeOnBackdropClick=this._defaultOptions.closeOnBackdropClick??!0,this.focusTrapEnabled=this._defaultOptions.focusTrapEnabled??!1,this.focusTrapAutoCaptureEnabled=this._defaultOptions.focusTrapAutoCaptureEnabled??!1,this.hasBackdrop=this._defaultOptions.hasBackdrop,this.closed=new N,this.panelId=`mtx-popover-panel-${ht++}`}get position(){return this._position}set position(e){["before","after","above","below"].includes(e[0])||ft(),["before","after","above","below","center"].includes(e[1])||vt(),this._position=e,this.setPositionClasses()}set panelClass(e){let t=this._previousPanelClass,o=M({},this._classList);t&&t.length&&t.split(" ").forEach(i=>{o[i]=!1}),this._previousPanelClass=e,e&&e.length&&(e.split(" ").forEach(i=>{o[i]=!0}),this._elementRef.nativeElement.className="",this.setPositionClasses()),this._classList=o}get classList(){return this.panelClass}set classList(e){this.panelClass=e}ngOnInit(){this.setPositionClasses()}ngOnDestroy(){this.closed.complete(),clearTimeout(this._exitFallbackTimeout)}_handleKeydown(e){e.keyCode===27&&(ze(e)||(e.preventDefault(),this.closed.emit("keydown")))}_handleClick(){this.closeOnPanelClick&&this.closed.emit("click")}_handleMouseOver(){this.triggerEvent==="hover"&&(this.closeDisabled=!0)}_handleMouseLeave(){this.triggerEvent==="hover"&&setTimeout(()=>{this.closeDisabled=!1,this.closed.emit()},this.leaveDelay)}setCurrentStyles(e=this.position){let t=e[1]==="after"?`${this.arrowOffsetX-this.arrowWidth/2}px`:e[1]==="center"?`calc(50% - ${this.arrowWidth/2}px)`:"",o=e[1]==="before"?`${this.arrowOffsetX-this.arrowWidth/2}px`:"",i=e[1]==="above"?`${this.arrowOffsetY-this.arrowHeight/2}px`:e[1]==="center"?`calc(50% - ${this.arrowHeight/2}px)`:"",a=e[1]==="below"?`${this.arrowOffsetY-this.arrowHeight/2}px`:"";this.arrowStyles=e[0]==="above"||e[0]==="below"?{left:this.direction==="ltr"?t:o,right:this.direction==="ltr"?o:t}:{top:a,bottom:i}}setPositionClasses(e=this.position){this._classList=E(M({},this._classList),{"mtx-popover-before-above":e[0]==="before"&&e[1]==="above","mtx-popover-before-center":e[0]==="before"&&e[1]==="center","mtx-popover-before-below":e[0]==="before"&&e[1]==="below","mtx-popover-after-above":e[0]==="after"&&e[1]==="above","mtx-popover-after-center":e[0]==="after"&&e[1]==="center","mtx-popover-after-below":e[0]==="after"&&e[1]==="below","mtx-popover-above-before":e[0]==="above"&&e[1]==="before","mtx-popover-above-center":e[0]==="above"&&e[1]==="center","mtx-popover-above-after":e[0]==="above"&&e[1]==="after","mtx-popover-below-before":e[0]==="below"&&e[1]==="before","mtx-popover-below-center":e[0]==="below"&&e[1]==="center","mtx-popover-below-after":e[0]==="below"&&e[1]==="after"}),this._changeDetectorRef.markForCheck()}setElevation(){if(this._baseElevation===null){let a=(typeof getComputedStyle=="function"?getComputedStyle(this._elementRef.nativeElement):null)?.getPropertyValue("--mtx-popover-base-elevation-level")||"8";this._baseElevation=parseInt(a)}let e=Math.min(this._baseElevation,24),t=`${this._elevationPrefix}${e}`,o=Object.keys(this._classList).find(i=>i.startsWith(this._elevationPrefix));if(!o||o===this._previousElevation){let i=M({},this._classList);this._previousElevation&&(i[this._previousElevation]=!1),i[t]=!0,this._previousElevation=t,this._classList=i}}_onAnimationDone(e){let t=e===K;(t||e===ve)&&(t&&(clearTimeout(this._exitFallbackTimeout),this._exitFallbackTimeout=void 0),this._animationDone.next(t?"void":"enter"),this._isAnimating=!1)}_onAnimationStart(e){(e===ve||e===K)&&(this._isAnimating=!0)}_setIsOpen(e){this._panelAnimationState=e?"enter":"void",e||this._animationsDisabled||(this._exitFallbackTimeout=setTimeout(()=>this._onAnimationDone(K),200)),this._animationsDisabled&&setTimeout(()=>{this._onAnimationDone(e?ve:K)}),this._changeDetectorRef.markForCheck()}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=u({type:n,selectors:[["mtx-popover"]],contentQueries:function(t,o,i){if(t&1&&Pe(i,ct,5),t&2){let a;le(a=de())&&(o.lazyContent=a.first)}},viewQuery:function(t,o){if(t&1&&ke(ae,5),t&2){let i;le(i=de())&&(o.templateRef=i.first)}},inputs:{backdropClass:"backdropClass",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],ariaDescribedby:[0,"aria-describedby","ariaDescribedby"],triggerEvent:"triggerEvent",enterDelay:"enterDelay",leaveDelay:"leaveDelay",position:"position",xOffset:"xOffset",yOffset:"yOffset",arrowWidth:"arrowWidth",arrowHeight:"arrowHeight",arrowOffsetX:"arrowOffsetX",arrowOffsetY:"arrowOffsetY",hideArrow:[2,"hideArrow","hideArrow",R],closeOnPanelClick:[2,"closeOnPanelClick","closeOnPanelClick",R],closeOnBackdropClick:[2,"closeOnBackdropClick","closeOnBackdropClick",R],focusTrapEnabled:[2,"focusTrapEnabled","focusTrapEnabled",R],focusTrapAutoCaptureEnabled:[2,"focusTrapAutoCaptureEnabled","focusTrapAutoCaptureEnabled",R],hasBackdrop:[2,"hasBackdrop","hasBackdrop",R],panelClass:[0,"class","panelClass"],classList:"classList"},outputs:{closed:"closed"},exportAs:["mtxPopover"],ngContentSelectors:pt,decls:1,vars:0,consts:[["tabindex","-1","role","dialog",1,"mtx-popover-panel",3,"keydown","click","mouseover","mouseleave","animationstart","animationend","animationcancel","id","cdkTrapFocus","cdkTrapFocusAutoCapture"],[1,"mtx-popover-content"],[1,"mtx-popover-direction-arrow",3,"style"],[1,"mtx-popover-direction-arrow"]],template:function(t,o){t&1&&(Me(),V(0,dt,4,17,"ng-template"))},dependencies:[qe],styles:[`@keyframes _mtx-popover-enter{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:none}}@keyframes _mtx-popover-exit{0%{opacity:1}to{opacity:0}}.mtx-popover-panel{position:relative;max-height:calc(100vh - 48px);padding:8px;font-size:inherit;outline:0;animation:_mtx-popover-enter .12s cubic-bezier(0,0,.2,1);border-radius:var(--mtx-popover-container-shape, var(--mat-sys-corner-extra-small));background-color:var(--mtx-popover-background-color, var(--mat-sys-surface-container));color:var(--mtx-popover-text-color, var(--mat-sys-on-surface))}.mtx-popover-panel.mtx-popover-panel-exit-animation{animation:_mtx-popover-exit .1s 25ms linear forwards}.mtx-popover-panel.mtx-popover-panel-animations-disabled{animation:none}.mtx-popover-panel.mtx-popover-panel-animating{pointer-events:none}.mtx-popover-panel[class*=mtx-popover-below]{margin-top:calc(.5em + 2px)}.mtx-popover-panel[class*=mtx-popover-above]{margin-bottom:calc(.5em + 2px)}.mtx-popover-panel[class*=mtx-popover-before]{margin-right:calc(.5em + 2px)}[dir=rtl] .mtx-popover-panel[class*=mtx-popover-before]{margin-right:auto;margin-left:calc(.5em + 2px)}.mtx-popover-panel[class*=mtx-popover-after]{margin-left:calc(.5em + 2px)}[dir=rtl] .mtx-popover-panel[class*=mtx-popover-after]{margin-left:auto;margin-right:calc(.5em + 2px)}.mtx-popover-panel.mtx-popover-panel-without-arrow{margin:0}.mtx-popover-direction-arrow{position:absolute}.mtx-popover-direction-arrow:before,.mtx-popover-direction-arrow:after{position:absolute;display:inline-block;content:"";border-width:.5em;border-style:solid}.mtx-popover-direction-arrow:before{border-color:var(--mtx-popover-outline-color, var(--mat-sys-surface-container))}.mtx-popover-direction-arrow:after{border-width:calc(.5em - 1px);border-color:var(--mtx-popover-background-color, var(--mat-sys-surface-container))}[class*=mtx-popover-below] .mtx-popover-direction-arrow,[class*=mtx-popover-above] .mtx-popover-direction-arrow{width:1em}[class*=mtx-popover-below] .mtx-popover-direction-arrow:before,[class*=mtx-popover-below] .mtx-popover-direction-arrow:after,[class*=mtx-popover-above] .mtx-popover-direction-arrow:before,[class*=mtx-popover-above] .mtx-popover-direction-arrow:after{border-left-color:transparent;border-right-color:transparent}[class*=mtx-popover-below] .mtx-popover-direction-arrow:after,[class*=mtx-popover-above] .mtx-popover-direction-arrow:after{left:1px}[dir=rtl] [class*=mtx-popover-below] .mtx-popover-direction-arrow:after,[dir=rtl] [class*=mtx-popover-above] .mtx-popover-direction-arrow:after{right:1px;left:auto}[class*=mtx-popover-below] .mtx-popover-direction-arrow{top:0}[class*=mtx-popover-below] .mtx-popover-direction-arrow:before,[class*=mtx-popover-below] .mtx-popover-direction-arrow:after{bottom:0;border-top-width:0}[class*=mtx-popover-above] .mtx-popover-direction-arrow{bottom:0}[class*=mtx-popover-above] .mtx-popover-direction-arrow:before,[class*=mtx-popover-above] .mtx-popover-direction-arrow:after{top:0;border-bottom-width:0}[class*=mtx-popover-before] .mtx-popover-direction-arrow,[class*=mtx-popover-after] .mtx-popover-direction-arrow{height:1em}[class*=mtx-popover-before] .mtx-popover-direction-arrow:before,[class*=mtx-popover-before] .mtx-popover-direction-arrow:after,[class*=mtx-popover-after] .mtx-popover-direction-arrow:before,[class*=mtx-popover-after] .mtx-popover-direction-arrow:after{border-top-color:transparent;border-bottom-color:transparent}[class*=mtx-popover-before] .mtx-popover-direction-arrow:after,[class*=mtx-popover-after] .mtx-popover-direction-arrow:after{top:1px}[class*=mtx-popover-before] .mtx-popover-direction-arrow{right:0}[class*=mtx-popover-before] .mtx-popover-direction-arrow:before,[class*=mtx-popover-before] .mtx-popover-direction-arrow:after{left:0;border-right-width:0}[dir=rtl] [class*=mtx-popover-before] .mtx-popover-direction-arrow{right:auto;left:0}[dir=rtl] [class*=mtx-popover-before] .mtx-popover-direction-arrow:before,[dir=rtl] [class*=mtx-popover-before] .mtx-popover-direction-arrow:after{left:auto;right:0;border-left-width:0}[dir=rtl] [class*=mtx-popover-before] .mtx-popover-direction-arrow:before{border-right-width:.5em}[dir=rtl] [class*=mtx-popover-before] .mtx-popover-direction-arrow:after{border-right-width:calc(.5em - 1px)}[class*=mtx-popover-after] .mtx-popover-direction-arrow{left:0}[class*=mtx-popover-after] .mtx-popover-direction-arrow:before,[class*=mtx-popover-after] .mtx-popover-direction-arrow:after{right:0;border-left-width:0}[dir=rtl] [class*=mtx-popover-after] .mtx-popover-direction-arrow{left:auto;right:0}[dir=rtl] [class*=mtx-popover-after] .mtx-popover-direction-arrow:before,[dir=rtl] [class*=mtx-popover-after] .mtx-popover-direction-arrow:after{right:auto;left:0;border-right-width:0}[dir=rtl] [class*=mtx-popover-after] .mtx-popover-direction-arrow:before{border-left-width:.5em}[dir=rtl] [class*=mtx-popover-after] .mtx-popover-direction-arrow:after{border-left-width:calc(.5em - 1px)}
`],encapsulation:2,changeDetection:0})}}return n})();var _t=new L("mtx-popover-scroll-strategy",{providedIn:"root",factory:()=>{let n=s(fe);return()=>n.scrollStrategies.reposition()}}),it=(()=>{class n{constructor(){this._overlay=s(fe),this._elementRef=s(ne),this._viewContainerRef=s(se),this._dir=s(Ye,{optional:!0}),this._changeDetectorRef=s(j),this._focusMonitor=s($e),this._overlayRef=null,this._popoverOpen=!1,this._halt=!1,this._positionSubscription=B.EMPTY,this._popoverCloseSubscription=B.EMPTY,this._closingActionsSubscription=B.EMPTY,this._scrollStrategy=s(_t),this._openedBy=void 0,this.popoverOpened=new N,this.popoverClosed=new N}get popover(){return this._popover}set popover(e){e!==this._popover&&(this._popover=e,this._popoverCloseSubscription.unsubscribe(),e&&(this._popoverCloseSubscription=e.closed.subscribe(t=>{this._destroyPopover(t)})))}ngAfterContentInit(){this._checkPopover(),this._setCurrentConfig()}ngOnDestroy(){this._halt=!0,this._positionSubscription.unsubscribe(),this._pendingRemoval?.unsubscribe(),this._popoverCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null)}_setCurrentConfig(){this.triggerEvent&&(this.popover.triggerEvent=this.triggerEvent),this.popover.setCurrentStyles()}get popoverOpen(){return this._popoverOpen}get dir(){return this._dir&&this._dir.value==="rtl"?"rtl":"ltr"}_handleClick(e){this.popover.triggerEvent==="click"&&this.togglePopover()}_handleMouseEnter(e){this._halt=!1,this.popover.triggerEvent==="hover"&&(this._mouseoverTimer=setTimeout(()=>{this.openPopover()},this.popover.enterDelay))}_handleMouseLeave(e){this.popover.triggerEvent==="hover"&&(this._mouseoverTimer&&(clearTimeout(this._mouseoverTimer),this._mouseoverTimer=null),this._popoverOpen?setTimeout(()=>{this.popover.closeDisabled||this.closePopover()},this.popover.leaveDelay):this._halt=!0)}_handleMousedown(e){He(e)||(this._openedBy=e.button===0?"mouse":void 0)}_handleKeydown(e){let t=e.keyCode;(t===13||t===32)&&(this._openedBy="keyboard")}togglePopover(){return this._popoverOpen?this.closePopover():this.openPopover()}openPopover(){if(this._popoverOpen||this._halt)return;this._checkPopover(),this._pendingRemoval?.unsubscribe();let e=this._createOverlay(),t=e.getConfig();this._setPosition(t.positionStrategy),this.popover.triggerEvent==="click"&&(t.hasBackdrop=this.popover.hasBackdrop??!0),e.attach(this._getPortal()),this.popover.lazyContent&&this.popover.lazyContent.attach(this.popoverData),this._closingActionsSubscription=this._popoverClosingActions().subscribe(()=>this.closePopover()),this._initPopover(),this.popover instanceof U&&this.popover._setIsOpen(!0)}closePopover(){this.popover.closed.emit()}focus(e,t){this._focusMonitor&&e?this._focusMonitor.focusVia(this._elementRef,e,t):this._elementRef.nativeElement.focus(t)}_destroyPopover(e){let t=this._overlayRef;if(!t||!this.popoverOpen)return;this._mouseoverTimer&&(clearTimeout(this._mouseoverTimer),this._mouseoverTimer=null);let o=this.popover;this._closingActionsSubscription.unsubscribe(),this._pendingRemoval?.unsubscribe(),t.detach(),o instanceof U?this._pendingRemoval=o._animationDone.pipe(ge(i=>i==="void"),xe(1)).subscribe(()=>{o.lazyContent?.detach()}):o.lazyContent?.detach(),this._openedBy=void 0,this._setIsPopoverOpen(!1)}_initPopover(){this.popover.direction=this.dir,this.popover.setElevation(),this._setIsPopoverOpen(!0)}_setIsPopoverOpen(e){e!==this._popoverOpen&&(this._popoverOpen=e,this._popoverOpen?this.popoverOpened.emit():this.popoverClosed.emit(),this._changeDetectorRef.markForCheck())}_checkPopover(){this.popover||mt()}_createOverlay(){if(this._overlayRef)this._overlayRef.getConfig().positionStrategy.setOrigin(this._getTargetElement());else{let e=this._getOverlayConfig();this._subscribeToPositions(e.positionStrategy),this._overlayRef=this._overlay.create(e)}return this._overlayRef}_getOverlayConfig(){return new et({positionStrategy:this._overlay.position().flexibleConnectedTo(this._getTargetElement()).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mtx-popover-panel"),backdropClass:this.popover.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:this.popover.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir||void 0})}_getTargetElement(){return this.targetElement?this.targetElement.elementRef:this._elementRef}_subscribeToPositions(e){this._positionSubscription=e.positionChanges.subscribe(t=>{let o=t.connectionPair.overlayX==="start"?"after":t.connectionPair.overlayX==="end"?"before":"center",i=t.connectionPair.overlayY==="top"?"below":t.connectionPair.overlayY==="bottom"?"above":"center",a=this.popover.position[0]==="above"||this.popover.position[0]==="below"?[i,o]:[o,i];this._changeDetectorRef.markForCheck(),this.popover.setCurrentStyles(a),this.popover.setPositionClasses(a)})}_setPosition(e){let[t,o,i]=this.popover.position[0]==="before"||this.popover.position[1]==="after"?["start","center","end"]:this.popover.position[0]==="after"||this.popover.position[1]==="before"?["end","center","start"]:["center","start","end"],[a,A,I]=this.popover.position[0]==="above"||this.popover.position[1]==="below"?["top","center","bottom"]:this.popover.position[0]==="below"||this.popover.position[1]==="above"?["bottom","center","top"]:["center","top","bottom"],[C,ee]=this.popover.position[0]==="below"||this.popover.position[0]==="above"?[t,t]:this.popover.position[0]==="before"?["end","start"]:["start","end"],[w,te]=this.popover.position[0]==="before"||this.popover.position[0]==="after"?[a,a]:this.popover.position[0]==="below"?["top","bottom"]:["bottom","top"],oe=C,ie=w,y=this.popover.xOffset&&!isNaN(Number(this.popover.xOffset))?Number(this.dir==="ltr"?this.popover.xOffset:-this.popover.xOffset):0,T=this.popover.yOffset&&!isNaN(Number(this.popover.yOffset))?Number(this.popover.yOffset):0,re=[{originX:t,originY:a,overlayX:C,overlayY:w}];(this.popover.position[0]==="above"||this.popover.position[0]==="below")&&(re=[{originX:t,originY:a,overlayX:C,overlayY:w,offsetY:T},{originX:o,originY:a,overlayX:o,overlayY:w,offsetY:T},{originX:i,originY:a,overlayX:i,overlayY:w,offsetY:T},{originX:t,originY:ie,overlayX:C,overlayY:te,offsetY:-T},{originX:o,originY:ie,overlayX:o,overlayY:te,offsetY:-T},{originX:i,originY:ie,overlayX:i,overlayY:te,offsetY:-T}]),(this.popover.position[0]==="before"||this.popover.position[0]==="after")&&(re=[{originX:t,originY:a,overlayX:C,overlayY:w,offsetX:y},{originX:t,originY:A,overlayX:C,overlayY:A,offsetX:y},{originX:t,originY:I,overlayX:C,overlayY:I,offsetX:y},{originX:oe,originY:a,overlayX:ee,overlayY:w,offsetX:-y},{originX:oe,originY:A,overlayX:ee,overlayY:A,offsetX:-y},{originX:oe,originY:I,overlayX:ee,overlayY:I,offsetX:-y}]),e.withPositions(re).withDefaultOffsetX(y).withDefaultOffsetY(T)}_popoverClosingActions(){let e=this.popover.triggerEvent==="click"&&this.popover.closeOnBackdropClick===!0?this._overlayRef.backdropClick():_e(),t=this._overlayRef.detachments();return be(e,t)}_getPortal(){return(!this._portal||this._portal.templateRef!==this.popover.templateRef)&&(this._portal=new Je(this.popover.templateRef,this._viewContainerRef)),this._portal}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275dir=ye({type:n,selectors:[["","mtx-popover-trigger-for",""],["","mtxPopoverTriggerFor",""]],hostAttrs:["aria-haspopup","true"],hostVars:2,hostBindings:function(t,o){t&1&&v("click",function(a){return o._handleClick(a)})("mouseenter",function(a){return o._handleMouseEnter(a)})("mouseleave",function(a){return o._handleMouseLeave(a)})("mousedown",function(a){return o._handleMousedown(a)})("keydown",function(a){return o._handleKeydown(a)}),t&2&&pe("aria-expanded",o.popoverOpen)("aria-controls",o.popoverOpen?o.popover.panelId:null)},inputs:{popover:[0,"mtxPopoverTriggerFor","popover"],popoverData:[0,"mtxPopoverTriggerData","popoverData"],targetElement:[0,"mtxPopoverTargetAt","targetElement"],triggerEvent:[0,"mtxPopoverTriggerOn","triggerEvent"]},outputs:{popoverOpened:"popoverOpened",popoverClosed:"popoverClosed"},exportAs:["mtxPopoverTrigger"]})}}return n})();var bt=["dueInMonth"],gt=()=>["above","before"];function xt(n,r){if(n&1){let e=D();d(0,"ng-select",5),v("change",function(){m(e);let o=l().$implicit,i=l();return f(i.addValue(o))})("remove",function(o){m(e);let i=l().$implicit,a=l();return f(a.removeValue(i,o))})("close",function(){m(e);let o=l(2);return f(o.selectedRow.set(null))}),p()}if(n&2){let e=l(2);c("items",e.months)("formControl",e.dueInMonthControl)("clearable",!1)("multiple",!0)("appendTo","body")}}function Ct(n,r){if(n&1){let e=D();d(0,"app-icon",6),v("click",function(){m(e);let o=l().$implicit,i=l();return f(i.selectRow(o.id,o.due_in_month))}),p(),d(1,"mtx-popover",7,1)(3,"span"),Y(4),Be(5,"toMonth"),p()()}if(n&2){let e=ce(2),t=l().$implicit;c("mtxPopoverTriggerFor",e),b(),c("position",Ie(5,gt)),b(3),Ae(Le(5,3,t.due_in_month))}}function wt(n,r){if(n&1&&(d(0,"div",3),k(1,xt,1,5,"ng-select",4)(2,Ct,6,6),p()),n&2){let e=r.$implicit,t=l();b(),O(t.selectedRow()===e.id?1:2)}}var G=class n{facade=s(h);specialCosts=this.facade.specialCosts;total=this.facade.totalSpecialCosts;isLoading=this.facade.isLoading;isAdded=this.facade.isSpecialAdded;dueInMonthsTmp=me.required("dueInMonth");selectTmpRef=me($);selectedRow=we(null);additionalColumns=X(()=>[{name:"due_in_month",template:this.dueInMonthsTmp()}]);dueInMonthControl=new je([],{nonNullable:!0});months=Array.from({length:12},(r,e)=>{let t=(0,x.default)().month(e);return{label:t.format("MMMM"),value:t.format("YYYY-MM-DD")}});selectRow(r,e){this.selectedRow.set(r);let o=(e??[]).map(i=>({label:(0,x.default)(i).format("MMMM"),value:i}));this.dueInMonthControl.setValue(o),setTimeout(()=>this.selectTmpRef()?.open())}add(){this.facade.add({category:"Neu",value:0,due_in:"Sonder",type:"Fix"})}addValue(r){let e=r.due_in_month??[];e=e.map(i=>(0,x.default)(i).format("YYYY-MM"));let t=this.dueInMonthControl.value.map(i=>(0,x.default)(i.value).format("YYYY-MM"));e=Array.from(new Set([...e,...t])),e=e.map(i=>(0,x.default)(i).format("YYYY-MM-DD"));let o=E(M({},r),{due_in_month:e});o.due_in_month=Array.from(new Set(o.due_in_month)),this.facade.update(o),this.selectedRow.set(null),this.dueInMonthControl.setValue(null)}removeValue(r,e){let o=(r.due_in_month??[]).filter(a=>(0,x.default)(a).month()!==(0,x.default)(e.value).month()),i=E(M({},r),{due_in_month:o});this.facade.update(i)}delete(r){this.facade.delete(r,"Sonder","Fix")}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=u({type:n,selectors:[["app-special-costs"]],viewQuery:function(e,t){e&1&&Oe(t.dueInMonthsTmp,bt,5)(t.selectTmpRef,$,5),e&2&&De(2)},decls:3,vars:7,consts:[["dueInMonth",""],["popover",""],["headerTitle","Sonderkosten","headerIcon","BanknoteArrowDown",3,"addRow","updateRow","deleteRow","data","total","isLoading","isSaving","isAdded","col3Template","hasSum"],[1,"flex","h-5","overflow-visible"],["bindLabel","label",1,"w-2/3",3,"items","formControl","clearable","multiple","appendTo"],["bindLabel","label",1,"w-2/3",3,"change","remove","close","items","formControl","clearable","multiple","appendTo"],["icon","Info",1,"block","h-5","w-24","flex-auto","pl-3",3,"click","mtxPopoverTriggerFor"],[3,"position"]],template:function(e,t){if(e&1){let o=D();d(0,"app-money-table-v2",2),v("addRow",function(){return m(o),f(t.add())})("updateRow",function(a){return m(o),f(t.addValue(a))})("deleteRow",function(a){return m(o),f(t.delete(a))}),p(),V(1,wt,3,1,"ng-template",null,0,Ne)}if(e&2){let o=ce(2);c("data",t.specialCosts())("total",t.total())("isLoading",t.isLoading())("isSaving",!1)("isAdded",t.isAdded())("col3Template",o)("hasSum",!1)}},dependencies:[$,S,Xe,Qe,_,Ke,U,it,W],encapsulation:2})};var Z=class n{facade=s(h);budgets=this.facade.budgets;total=this.facade.totalBudgets;isLoading=this.facade.isLoading;isSaving=this.facade.isSaving;isAdded=this.facade.isFixedAdded;add(){this.facade.add({category:"Neu",value:0,due_in:"Alle",type:"Budget"})}update(r){this.facade.update(r)}delete(r){this.facade.delete(r,"Alle","Budget")}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=u({type:n,selectors:[["app-budgets"]],decls:1,vars:5,consts:[["headerTitle","Budgets","headerIcon","BanknoteArrowDown",3,"addRow","updateRow","deleteRow","data","total","isLoading","isAdded","isSaving"]],template:function(e,t){e&1&&(d(0,"app-money-table-v2",0),v("addRow",function(){return t.add()})("updateRow",function(i){return t.update(i)})("deleteRow",function(i){return t.delete(i)}),p()),e&2&&c("data",t.budgets())("total",t.total())("isLoading",t.isLoading())("isAdded",t.isAdded())("isSaving",!1)},dependencies:[_],encapsulation:2})};var J=class n{facade=s(Q);revenue=this.facade.revenue;total=this.facade.total;isLoading=this.facade.isLoading;isSaving=this.facade.isSaving;isAdded=this.facade.isAdded;constructor(){this.facade.loadRevenue()}addRevenue(){this.facade.addRevenue({category:"",value:0})}updateRevenue(r){this.facade.updateRevenue(r)}deleteRevenue(r){this.facade.deleteRevenue(r)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=u({type:n,selectors:[["app-revenue-base-table"]],decls:1,vars:5,consts:[["headerTitle","Einnahmen","headerIcon","BanknoteArrowUp",3,"addRow","updateRow","deleteRow","data","total","isLoading","isSaving","isAdded"]],template:function(e,t){e&1&&(d(0,"app-money-table-v2",0),v("addRow",function(){return t.addRevenue()})("updateRow",function(i){return t.updateRevenue(i)})("deleteRow",function(i){return t.deleteRevenue(i)}),p()),e&2&&c("data",t.revenue())("total",t.total())("isLoading",t.isLoading())("isSaving",t.isSaving())("isAdded",t.isAdded())},dependencies:[H,S,_],encapsulation:2})};function yt(n,r){n&1&&g(0,"mat-spinner",5)}var rt=class n{fixedCostsFacade=s(h);revenueFacade=s(Q);balance=X(()=>this.revenueFacade.total()-this.fixedCostsFacade.totalFixedCosts());isSavingCosts=this.fixedCostsFacade.isSaving;static \u0275fac=function(e){return new(e||n)};static \u0275cmp=u({type:n,selectors:[["app-base"]],decls:13,vars:2,consts:[["title","Einnahmen & Ausgaben"],[1,"container-max-sm","mt-2","flex","flex-col","gap-4","p-2","md:p-6"],[1,"flex","flex-col","gap-4"],[1,"flex","items-center","gap-1"],[1,"pl-2","text-xl","font-semibold"],["diameter","18"],[3,"balance"]],template:function(e,t){e&1&&(g(0,"app-header",0),d(1,"section",1)(2,"cdk-accordion",2),g(3,"app-revenue-base-table"),d(4,"header",3)(5,"h1",4),Y(6,"Ausgaben"),p(),k(7,yt,1,0,"mat-spinner",5),p(),g(8,"app-fixed-costs-table")(9,"app-budgets")(10,"app-quarterly-costs")(11,"app-special-costs"),p(),g(12,"app-balance",6),p()),e&2&&(b(7),O(t.isSavingCosts()?7:-1),b(5),c("balance",t.balance()))},dependencies:[J,Ue,Ge,q,tt,Z,z,Ze,G],encapsulation:2})};export{rt as BaseComponent};
