import{Ab as R,B as f,Bb as b,Cb as l,Db as m,E as i,Za as u,l as c,o as v,tb as x,ub as C,vb as d,wb as F,x as p,xb as y,yb as h,zb as g}from"./chunk-YC3UVYFH.js";var S=class s{getFixedCosts(){return c(l.from("fixed_costs").select("*").order("id")).pipe(v(e=>e.data??null))}addFixedCost(e){return c(l.from("fixed_costs").insert(e).select("*").single()).pipe(v(t=>t.data))}updateFixedCost(e){return c(l.from("fixed_costs").update({category:e.category,value:e.value,due_in:e.due_in}).eq("id",e.id).select("*").single()).pipe(v(t=>t.data))}deleteFixedCost(e){return c(l.from("fixed_costs").delete().eq("id",e))}static \u0275fac=function(t){return new(t||s)};static \u0275prov=f({token:s,factory:s.\u0275fac})};var n=h({source:"Fixed Costs",events:{load:void 0,loadSuccess:void 0,add:void 0,addSuccess:void 0,addFailure:void 0,update:void 0,updateSuccess:void 0,updateFailure:void 0,delete:void 0,deleteSuccess:void 0,deleteFailure:void 0}}),r={load:n.load,loadSuccess:n.loadSuccess,add:n.add,addSuccess:n.addSuccess,addFailure:n.addFailure,update:n.update,updateSuccess:n.updateSuccess,updateFailure:n.updateFailure,delete:n.delete,deleteSuccess:n.deleteSuccess,deleteFailure:n.deleteFailure};function I(){let s=i(F),e=i(S);return{$load:s.on(r.load).pipe(p(()=>e.getFixedCosts().pipe(m({next:t=>r.loadSuccess(t),error:console.error})))),add$:s.on(r.add).pipe(p(({payload:t})=>e.addFixedCost(t).pipe(m({next:o=>r.addSuccess(o),error:o=>r.addFailure(o)})))),update$:s.on(r.update).pipe(p(({payload:t})=>e.updateFixedCost(t).pipe(m({next:o=>r.updateSuccess(o),error:o=>r.updateFailure(o)})))),delete$:s.on(r.delete).pipe(p(({payload:{id:t,dueIn:o}})=>e.deleteFixedCost(t).pipe(m({next:()=>r.deleteSuccess({id:t,dueIn:o}),error:M=>r.deleteFailure(M)}))))}}var D=x(b("fixed-costs"),C({fixedCosts:[],quarterlyCosts:[],specialCosts:[],loadProcessStatus:"init",saveProcessStatus:"init",addProcessStatus:"init"}),g(()=>I()),R(d(r.load,()=>({loadProcessStatus:"pending"})),d(r.loadSuccess,({payload:s})=>({fixedCosts:s?.filter(e=>e.due_in==="Alle")??[],quarterlyCosts:s?.filter(e=>e.due_in==="Quartal")??[],specialCosts:s?.filter(e=>e.due_in==="Sonder")??[],loadProcessStatus:"success"})),d(r.add,()=>({addProcessStatus:"pending"})),d(r.addSuccess,({payload:s},e)=>s.due_in==="Quartal"?{quarterlyCosts:e.quarterlyCosts.concat(s),addProcessStatus:"success"}:s.due_in==="Sonder"?{specialCosts:e.specialCosts.concat(s),addProcessStatus:"success"}:{fixedCosts:e.fixedCosts.concat(s),addProcessStatus:"success"}),d(r.update,()=>({saveProcessStatus:"pending"})),d(r.updateSuccess,({payload:s},e)=>s.due_in==="Quartal"?{quarterlyCosts:e.quarterlyCosts.map(t=>t.id===s.id?s:t),saveProcessStatus:"success"}:s.due_in==="Sonder"?{specialCosts:e.specialCosts.map(t=>t.id===s.id?s:t),saveProcessStatus:"success"}:{fixedCosts:e.fixedCosts.map(t=>t.id===s.id?s:t),saveProcessStatus:"success"}),d(r.deleteSuccess,({payload:{id:s,dueIn:e}},t)=>{switch(e){case"Quartal":return{quarterlyCosts:t.quarterlyCosts.filter(o=>o.id!==s)};case"Sonder":return{specialCosts:t.specialCosts.filter(o=>o.id!==s)};default:return{fixedCosts:t.fixedCosts.filter(o=>o.id!==s)}}})));var w=class s{dispatcher=i(y);store=i(D);loadProcessStatus=this.store.loadProcessStatus;saveProcessStatus=this.store.saveProcessStatus;addProcessStatus=this.store.addProcessStatus;fixedCosts=this.store.fixedCosts;quarterlyCosts=this.store.quarterlyCosts;specialCosts=this.store.specialCosts;isLoading=u(()=>this.loadProcessStatus()==="pending");isSaving=u(()=>this.saveProcessStatus()==="pending");isAdded=u(()=>this.addProcessStatus()==="success");totalFixedCosts=u(()=>this.store.fixedCosts().reduce((e,t)=>e+t.value,0));totalQuarterlyCosts=u(()=>this.quarterlyCosts().reduce((e,t)=>e+t.value,0));totalSpecialCosts=u(()=>this.specialCosts().reduce((e,t)=>e+t.value,0));loadFixedCosts(){this.dispatcher.dispatch(r.load())}add(e){this.dispatcher.dispatch(r.add(e))}update(e){this.dispatcher.dispatch(r.update(e))}delete(e,t){this.dispatcher.dispatch(r.delete({id:e,dueIn:t}))}static \u0275fac=function(t){return new(t||s)};static \u0275prov=f({token:s,factory:s.\u0275fac})};function ue(){return[S,w,D]}var a=h({source:"Revenue",events:{load:void 0,loadSuccess:void 0,add:void 0,addSuccess:void 0,addFailure:void 0,update:void 0,updateSuccess:void 0,updateFailure:void 0,delete:void 0,deleteSuccess:void 0,deleteFailure:void 0}});var P=class s{getRevenue(){return c(l.from("revenue").select("*").order("id")).pipe(v(e=>e.data??null))}addRevenue(e){return c(l.from("revenue").insert(e).select("*").single()).pipe(v(t=>t.data))}updateRevenue(e){return c(l.from("revenue").update({category:e.category,value:e.value}).eq("id",e.id).select("*").single()).pipe(v(t=>t.data))}deleteRevenue(e){return c(l.from("revenue").delete().eq("id",e))}static \u0275fac=function(t){return new(t||s)};static \u0275prov=f({token:s,factory:s.\u0275fac})};function j(){let s=i(F),e=i(P);return{$load:s.on(a.load).pipe(p(()=>e.getRevenue().pipe(m({next:t=>a.loadSuccess(t),error:console.error})))),add$:s.on(a.add).pipe(p(({payload:t})=>e.addRevenue(t).pipe(m({next:o=>a.addSuccess(o),error:o=>a.addFailure(o)})))),update$:s.on(a.update).pipe(p(({payload:t})=>e.updateRevenue(t).pipe(m({next:o=>a.updateSuccess(o),error:o=>a.updateFailure(o)})))),delete$:s.on(a.delete).pipe(p(({payload:t})=>e.deleteRevenue(t).pipe(m({next:()=>a.deleteSuccess(t),error:o=>a.deleteFailure(o)}))))}}var A=x(b("revenue"),C({revenue:new Array,loadProcessStatus:"init",saveProcessStatus:"init",addProcessStatus:"init"}),g(()=>j()),R(d(a.load,()=>({loadProcessStatus:"pending"})),d(a.loadSuccess,({payload:s})=>({revenue:s??[],loadProcessStatus:"success"})),d(a.add,()=>({addProcessStatus:"pending"})),d(a.addSuccess,({payload:s},e)=>({revenue:e.revenue.concat(s),addProcessStatus:"success"})),d(a.update,()=>({saveProcessStatus:"pending"})),d(a.updateSuccess,({payload:s},e)=>({revenue:e.revenue.map(t=>t.id===s.id?s:t),saveProcessStatus:"success"})),d(a.deleteSuccess,({payload:s},e)=>({revenue:e.revenue.filter(t=>t.id!==s)}))));var q=class s{dispatcher=i(y);store=i(A);loadProcessStatus=this.store.loadProcessStatus;saveProcessStatus=this.store.saveProcessStatus;addProcessStatus=this.store.addProcessStatus;revenue=this.store.revenue;isLoading=u(()=>this.loadProcessStatus()==="pending");isSaving=u(()=>this.saveProcessStatus()==="pending");isAdded=u(()=>this.addProcessStatus()==="success");total=u(()=>this.store.revenue().reduce((e,t)=>e+t.value,0));loadRevenue(){this.dispatcher.dispatch(a.load())}addRevenue(e){this.dispatcher.dispatch(a.add(e))}updateRevenue(e){this.dispatcher.dispatch(a.update(e))}deleteRevenue(e){this.dispatcher.dispatch(a.delete(e))}static \u0275fac=function(t){return new(t||s)};static \u0275prov=f({token:s,factory:s.\u0275fac})};function _e(){return[P,q,A]}export{w as a,ue as b,q as c,_e as d};
