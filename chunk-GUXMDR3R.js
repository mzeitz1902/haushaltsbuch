import{a as u,c as S}from"./chunk-AQAGSDRU.js";import{a as A}from"./chunk-P54OROAN.js";import{a as O}from"./chunk-BDWV27QP.js";import{Aa as R,Dc as h,Ea as p,Fa as r,Fd as te,Ga as s,Gd as M,Ha as g,Hd as oe,N as l,Oa as x,P as C,Q as _,Qa as m,Ra as c,Xd as f,Y,Yd as ne,Za as Q,_a as U,a as E,b as j,d as q,ea as b,eb as T,gb as z,ka as d,na as $,ob as G,pb as J,qa as H,qd as ee,rb as K,tc as W,ub as F,wc as X,yc as Z,za as y,zb as k}from"./chunk-7DKHPSUB.js";var D=class n{facade=l(u);fixedCosts=this.facade.fixedCosts;isLoading=this.facade.isLoading;isSaving=this.facade.isSaving;isAdded=this.facade.isFixedAdded;total=this.facade.totalFixedCosts;constructor(){this.facade.loadFixedCosts()}addFixedCost(){this.facade.add({category:"",value:0,due_in:"Alle",type:"Fix"})}updateFixedCost(o){this.facade.update(o)}deleteFixedCost(o){this.facade.delete(o,"Alle")}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=d({type:n,selectors:[["app-fixed-costs-table"]],decls:1,vars:5,consts:[["headerTitle","Fixkosten","headerIcon","BanknoteArrowDown",3,"addRow","updateRow","deleteRow","data","total","isLoading","isAdded","isSaving"]],template:function(e,t){e&1&&(r(0,"app-money-table",0),m("addRow",function(){return t.addFixedCost()})("updateRow",function(i){return t.updateFixedCost(i)})("deleteRow",function(i){return t.deleteFixedCost(i)}),s()),e&2&&p("data",t.fixedCosts())("total",t.total())("isLoading",t.isLoading())("isAdded",t.isAdded())("isSaving",!1)},dependencies:[M,f,h],encapsulation:2})};var N=class n{facade=l(u);quarterlyCosts=this.facade.quarterlyCosts;total=this.facade.totalQuarterlyCosts;isLoading=this.facade.isLoading;isAdded=this.facade.isQuarterlyAdded;add(){this.facade.add({category:"",value:0,due_in:"Quartal",type:"Fix"})}update(o){this.facade.update(o)}delete(o){this.facade.delete(o,"Quartal")}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=d({type:n,selectors:[["app-quarterly-costs"]],decls:1,vars:5,consts:[["headerTitle","Quartalskosten","headerIcon","BanknoteArrowDown",3,"addRow","updateRow","deleteRow","data","total","isLoading","isSaving","isAdded"]],template:function(e,t){e&1&&(r(0,"app-money-table",0),m("addRow",function(){return t.add()})("updateRow",function(i){return t.update(i)})("deleteRow",function(i){return t.delete(i)}),s()),e&2&&p("data",t.quarterlyCosts())("total",t.total())("isLoading",t.isLoading())("isSaving",!1)("isAdded",t.isAdded())},dependencies:[f],encapsulation:2})};var ie=q(O());var ae=q(O());var I=class n{transform(o){return o===null?null:o.map(e=>(0,ae.default)(e).format("MMMM"))}static \u0275fac=function(e){return new(e||n)};static \u0275pipe=$({name:"toMonth",type:n,pure:!0})};var re=["dueInMonth"];function de(n,o){if(n&1){let e=x();r(0,"ng-select",5),m("change",function(){C(e);let a=c().$implicit,i=c();return _(i.update(a))})("close",function(){C(e);let a=c(2);return _(a.selectedRow.set(null))}),s()}if(n&2){let e=c(2);p("items",e.months)("formControl",e.dueInMonthControl)("clearable",!1)("multiple",!0)("appendTo","body")}}function le(n,o){if(n&1){let e=x();r(0,"span",6),m("click",function(){C(e);let a=c().$implicit,i=c();return _(i.selectRow(a.id,a.due_in_month))}),T(1),G(2,"toMonth"),s()}if(n&2){let e=c().$implicit;b(),z(" ",J(2,1,e.due_in_month)," ")}}function pe(n,o){if(n&1&&(r(0,"div",2),y(1,de,1,5,"ng-select",3)(2,le,3,3,"span",4),s()),n&2){let e=o.$implicit,t=c();b(),R(t.selectedRow()===e.id?1:2)}}var L=class n{facade=l(u);specialCosts=this.facade.specialCosts;total=this.facade.totalSpecialCosts;isLoading=this.facade.isLoading;isAdded=this.facade.isSpecialAdded;dueInMonthsTmp=k.required("dueInMonth");selectTmpRef=k(A);selectedRow=Y(null);additionalColumns=F(()=>[{name:"due_in_month",template:this.dueInMonthsTmp()}]);dueInMonthControl=new X([],{nonNullable:!0});months=Array.from({length:12},(o,e)=>{let t=(0,ie.default)().month(e);return{label:t.format("MMMM"),value:t.format("YYYY-MM-DD")}});selectRow(o,e){this.selectedRow.set(o),this.dueInMonthControl.setValue(e),setTimeout(()=>this.selectTmpRef()?.open())}add(){this.facade.add({category:"",value:0,due_in:"Sonder",type:"Fix"})}update(o){let e=j(E({},o),{due_in_month:o.due_in_month?[...o.due_in_month,...this.dueInMonthControl.value]:[...this.dueInMonthControl.value]});e.due_in_month=Array.from(new Set(e.due_in_month)),this.facade.update(e),this.selectedRow.set(null),this.dueInMonthControl.setValue(null)}delete(o){this.facade.delete(o,"Sonder")}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=d({type:n,selectors:[["app-special-costs"]],viewQuery:function(e,t){e&1&&(Q(t.dueInMonthsTmp,re,5),Q(t.selectTmpRef,A,5)),e&2&&U(2)},decls:3,vars:6,consts:[["dueInMonth",""],["headerTitle","Sonderkosten","headerIcon","BanknoteArrowDown",3,"addRow","updateRow","deleteRow","data","total","isLoading","isSaving","isAdded","customColumns"],[1,"flex","h-5","justify-end","overflow-visible"],["bindLabel","label","bindValue","value",1,"w-24",3,"items","formControl","clearable","multiple","appendTo"],[1,"block","h-5","w-24","pl-3"],["bindLabel","label","bindValue","value",1,"w-24",3,"change","close","items","formControl","clearable","multiple","appendTo"],[1,"block","h-5","w-24","pl-3",3,"click"]],template:function(e,t){if(e&1){let a=x();r(0,"app-money-table",1),m("addRow",function(){return C(a),_(t.add())})("updateRow",function(V){return C(a),_(t.update(V))})("deleteRow",function(V){return C(a),_(t.delete(V))}),s(),H(1,pe,3,1,"ng-template",null,0,K)}e&2&&p("data",t.specialCosts())("total",t.total())("isLoading",t.isLoading())("isSaving",!1)("isAdded",t.isAdded())("customColumns",t.additionalColumns())},dependencies:[f,A,h,W,Z,I],encapsulation:2})};var B=class n{static \u0275fac=function(e){return new(e||n)};static \u0275cmp=d({type:n,selectors:[["app-budgets"]],decls:0,vars:0,template:function(e,t){},encapsulation:2})};var P=class n{facade=l(S);revenue=this.facade.revenue;total=this.facade.total;isLoading=this.facade.isLoading;isSaving=this.facade.isSaving;isAdded=this.facade.isAdded;constructor(){this.facade.loadRevenue()}addRevenue(){this.facade.addRevenue({category:"",value:0})}updateRevenue(o){this.facade.updateRevenue(o)}deleteRevenue(o){this.facade.deleteRevenue(o)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=d({type:n,selectors:[["app-revenue-base-table"]],decls:1,vars:5,consts:[["headerTitle","Einnahmen","headerIcon","BanknoteArrowUp",3,"addRow","updateRow","deleteRow","data","total","isLoading","isSaving","isAdded"]],template:function(e,t){e&1&&(r(0,"app-money-table",0),m("addRow",function(){return t.addRevenue()})("updateRow",function(i){return t.updateRevenue(i)})("deleteRow",function(i){return t.deleteRevenue(i)}),s()),e&2&&p("data",t.revenue())("total",t.total())("isLoading",t.isLoading())("isSaving",t.isSaving())("isAdded",t.isAdded())},dependencies:[M,h,f],encapsulation:2})};function me(n,o){n&1&&g(0,"mat-spinner",5)}var se=class n{fixedCostsFacade=l(u);revenueFacade=l(S);balance=F(()=>this.revenueFacade.total()-this.fixedCostsFacade.totalFixedCosts());isSavingCosts=this.fixedCostsFacade.isSaving;static \u0275fac=function(e){return new(e||n)};static \u0275cmp=d({type:n,selectors:[["app-base"]],decls:13,vars:2,consts:[["title","Einnahmen & Ausgaben"],[1,"container-max-sm","mt-2","flex","flex-col","gap-4","p-2","md:p-6"],[1,"flex","flex-col","gap-4"],[1,"flex","items-center","gap-1"],[1,"pl-2","text-xl","font-semibold"],["diameter","18"],[3,"balance"]],template:function(e,t){e&1&&(g(0,"app-header",0),r(1,"section",1)(2,"cdk-accordion",2),g(3,"app-revenue-base-table"),r(4,"header",3)(5,"h1",4),T(6,"Ausgaben"),s(),y(7,me,1,0,"mat-spinner",5),s(),g(8,"app-fixed-costs-table")(9,"app-quarterly-costs")(10,"app-special-costs")(11,"app-budgets"),s(),g(12,"app-balance",6),s()),e&2&&(b(7),R(t.isSavingCosts()?7:-1),b(5),p("balance",t.balance()))},dependencies:[P,ee,oe,D,ne,B,N,te,L],encapsulation:2})};export{se as BaseComponent};
