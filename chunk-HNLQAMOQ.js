import{a as u,c as A}from"./chunk-7XH6Y6QH.js";import{c as I}from"./chunk-ZZ33NGSQ.js";import{a as W}from"./chunk-IL4SDYRN.js";import{Aa as x,Ba as M,Cc as X,Cd as te,Eb as Q,Fc as Z,Ga as l,Ha as d,Hc as ee,Ia as s,Ja as v,Mc as w,O as r,Q as _,Qa as T,R as C,Rd as oe,Sa as m,Sd as D,Td as ne,Ua as c,Z as q,a as Y,ab as U,b as E,bb as z,d as j,ea as h,hb as F,he as f,jb as G,je as ae,la as p,oa as $,ra as H,sb as J,tb as K,vb as O,zb as S}from"./chunk-PX3AYQVY.js";var B=class i{facade=r(u);fixedCosts=this.facade.fixedCosts;isLoading=this.facade.isLoading;isSaving=this.facade.isSaving;isAdded=this.facade.isFixedAdded;total=this.facade.totalFixedCosts;constructor(){this.facade.loadFixedCosts()}addFixedCost(){this.facade.add({category:"Neu",value:0,due_in:"Alle",type:"Fix"})}updateFixedCost(o){this.facade.update(o)}deleteFixedCost(o){this.facade.delete(o,"Alle","Fix")}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=p({type:i,selectors:[["app-fixed-costs-table"]],decls:1,vars:5,consts:[["headerTitle","Fixkosten","headerIcon","BanknoteArrowDown",3,"addRow","updateRow","deleteRow","data","total","isLoading","isAdded","isSaving"]],template:function(e,t){e&1&&(d(0,"app-money-table",0),m("addRow",function(){return t.addFixedCost()})("updateRow",function(n){return t.updateFixedCost(n)})("deleteRow",function(n){return t.deleteFixedCost(n)}),s()),e&2&&l("data",t.fixedCosts())("total",t.total())("isLoading",t.isLoading())("isAdded",t.isAdded())("isSaving",!1)},dependencies:[D,f,w],encapsulation:2})};var N=class i{facade=r(u);quarterlyCosts=this.facade.quarterlyCosts;total=this.facade.totalQuarterlyCosts;isLoading=this.facade.isLoading;isAdded=this.facade.isQuarterlyAdded;add(){this.facade.add({category:"Neu",value:0,due_in:"Quartal",type:"Fix"})}update(o){this.facade.update(o)}delete(o){this.facade.delete(o,"Quartal","Fix")}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=p({type:i,selectors:[["app-quarterly-costs"]],decls:1,vars:5,consts:[["headerTitle","Quartalskosten","headerIcon","BanknoteArrowDown",3,"addRow","updateRow","deleteRow","data","total","isLoading","isSaving","isAdded"]],template:function(e,t){e&1&&(d(0,"app-money-table",0),m("addRow",function(){return t.add()})("updateRow",function(n){return t.update(n)})("deleteRow",function(n){return t.delete(n)}),s()),e&2&&l("data",t.quarterlyCosts())("total",t.total())("isLoading",t.isLoading())("isSaving",!1)("isAdded",t.isAdded())},dependencies:[f],encapsulation:2})};var g=j(W());var ie=j(W());var L=class i{transform(o){return o===null?null:o.map(e=>(0,ie.default)(e).format("MMMM"))}static \u0275fac=function(e){return new(e||i)};static \u0275pipe=$({name:"toMonth",type:i,pure:!0})};var de=["dueInMonth"];function re(i,o){if(i&1){let e=T();d(0,"ng-select",5),m("change",function(){_(e);let a=c().$implicit,n=c();return C(n.addValue(a))})("remove",function(a){_(e);let n=c().$implicit,b=c();return C(b.removeValue(n,a))})("close",function(){_(e);let a=c(2);return C(a.selectedRow.set(null))}),s()}if(i&2){let e=c(2);l("items",e.months)("formControl",e.dueInMonthControl)("clearable",!1)("multiple",!0)("appendTo","body")}}function le(i,o){if(i&1){let e=T();d(0,"span",6),m("click",function(){_(e);let a=c().$implicit,n=c();return C(n.selectRow(a.id,a.due_in_month))}),F(1),J(2,"toMonth"),s()}if(i&2){let e=c().$implicit;h(),G(" ",K(2,1,e.due_in_month)," ")}}function pe(i,o){if(i&1&&(d(0,"div",2),x(1,re,1,5,"ng-select",3)(2,le,3,3,"span",4),s()),i&2){let e=o.$implicit,t=c();h(),M(t.selectedRow()===e.id?1:2)}}var V=class i{facade=r(u);specialCosts=this.facade.specialCosts;total=this.facade.totalSpecialCosts;isLoading=this.facade.isLoading;isAdded=this.facade.isSpecialAdded;dueInMonthsTmp=Q.required("dueInMonth");selectTmpRef=Q(I);selectedRow=q(null);additionalColumns=S(()=>[{name:"due_in_month",template:this.dueInMonthsTmp()}]);dueInMonthControl=new Z([],{nonNullable:!0});months=Array.from({length:12},(o,e)=>{let t=(0,g.default)().month(e);return{label:t.format("MMMM"),value:t.format("YYYY-MM-DD")}});selectRow(o,e){this.selectedRow.set(o);let a=(e??[]).map(n=>({label:(0,g.default)(n).format("MMMM"),value:n}));this.dueInMonthControl.setValue(a),setTimeout(()=>this.selectTmpRef()?.open())}add(){this.facade.add({category:"Neu",value:0,due_in:"Sonder",type:"Fix"})}addValue(o){let e=o.due_in_month??[];e=e.map(n=>(0,g.default)(n).format("YYYY-MM"));let t=this.dueInMonthControl.value.map(n=>(0,g.default)(n.value).format("YYYY-MM"));e=Array.from(new Set([...e,...t])),e=e.map(n=>(0,g.default)(n).format("YYYY-MM-DD"));let a=E(Y({},o),{due_in_month:e});a.due_in_month=Array.from(new Set(a.due_in_month)),this.facade.update(a),this.selectedRow.set(null),this.dueInMonthControl.setValue(null)}removeValue(o,e){let a=(o.due_in_month??[]).filter(b=>(0,g.default)(b).month()!==(0,g.default)(e.value).month()),n=E(Y({},o),{due_in_month:a});this.facade.update(n)}delete(o){this.facade.delete(o,"Sonder","Fix")}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=p({type:i,selectors:[["app-special-costs"]],viewQuery:function(e,t){e&1&&U(t.dueInMonthsTmp,de,5)(t.selectTmpRef,I,5),e&2&&z(2)},decls:3,vars:6,consts:[["dueInMonth",""],["headerTitle","Sonderkosten","headerIcon","BanknoteArrowDown",3,"addRow","updateRow","deleteRow","data","total","isLoading","isSaving","isAdded","customColumns"],[1,"flex","h-5","overflow-visible"],["bindLabel","label",1,"w-2/3",3,"items","formControl","clearable","multiple","appendTo"],[1,"block","h-5","w-24","flex-auto","pl-3"],["bindLabel","label",1,"w-2/3",3,"change","remove","close","items","formControl","clearable","multiple","appendTo"],[1,"block","h-5","w-24","flex-auto","pl-3",3,"click"]],template:function(e,t){if(e&1){let a=T();d(0,"app-money-table",1),m("addRow",function(){return _(a),C(t.add())})("updateRow",function(b){return _(a),C(t.addValue(b))})("deleteRow",function(b){return _(a),C(t.delete(b))}),s(),H(1,pe,3,1,"ng-template",null,0,O)}e&2&&l("data",t.specialCosts())("total",t.total())("isLoading",t.isLoading())("isSaving",!1)("isAdded",t.isAdded())("customColumns",t.additionalColumns())},dependencies:[f,I,w,X,ee,L],encapsulation:2})};var P=class i{facade=r(u);budgets=this.facade.budgets;total=this.facade.totalBudgets;isLoading=this.facade.isLoading;isSaving=this.facade.isSaving;isAdded=this.facade.isFixedAdded;add(){this.facade.add({category:"Neu",value:0,due_in:"Alle",type:"Budget"})}update(o){this.facade.update(o)}delete(o){this.facade.delete(o,"Alle","Budget")}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=p({type:i,selectors:[["app-budgets"]],decls:1,vars:5,consts:[["headerTitle","Budgets","headerIcon","BanknoteArrowDown",3,"addRow","updateRow","deleteRow","data","total","isLoading","isAdded","isSaving"]],template:function(e,t){e&1&&(d(0,"app-money-table",0),m("addRow",function(){return t.add()})("updateRow",function(n){return t.update(n)})("deleteRow",function(n){return t.delete(n)}),s()),e&2&&l("data",t.budgets())("total",t.total())("isLoading",t.isLoading())("isAdded",t.isAdded())("isSaving",!1)},dependencies:[f],encapsulation:2})};var k=class i{facade=r(A);revenue=this.facade.revenue;total=this.facade.total;isLoading=this.facade.isLoading;isSaving=this.facade.isSaving;isAdded=this.facade.isAdded;constructor(){this.facade.loadRevenue()}addRevenue(){this.facade.addRevenue({category:"",value:0})}updateRevenue(o){this.facade.updateRevenue(o)}deleteRevenue(o){this.facade.deleteRevenue(o)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=p({type:i,selectors:[["app-revenue-base-table"]],decls:1,vars:5,consts:[["headerTitle","Einnahmen","headerIcon","BanknoteArrowUp",3,"addRow","updateRow","deleteRow","data","total","isLoading","isSaving","isAdded"]],template:function(e,t){e&1&&(d(0,"app-money-table",0),m("addRow",function(){return t.addRevenue()})("updateRow",function(n){return t.updateRevenue(n)})("deleteRow",function(n){return t.deleteRevenue(n)}),s()),e&2&&l("data",t.revenue())("total",t.total())("isLoading",t.isLoading())("isSaving",t.isSaving())("isAdded",t.isAdded())},dependencies:[D,w,f],encapsulation:2})};function me(i,o){i&1&&v(0,"mat-spinner",5)}var se=class i{fixedCostsFacade=r(u);revenueFacade=r(A);balance=S(()=>this.revenueFacade.total()-this.fixedCostsFacade.totalFixedCosts());isSavingCosts=this.fixedCostsFacade.isSaving;static \u0275fac=function(e){return new(e||i)};static \u0275cmp=p({type:i,selectors:[["app-base"]],decls:13,vars:2,consts:[["title","Einnahmen & Ausgaben"],[1,"container-max-sm","mt-2","flex","flex-col","gap-4","p-2","md:p-6"],[1,"flex","flex-col","gap-4"],[1,"flex","items-center","gap-1"],[1,"pl-2","text-xl","font-semibold"],["diameter","18"],[3,"balance"]],template:function(e,t){e&1&&(v(0,"app-header",0),d(1,"section",1)(2,"cdk-accordion",2),v(3,"app-revenue-base-table"),d(4,"header",3)(5,"h1",4),F(6,"Ausgaben"),s(),x(7,me,1,0,"mat-spinner",5),s(),v(8,"app-fixed-costs-table")(9,"app-budgets")(10,"app-quarterly-costs")(11,"app-special-costs"),s(),v(12,"app-balance",6),s()),e&2&&(h(7),M(t.isSavingCosts()?7:-1),h(5),l("balance",t.balance()))},dependencies:[k,te,ne,B,ae,P,N,oe,V],encapsulation:2})};export{se as BaseComponent};
