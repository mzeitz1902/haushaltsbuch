import{a as E}from"./chunk-BV2DY3ON.js";import{f as Et,g as Rt,h as At}from"./chunk-FPQMD3PS.js";import{a as ni,b as oi}from"./chunk-AMQZX7XM.js";import"./chunk-LRANXSOB.js";import{a as ai,b as ri,c as si}from"./chunk-6VH3ALWK.js";import{c as Te}from"./chunk-ITOCBLQG.js";import{a as Dt}from"./chunk-TKYGLH5L.js";import{$ as X,A as O,Aa as M,Ab as _t,Ad as kt,B as ot,Ba as w,Bb as yt,Cb as A,Cd as Nt,D as at,Da as mt,Db as T,Dd as Vt,Ea as Ce,Eb as ee,Ed as Lt,F as rt,Fa as ve,Fd as Ot,Ga as h,Gd as Pt,Ha as r,Hd as Bt,I as pe,Ia as s,Id as Wt,Ja as x,Jd as jt,K as z,Kb as Ct,Kd as Yt,Ld as zt,M as $,Mc as It,Md as $t,N as oe,Na as re,Nc as Ye,Nd as Ut,O as m,Oa as se,Ob as vt,Od as qt,Pb as bt,Pd as Gt,Q as f,Qa as C,Qb as xt,Qd as Kt,R as g,Ra as je,Rb as we,Rd as Qt,S as Pe,Sa as u,T as he,Td as Jt,Ua as d,Ub as Mt,Ud as Xt,V as st,Va as ut,Vb as wt,Wa as pt,X as fe,Yd as Zt,Z as k,Zc as te,Zd as ei,_ as U,a as Q,ab as be,b as ue,ba as Be,bb as xe,be as ti,ca as ge,cb as Me,d as Qe,da as Z,db as ht,dd as ze,e as Je,ea as c,eb as q,ed as St,ee as W,fe as j,gb as le,gd as $e,h as Le,hb as p,he as De,i as Oe,ib as P,ie as ii,jb as S,la as _,mb as ft,n as L,na as _e,nb as gt,o as Xe,oa as lt,p as Ze,pa as dt,qa as We,r as J,ra as N,s as et,sb as v,t as tt,tb as b,ua as ye,uc as Tt,v as it,va as ae,w as ne,wa as ct,wc as Ft,y as nt,ya as F,yd as Ht,za as I,zb as D,zd as B}from"./chunk-ERYDUTZI.js";var Ve=Qe(Dt());var Fe=class i{facade=m(E);revenue=this.facade.revenue;total=this.facade.totalRevenue;isLoading=this.facade.isMonthLoading;isSaving=this.facade.isSavingRevenue;isAdded=this.facade.isRevenueAdded;addRevenue(){this.facade.addRevenue()}updateRevenue(o){this.facade.updateRevenue(o)}deleteRevenue(o){this.facade.deleteRevenue(o)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=_({type:i,selectors:[["app-revenue-month-table"]],decls:1,vars:5,consts:[["headerTitle","Einnahmen","headerIcon","BanknoteArrowUp",3,"addRow","updateRow","deleteRow","data","total","isLoading","isSaving","isAdded"]],template:function(e,t){e&1&&(r(0,"app-money-table-v2",0),u("addRow",function(){return t.addRevenue()})("updateRow",function(a){return t.updateRevenue(a)})("deleteRow",function(a){return t.deleteRevenue(a)}),s()),e&2&&h("data",t.revenue())("total",t.total())("isLoading",t.isLoading())("isSaving",t.isSaving())("isAdded",t.isAdded())},dependencies:[De],encapsulation:2})};var Ie=class i{facade=m(E);fixedCosts=this.facade.fixedCosts;total=this.facade.totalFixedCosts;isLoading=this.facade.isMonthLoading;isSaving=this.facade.isSavingFixedCost;isAdded=this.facade.isFixedCostAdded;addFixedCost(){this.facade.addFixedCost()}updateFixedCost(o){this.facade.updateFixedCost(o)}deleteFixedCost(o){this.facade.deleteFixedCost(o)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=_({type:i,selectors:[["app-fixed-costs-month-table"]],decls:1,vars:5,consts:[["headerTitle","Fixkosten","headerIcon","BanknoteArrowDown",3,"addRow","updateRow","deleteRow","data","total","isLoading","isSaving","isAdded"]],template:function(e,t){e&1&&(r(0,"app-money-table-v2",0),u("addRow",function(){return t.addFixedCost()})("updateRow",function(a){return t.updateFixedCost(a)})("deleteRow",function(a){return t.deleteFixedCost(a)}),s()),e&2&&h("data",t.fixedCosts())("total",t.total())("isLoading",t.isLoading())("isSaving",t.isSaving())("isAdded",t.isAdded())},dependencies:[De],encapsulation:2})};var Ti=["value"],Fi=["note"],Ii=(i,o)=>o.id;function Si(i,o){if(i&1){let e=C();r(0,"input",9,0),u("blur",function(){f(e);let n=d(2);return g(n.submitAndReset())}),s(),F()}if(i&2){let e=d(2);I(e.form.value,"formField")}}function Ei(i,o){if(i&1){let e=C();r(0,"span",10),u("click",function(){f(e);let n=d().$implicit,a=d();return g(a.editValue(n))}),p(1),v(2,"currency"),s()}if(i&2){let e=d().$implicit;c(),S(" ",b(2,1,e.value)," ")}}function Ri(i,o){if(i&1){let e=C();r(0,"input",11,1),u("blur",function(){f(e);let n=d(2);return g(n.submitAndReset())}),s(),F()}if(i&2){let e=d(2);I(e.form.note,"formField")}}function Ai(i,o){if(i&1){let e=C();r(0,"span",12),u("click",function(){f(e);let n=d().$implicit,a=d();return g(a.editNote(n))}),p(1),s()}if(i&2){let e=d().$implicit;c(),P(e.note)}}function Hi(i,o){if(i&1){let e=C();r(0,"span",3),M(1,Si,2,2,"input",5)(2,Ei,3,3,"span",6),r(3,"span"),p(4),v(5,"date"),s(),M(6,Ri,2,2,"input",7)(7,Ai,2,1,"span"),r(8,"button",8),u("click",function(){let n=f(e).$implicit,a=d();return g(a.deleteHistory.emit(n.id))}),s()()}if(i&2){let e=o.$implicit,t=d();c(),w(t.selectedEntry()===e.id?1:2),c(3),P(b(5,3,e.date)),c(2),w(t.selectedEntry()===e.id?6:7)}}function ki(i,o){i&1&&p(0," Keine Historie vorhanden. ")}var Se=class i{facade=m(E);row=T.required();addHistory=A();updateHistory=A();deleteHistory=A();isAdded=this.facade.isHistoryEntryAdded;isMonthLoaded=this.facade.isMonthLoaded;selectedEntry=k(null);formModel=k(this.initForm());form=W(this.formModel);valueRef=ee("value");noteRef=ee("note");history=D(()=>this.row().history);focusValueOnAdd=U(()=>{this.isAdded()&&this.isMonthLoaded()&&X(()=>{let o=this.history();if(o.length===0)return;let e=o.at(-1);this.editValue(e)})});update(){this.updateHistory.emit(this.form().value())}editValue(o){this.setForm(o),this.selectedEntry.set(o.id),setTimeout(()=>this.valueRef()?.nativeElement.select())}editNote(o){this.setForm(o),this.selectedEntry.set(o.id),setTimeout(()=>this.noteRef()?.nativeElement.select())}submitAndReset(){this.update(),this.selectedEntry.set(null),this.formModel.set(this.initForm())}initForm(){return{id:null,value:null,date:null,note:""}}setForm(o){this.formModel.set({id:o.id,value:o.value,date:o.date,note:o.note??""})}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=_({type:i,selectors:[["app-history"]],viewQuery:function(e,t){e&1&&be(t.valueRef,Ti,5)(t.noteRef,Fi,5),e&2&&xe(2)},inputs:{row:[1,"row"]},outputs:{addHistory:"addHistory",updateHistory:"updateHistory",deleteHistory:"deleteHistory"},decls:6,vars:1,consts:[["value",""],["note",""],[1,"mb-2","flex","flex-col","gap-1"],[1,"grid","grid-cols-[2.5rem_4rem_4rem_min-content]","items-center","gap-4"],["maffiButton","","size","mini","icon","CirclePlus",1,"w-full","!justify-center",3,"click"],["type","number",1,"w-10","rounded","border-1","border-blue-400","bg-gray-600","p-1","outline-none",3,"formField"],[1,"self-right","flex","w-8","justify-end"],["type","text",1,"w-20","rounded","border-1","border-blue-400","bg-gray-600","p-1","outline-none",3,"formField"],["maffiButton","","icon","CircleMinus",3,"click"],["type","number",1,"w-10","rounded","border-1","border-blue-400","bg-gray-600","p-1","outline-none",3,"blur","formField"],[1,"self-right","flex","w-8","justify-end",3,"click"],["type","text",1,"w-20","rounded","border-1","border-blue-400","bg-gray-600","p-1","outline-none",3,"blur","formField"],[3,"click"]],template:function(e,t){e&1&&(r(0,"div",2),Ce(1,Hi,9,5,"span",3,Ii,!1,ki,1,0),s(),r(4,"button",4),u("click",function(){return t.addHistory.emit()}),p(5,` Hinzuf\xFCgen
`),s()),e&2&&(c(),ve(t.history()))},dependencies:[B,j,we,bt],encapsulation:2})};var Ni=["category"],Vi=["forecast"],Li=()=>["above","before"];function Oi(i,o){i&1&&x(0,"mat-spinner",11)}function Pi(i,o){i&1&&x(0,"td",36)}function Bi(i,o){if(i&1){let e=C();r(0,"input",40,3),u("blur",function(){f(e);let n=d(2);return g(n.updateAndReset())})("keyup.enter",function(){f(e);let n=d(2);return g(n.onCategoryEnterPressed())}),s(),F()}if(i&2){let e=d(2);I(e.form.category,"formField")}}function Wi(i,o){if(i&1){let e=C();r(0,"div",41),u("click",function(){f(e);let n=d().$implicit,a=d();return g(a.editCategory(n))}),r(1,"span"),p(2),s()()}if(i&2){let e=d().$implicit;c(2),S(" ",e.category," ")}}function ji(i,o){if(i&1&&(r(0,"td",37),M(1,Bi,2,2,"input",38)(2,Wi,3,1,"div",39),s()),i&2){let e=o.$implicit,t=d();c(),w(t.selectedRow()===e.id&&t.selectedField()==="category"?1:2)}}function Yi(i,o){i&1&&(r(0,"td",42),p(1," Summe "),s())}function zi(i,o){i&1&&(r(0,"td",43),p(1," Forecast "),s())}function $i(i,o){if(i&1){let e=C();r(0,"input",47,4),u("blur",function(){f(e);let n=d(2);return g(n.updateAndReset())}),s(),F()}if(i&2){let e=d(2);I(e.form.forecast,"formField")}}function Ui(i,o){if(i&1){let e=C();r(0,"div",48),u("click",function(){f(e);let n=d().$implicit,a=d();return g(a.editForecast(n))}),r(1,"span"),p(2),v(3,"currency"),s()()}if(i&2){let e=d().$implicit;c(2),S(" ",b(3,1,e.forecast)," ")}}function qi(i,o){if(i&1&&(r(0,"td",44),M(1,$i,2,2,"input",45)(2,Ui,4,3,"div",46),s()),i&2){let e=o.$implicit,t=d();c(),w(t.selectedRow()===e.id&&t.selectedField()==="forecast"?1:2)}}function Gi(i,o){if(i&1&&(r(0,"td",49),p(1),v(2,"currency"),s()),i&2){let e=d();c(),S(" ",b(2,1,e.forecastTotal())," ")}}function Ki(i,o){i&1&&(r(0,"td",43),p(1," Wert "),s())}function Qi(i,o){if(i&1){let e=C();r(0,"td",50)(1,"span",51),p(2),v(3,"currency"),s(),r(4,"mtx-popover",52,5)(6,"app-history",53),u("addHistory",function(){let n=f(e).$implicit,a=d();return g(a.addHistory.emit(n.id))})("deleteHistory",function(n){let a=f(e).$implicit,l=d();return g(l.deleteHistory.emit({rowId:a.id,historyId:n}))})("updateHistory",function(n){let a=f(e).$implicit,l=d();return g(l.updateHistory.emit({rowId:a.id,entry:n}))}),s()()()}if(i&2){let e=o.$implicit,t=Me(5),n=d();c(),q("!text-green-500",n.showForecast()&&e.value<e.forecast)("!text-red-500",n.showForecast()&&e.value>e.forecast),h("mtxPopoverTriggerFor",t)("mtxPopoverTriggerOn","click"),c(),S(" ",b(3,9,e.value)," "),c(2),h("position",gt(11,Li)),c(2),h("row",e)}}function Ji(i,o){if(i&1&&(r(0,"td",49),p(1),v(2,"currency"),s()),i&2){let e=d();q("!text-green-500",e.showForecast()&&e.total()<e.forecastTotal())("!text-red-500",e.showForecast()&&e.total()>e.forecastTotal()),c(),S(" ",b(2,5,e.total())," ")}}function Xi(i,o){i&1&&x(0,"td",36)}function Zi(i,o){if(i&1){let e=C();r(0,"td",54)(1,"button",55),u("click",function(){let n=f(e).$implicit,a=d();return g(a.deleteRow.emit(n.id))}),s()()}}function en(i,o){i&1&&x(0,"td",56)}function tn(i,o){i&1&&x(0,"tr",31)}function nn(i,o){if(i&1&&N(0,tn,1,0,"tr",57),i&2){let e=d();h("matHeaderRowDef",e.displayedColumns())}}function on(i,o){i&1&&x(0,"tr",58)}function an(i,o){i&1&&x(0,"tr",59)}function rn(i,o){if(i&1){let e=C();r(0,"button",60),ct("animate-fade-out"),ae("animate-fade-in"),u("click",function(n){return f(e),d().addRow.emit(),g(n.stopPropagation())}),p(1," Hinzuf\xFCgen "),s()}}var ie=class i{title=T.required();expanded=T.required();showForecast=T.required();data=T.required();isLoading=T.required();isSaving=T.required();isAdded=T.required();total=T.required();updateRow=A();deleteRow=A();addRow=A();addHistory=A();updateHistory=A();deleteHistory=A();selectedRow=k(null);selectedField=k(null);formModel=k(this.initForm());form=W(this.formModel);categoryRef=ee("category");forecastRef=ee("forecast");category=D(()=>this.formModel().category);forecast=D(()=>this.formModel().forecast);forecastTotal=D(()=>this.data().reduce((o,e)=>o+e.forecast,0));focusCategoryOnAdd=U(()=>{this.isAdded()&&X(()=>{let o=this.data().at(-1);this.editCategory(o),setTimeout(()=>this.categoryRef()?.nativeElement.scrollIntoView({behavior:"smooth"}))})});trackByFn(o,e){return e?.id}editCategory(o){this.setForm(o),this.selectedRow.set(o.id),this.selectedField.set("category"),setTimeout(()=>this.categoryRef()?.nativeElement.select())}editForecast(o){this.setForm(o),this.selectedRow.set(o.id),this.selectedField.set("forecast"),setTimeout(()=>this.forecastRef()?.nativeElement.select())}updateAndReset(){this.updateRow.emit(this.formModel()),this.selectedRow.set(null),this.selectedField.set(null),this.formModel.set(this.initForm())}onCategoryEnterPressed(){this.selectedField.set("forecast"),setTimeout(()=>this.forecastRef()?.nativeElement.select())}initForm(){return{id:null,category:null,forecast:null}}setForm(o){this.formModel.set({id:o.id,category:o.category,forecast:o.forecast})}displayedColumns=D(()=>{let o=["category","forecast","value","delete_button"];return this.showForecast()?o:o.filter(e=>e!=="forecast")});static \u0275fac=function(e){return new(e||i)};static \u0275cmp=_({type:i,selectors:[["app-money-with-history-table"]],viewQuery:function(e,t){e&1&&be(t.categoryRef,Ni,5)(t.forecastRef,Vi,5),e&2&&xe(2)},inputs:{title:[1,"title"],expanded:[1,"expanded"],showForecast:[1,"showForecast"],data:[1,"data"],isLoading:[1,"isLoading"],isSaving:[1,"isSaving"],isAdded:[1,"isAdded"],total:[1,"total"]},outputs:{updateRow:"updateRow",deleteRow:"deleteRow",addRow:"addRow",addHistory:"addHistory",updateHistory:"updateHistory",deleteHistory:"deleteHistory"},decls:40,vars:15,consts:[["accItem","cdkAccordionItem"],["col1",""],["col2",""],["category",""],["forecast",""],["popover","mtxPopover"],[3,"expanded"],[1,"sticky","top-14","z-10","grid","w-full","grid-cols-[2rem_1fr_1rem]","items-center","gap-2","overflow-hidden","bg-gray-800","py-2","backdrop-blur","transition-all","duration-100","md:top-16",3,"click"],["icon","BanknoteArrowDown","size","medium"],[1,"flex","items-center","gap-2"],[1,"text-sm","font-semibold","text-gray-100"],["diameter","18"],[1,"text-(length:--text-xs)","leading-(--text-sm--line-height)","font-medium"],["size","small",1,"ml-1",3,"icon"],[1,"overflow-hidden","transition-[max-height]","duration-300","ease-in-out"],[1,"flex","w-full","flex-col","gap-3","rounded-lg","bg-gray-800","p-1"],["mat-table","",1,"mt-2","!min-w-[95%]","!bg-transparent","!p-4",3,"dataSource","trackBy"],["matColumnDef","category"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","!h-1 !w-24 !p-0.5 !text-xs !text-gray-100",4,"matCellDef"],["mat-footer-cell","","class","!h-1 !p-0 !pt-2 font-semibold !text-gray-100",4,"matFooterCellDef"],["matColumnDef","forecast"],["mat-header-cell","","class","!text-right",4,"matHeaderCellDef"],["mat-cell","","class","!h-1 !w-24 !p-0.5 !text-right !text-xs !text-gray-100",4,"matCellDef"],["mat-footer-cell","","class","!p-0 !pt-2 !text-right font-semibold !text-gray-100",4,"matFooterCellDef"],["matColumnDef","value"],["mat-cell","","class","!h-1 !w-12 !p-0 !text-right !text-xs",4,"matCellDef"],["mat-footer-cell","","class","!p-0 !pt-2 !text-right font-semibold !text-gray-100",3,"!text-green-500","!text-red-500",4,"matFooterCellDef"],["matColumnDef","delete_button"],["mat-cell","","class","self-right w-1 !p-0 !text-right",4,"matCellDef"],["mat-footer-cell","",4,"matFooterCellDef"],["mat-header-row","",1,"!h-7","*:!pr-2","**:!text-gray-100"],["mat-row","","class","!h-1 *:!pr-2",4,"matRowDef","matRowDefColumns"],["mat-footer-row","","class","!h-1 **:!pr-2",4,"matFooterRowDef"],[1,"w-5"],["maffiButton","","icon","CirclePlus","size","small",1,"w-5"],["mat-header-cell",""],["mat-cell","",1,"!h-1","!w-24","!p-0.5","!text-xs","!text-gray-100"],[1,"w-24","rounded","border-1","border-blue-400","bg-gray-600","p-1","outline-none",3,"formField"],[1,"flex","h-5","w-full","items-center","gap-1"],[1,"w-24","rounded","border-1","border-blue-400","bg-gray-600","p-1","outline-none",3,"blur","keyup.enter","formField"],[1,"flex","h-5","w-full","items-center","gap-1",3,"click"],["mat-footer-cell","",1,"!h-1","!p-0","!pt-2","font-semibold","!text-gray-100"],["mat-header-cell","",1,"!text-right"],["mat-cell","",1,"!h-1","!w-24","!p-0.5","!text-right","!text-xs","!text-gray-100"],["type","number",1,"w-24","rounded","border-1","border-blue-400","bg-gray-600","p-1","outline-none",3,"formField"],[1,"flex","h-5","w-full","justify-end"],["type","number",1,"w-24","rounded","border-1","border-blue-400","bg-gray-600","p-1","outline-none",3,"blur","formField"],[1,"flex","h-5","w-full","justify-end",3,"click"],["mat-footer-cell","",1,"!p-0","!pt-2","!text-right","font-semibold","!text-gray-100"],["mat-cell","",1,"!h-1","!w-12","!p-0","!text-right","!text-xs"],[1,"block","h-5","w-full","!text-gray-100",3,"mtxPopoverTriggerFor","mtxPopoverTriggerOn"],[1,"!p-4","**:text-xs",3,"position"],[3,"addHistory","deleteHistory","updateHistory","row"],["mat-cell","",1,"self-right","w-1","!p-0","!text-right"],["maffiButton","","icon","Trash","size","mini","theme","secondary",1,"mb-1",3,"click"],["mat-footer-cell",""],["mat-header-row","","class","!h-7 *:!pr-2 **:!text-gray-100",4,"matHeaderRowDef"],["mat-row","",1,"!h-1","*:!pr-2"],["mat-footer-row","",1,"!h-1","**:!pr-2"],["maffiButton","","icon","CirclePlus","size","small",1,"w-5",3,"click"]],template:function(e,t){if(e&1){let n=C();r(0,"mat-card")(1,"mat-card-content")(2,"cdk-accordion-item",6,0)(4,"header",7),u("click",function(){f(n);let l=Me(3);return g(l.toggle())}),x(5,"app-icon",8,1),r(7,"div",9,2)(9,"h2",10),p(10),s(),M(11,Oi,1,0,"mat-spinner",11),r(12,"h1",12),p(13),v(14,"currency"),s()(),x(15,"app-icon",13),s(),r(16,"div",14)(17,"div",15),ae("animate-fade-in"),r(18,"table",16),re(19,17),N(20,Pi,1,0,"td",18)(21,ji,3,1,"td",19)(22,Yi,2,0,"td",20),se(),re(23,21),N(24,zi,2,0,"td",22)(25,qi,3,1,"td",23)(26,Gi,3,3,"td",24),se(),re(27,25),N(28,Ki,2,0,"td",22)(29,Qi,7,12,"td",26)(30,Ji,3,7,"td",27),se(),re(31,28),N(32,Xi,1,0,"td",18)(33,Zi,2,0,"td",29)(34,en,1,0,"td",30),se(),M(35,nn,1,1,"tr",31),N(36,on,1,0,"tr",32)(37,an,1,0,"tr",33),s(),r(38,"div",34),M(39,rn,2,0,"button",35),s()()()()()()}if(e&2){let n=Me(3);c(2),h("expanded",t.expanded()),c(8),P(t.title()),c(),w(t.isSaving()?11:-1),c(2),S(" ",b(14,13,t.total())," "),c(2),h("icon",n.expanded?"ChevronUp":"ChevronDown"),c(),ht("max-height",n.expanded?"1000px":"0px"),c(2),h("dataSource",t.data())("trackBy",t.trackByFn),c(17),w(t.displayedColumns().includes("forecast")?35:-1),c(),h("matRowDefColumns",t.displayedColumns()),c(),h("matFooterRowDef",t.displayedColumns()),c(2),w(n.expanded?39:-1)}},dependencies:[B,Xt,Se,kt,Tt,Ft,Yt,Ot,Wt,jt,Gt,$t,qt,zt,Qt,Kt,Ut,Lt,ni,Bt,Pt,oi,j,we],encapsulation:2})};var Ee=class i{facade=m(E);data=this.facade.variableCosts;total=this.facade.totalVariableCosts;isLoading=this.facade.isMonthLoading;isSaving=this.facade.isSavingVariableCost;isAdded=this.facade.isVariableCostAdded;add(){this.facade.addVariableCost()}delete(o){this.facade.deleteVariableCost(o)}update(o){this.facade.updateVariableCost(o)}addHistory(o){this.facade.addVariableCostHistoryEntry(o)}updateHistory({rowId:o,entry:e}){this.facade.updateVariableCostHistoryEntry(o,e)}deleteHistory({rowId:o,historyId:e}){this.facade.deleteVariableCostHistoryEntry(o,e)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=_({type:i,selectors:[["app-variable-costs-table"]],features:[ft([xt])],decls:1,vars:7,consts:[["title","Variabel",3,"addRow","deleteRow","updateRow","addHistory","deleteHistory","updateHistory","expanded","showForecast","data","isAdded","isLoading","isSaving","total"]],template:function(e,t){e&1&&(r(0,"app-money-with-history-table",0),u("addRow",function(){return t.add()})("deleteRow",function(a){return t.delete(a)})("updateRow",function(a){return t.update(a)})("addHistory",function(a){return t.addHistory(a)})("deleteHistory",function(a){return t.deleteHistory(a)})("updateHistory",function(a){return t.updateHistory(a)}),s()),e&2&&h("expanded",!0)("showForecast",!1)("data",t.data())("isAdded",t.isAdded())("isLoading",t.isLoading())("isSaving",t.isSaving())("total",t.total())},dependencies:[Ht,ie],encapsulation:2})};function ln(i,o){}var Ae=class{viewContainerRef;injector;id;role="dialog";panelClass="";hasBackdrop=!0;backdropClass="";disableClose=!1;closePredicate;width="";height="";minWidth;minHeight;maxWidth;maxHeight;position;data=null;direction;ariaDescribedBy=null;ariaLabelledBy=null;ariaLabel=null;ariaModal=!1;autoFocus="first-tabbable";restoreFocus=!0;delayFocusTrap=!0;scrollStrategy;closeOnNavigation=!0;enterAnimationDuration;exitAnimationDuration},Ue="mdc-dialog--open",li="mdc-dialog--opening",di="mdc-dialog--closing",dn=150,cn=75,mn=(()=>{class i extends ri{_animationStateChanged=new st;_animationsEnabled=!$e();_actionSectionCount=0;_hostElement=this._elementRef.nativeElement;_enterAnimationDuration=this._animationsEnabled?mi(this._config.enterAnimationDuration)??dn:0;_exitAnimationDuration=this._animationsEnabled?mi(this._config.exitAnimationDuration)??cn:0;_animationTimer=null;_contentAttached(){super._contentAttached(),this._startOpenAnimation()}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._enterAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(ci,`${this._enterAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(li,Ue)),this._waitForAnimationToComplete(this._enterAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(Ue),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._exitAnimationDuration}),this._hostElement.classList.remove(Ue),this._animationsEnabled?(this._hostElement.style.setProperty(ci,`${this._exitAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(di)),this._waitForAnimationToComplete(this._exitAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_updateActionSectionCount(e){this._actionSectionCount+=e,this._changeDetectorRef.markForCheck()}_finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._enterAnimationDuration)};_finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._exitAnimationDuration})};_clearAnimationClasses(){this._hostElement.classList.remove(li,di)}_waitForAnimationToComplete(e,t){this._animationTimer!==null&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(t,e)}_requestAnimationFrame(e){this._ngZone.runOutsideAngular(()=>{typeof requestAnimationFrame=="function"?requestAnimationFrame(e):e()})}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(e){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:e})}ngOnDestroy(){super.ngOnDestroy(),this._animationTimer!==null&&clearTimeout(this._animationTimer)}attachComponentPortal(e){let t=super.attachComponentPortal(e);return t.location.nativeElement.classList.add("mat-mdc-dialog-component-host"),t}static \u0275fac=(()=>{let e;return function(n){return(e||(e=Be(i)))(n||i)}})();static \u0275cmp=_({type:i,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:10,hostBindings:function(t,n){t&2&&(je("id",n._config.id),ye("aria-modal",n._config.ariaModal)("role",n._config.role)("aria-labelledby",n._config.ariaLabel?null:n._ariaLabelledByQueue[0])("aria-label",n._config.ariaLabel)("aria-describedby",n._config.ariaDescribedBy||null),q("_mat-animation-noopable",!n._animationsEnabled)("mat-mdc-dialog-container-with-actions",n._actionSectionCount>0))},features:[We],decls:3,vars:0,consts:[[1,"mat-mdc-dialog-inner-container","mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(t,n){t&1&&(r(0,"div",0)(1,"div",1),N(2,ln,0,0,"ng-template",2),s()())},dependencies:[Zt],styles:[`.mat-mdc-dialog-container{width:100%;height:100%;display:block;box-sizing:border-box;max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit;outline:0}.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-max-width, 560px);min-width:var(--mat-dialog-container-min-width, 280px)}@media(max-width: 599px){.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-small-max-width, calc(100vw - 32px))}}.mat-mdc-dialog-inner-container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;opacity:0;transition:opacity linear var(--mat-dialog-transition-duration, 0ms);max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mdc-dialog--closing .mat-mdc-dialog-inner-container{transition:opacity 75ms linear;transform:none}.mdc-dialog--open .mat-mdc-dialog-inner-container{opacity:1}._mat-animation-noopable .mat-mdc-dialog-inner-container{transition:none}.mat-mdc-dialog-surface{display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;width:100%;height:100%;position:relative;overflow-y:auto;outline:0;transform:scale(0.8);transition:transform var(--mat-dialog-transition-duration, 0ms) cubic-bezier(0, 0, 0.2, 1);max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit;box-shadow:var(--mat-dialog-container-elevation-shadow, none);border-radius:var(--mat-dialog-container-shape, var(--mat-sys-corner-extra-large, 4px));background-color:var(--mat-dialog-container-color, var(--mat-sys-surface, white))}[dir=rtl] .mat-mdc-dialog-surface{text-align:right}.mdc-dialog--open .mat-mdc-dialog-surface,.mdc-dialog--closing .mat-mdc-dialog-surface{transform:none}._mat-animation-noopable .mat-mdc-dialog-surface{transition:none}.mat-mdc-dialog-surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}.mat-mdc-dialog-title{display:block;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:var(--mat-dialog-headline-padding, 6px 24px 13px)}.mat-mdc-dialog-title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mat-mdc-dialog-title{text-align:right}.mat-mdc-dialog-container .mat-mdc-dialog-title{color:var(--mat-dialog-subhead-color, var(--mat-sys-on-surface, rgba(0, 0, 0, 0.87)));font-family:var(--mat-dialog-subhead-font, var(--mat-sys-headline-small-font, inherit));line-height:var(--mat-dialog-subhead-line-height, var(--mat-sys-headline-small-line-height, 1.5rem));font-size:var(--mat-dialog-subhead-size, var(--mat-sys-headline-small-size, 1rem));font-weight:var(--mat-dialog-subhead-weight, var(--mat-sys-headline-small-weight, 400));letter-spacing:var(--mat-dialog-subhead-tracking, var(--mat-sys-headline-small-tracking, 0.03125em))}.mat-mdc-dialog-content{display:block;flex-grow:1;box-sizing:border-box;margin:0;overflow:auto;max-height:65vh}.mat-mdc-dialog-content>:first-child{margin-top:0}.mat-mdc-dialog-content>:last-child{margin-bottom:0}.mat-mdc-dialog-container .mat-mdc-dialog-content{color:var(--mat-dialog-supporting-text-color, var(--mat-sys-on-surface-variant, rgba(0, 0, 0, 0.6)));font-family:var(--mat-dialog-supporting-text-font, var(--mat-sys-body-medium-font, inherit));line-height:var(--mat-dialog-supporting-text-line-height, var(--mat-sys-body-medium-line-height, 1.5rem));font-size:var(--mat-dialog-supporting-text-size, var(--mat-sys-body-medium-size, 1rem));font-weight:var(--mat-dialog-supporting-text-weight, var(--mat-sys-body-medium-weight, 400));letter-spacing:var(--mat-dialog-supporting-text-tracking, var(--mat-sys-body-medium-tracking, 0.03125em))}.mat-mdc-dialog-container .mat-mdc-dialog-content{padding:var(--mat-dialog-content-padding, 20px 24px)}.mat-mdc-dialog-container-with-actions .mat-mdc-dialog-content{padding:var(--mat-dialog-with-actions-content-padding, 20px 24px 0)}.mat-mdc-dialog-container .mat-mdc-dialog-title+.mat-mdc-dialog-content{padding-top:0}.mat-mdc-dialog-actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;box-sizing:border-box;min-height:52px;margin:0;border-top:1px solid rgba(0,0,0,0);padding:var(--mat-dialog-actions-padding, 16px 24px);justify-content:var(--mat-dialog-actions-alignment, flex-end)}@media(forced-colors: active){.mat-mdc-dialog-actions{border-top-color:CanvasText}}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-start,.mat-mdc-dialog-actions[align=start]{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}.mat-mdc-dialog-component-host{display:contents}
`],encapsulation:2})}return i})(),ci="--mat-dialog-transition-duration";function mi(i){return i==null?null:typeof i=="number"?i:i.endsWith("ms")?Ye(i.substring(0,i.length-2)):i.endsWith("s")?Ye(i.substring(0,i.length-1))*1e3:i==="0"?0:null}var Re=(function(i){return i[i.OPEN=0]="OPEN",i[i.CLOSING=1]="CLOSING",i[i.CLOSED=2]="CLOSED",i})(Re||{}),Y=class{_ref;_config;_containerInstance;componentInstance;componentRef=null;disableClose;id;_afterOpened=new Oe(1);_beforeClosed=new Oe(1);_result;_closeFallbackTimeout;_state=Re.OPEN;_closeInteractionType;constructor(o,e,t){this._ref=o,this._config=e,this._containerInstance=t,this.disableClose=e.disableClose,this.id=o.id,o.addPanelClass("mat-mdc-dialog-panel"),t._animationStateChanged.pipe(ne(n=>n.state==="opened"),O(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),t._animationStateChanged.pipe(ne(n=>n.state==="closed"),O(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),o.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),it(this.backdropClick(),this.keydownEvents().pipe(ne(n=>n.keyCode===27&&!this.disableClose&&!St(n)))).subscribe(n=>{this.disableClose||(n.preventDefault(),un(this,n.type==="keydown"?"keyboard":"mouse"))})}close(o){let e=this._config.closePredicate;e&&!e(o,this._config,this.componentInstance)||(this._result=o,this._containerInstance._animationStateChanged.pipe(ne(t=>t.state==="closing"),O(1)).subscribe(t=>{this._beforeClosed.next(o),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),t.totalTime+100)}),this._state=Re.CLOSING,this._containerInstance._startExitAnimation())}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(o){let e=this._ref.config.positionStrategy;return o&&(o.left||o.right)?o.left?e.left(o.left):e.right(o.right):e.centerHorizontally(),o&&(o.top||o.bottom)?o.top?e.top(o.top):e.bottom(o.bottom):e.centerVertically(),this._ref.updatePosition(),this}updateSize(o="",e=""){return this._ref.updateSize(o,e),this}addPanelClass(o){return this._ref.addPanelClass(o),this}removePanelClass(o){return this._ref.removePanelClass(o),this}getState(){return this._state}_finishDialogClose(){this._state=Re.CLOSED,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}};function un(i,o,e){return i._closeInteractionType=o,i.close(e)}var de=new $("MatMdcDialogData"),pn=new $("mat-mdc-dialog-default-options"),hn=new $("mat-mdc-dialog-scroll-strategy",{providedIn:"root",factory:()=>{let i=m(Pe);return()=>ei(i)}}),Ke=(()=>{class i{_defaultOptions=m(pn,{optional:!0});_scrollStrategy=m(hn);_parentDialog=m(i,{optional:!0,skipSelf:!0});_idGenerator=m(ze);_injector=m(Pe);_dialog=m(si);_animationsDisabled=$e();_openDialogsAtThisLevel=[];_afterAllClosedAtThisLevel=new Le;_afterOpenedAtThisLevel=new Le;dialogConfigClass=Ae;_dialogRefConstructor;_dialogContainerType;_dialogDataToken;get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){let e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}afterAllClosed=et(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(rt(void 0)));constructor(){this._dialogRefConstructor=Y,this._dialogContainerType=mn,this._dialogDataToken=de}open(e,t){let n;t=Q(Q({},this._defaultOptions||new Ae),t),t.id=t.id||this._idGenerator.getId("mat-mdc-dialog-"),t.scrollStrategy=t.scrollStrategy||this._scrollStrategy();let a=this._dialog.open(e,ue(Q({},t),{positionStrategy:ti(this._injector).centerHorizontally().centerVertically(),disableClose:!0,closePredicate:void 0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,disableAnimations:this._animationsDisabled||t.enterAnimationDuration?.toLocaleString()==="0"||t.exitAnimationDuration?.toString()==="0",container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:t},{provide:ai,useValue:t}]},templateContext:()=>({dialogRef:n}),providers:(l,y,H)=>(n=new this._dialogRefConstructor(l,t,H),n.updatePosition(t?.position),[{provide:this._dialogContainerType,useValue:H},{provide:this._dialogDataToken,useValue:y.data},{provide:this._dialogRefConstructor,useValue:n}])}));return n.componentRef=a.componentRef,n.componentInstance=a.componentInstance,this.openDialogs.push(n),this.afterOpened.next(n),n.afterClosed().subscribe(()=>{let l=this.openDialogs.indexOf(n);l>-1&&(this.openDialogs.splice(l,1),this.openDialogs.length||this._getAfterAllClosed().next())}),n}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(e){return this.openDialogs.find(t=>t.id===e)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(e){let t=e.length;for(;t--;)e[t].close()}static \u0275fac=function(t){return new(t||i)};static \u0275prov=z({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var fn=(()=>{class i{_dialogRef=m(Y,{optional:!0});_elementRef=m(ge);_dialog=m(Ke);constructor(){}ngOnInit(){this._dialogRef||(this._dialogRef=gn(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{this._onAdd()})}ngOnDestroy(){this._dialogRef?._containerInstance&&Promise.resolve().then(()=>{this._onRemove()})}static \u0275fac=function(t){return new(t||i)};static \u0275dir=_e({type:i})}return i})(),ui=(()=>{class i extends fn{id=m(ze).getId("mat-mdc-dialog-title-");_onAdd(){this._dialogRef._containerInstance?._addAriaLabelledBy?.(this.id)}_onRemove(){this._dialogRef?._containerInstance?._removeAriaLabelledBy?.(this.id)}static \u0275fac=(()=>{let e;return function(n){return(e||(e=Be(i)))(n||i)}})();static \u0275dir=_e({type:i,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-mdc-dialog-title","mdc-dialog__title"],hostVars:1,hostBindings:function(t,n){t&2&&je("id",n.id)},inputs:{id:"id"},exportAs:["matDialogTitle"],features:[We]})}return i})(),pi=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275dir=_e({type:i,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-mdc-dialog-content","mdc-dialog__content"],features:[dt([Vt])]})}return i})();function gn(i,o){let e=i.nativeElement.parentElement;for(;e&&!e.classList.contains("mat-mdc-dialog-container");)e=e.parentElement;return e?o.find(t=>t.id===e.id):null}var ce=Qe(Dt());var He=class i{dialogRef=m(Y);data=m(de);formModel=k({month:(0,ce.default)().add(1,"month").format("MM"),year:(0,ce.default)().year()});form=W(this.formModel);selectedYear=D(()=>this.formModel().year);months=D(()=>{let o=this.createdSnapshots.filter(e=>e.year()===this.selectedYear());return this.allMonths.filter(e=>!o.some(t=>t.month()===e.date.month()))});submitForm(){this.dialogRef.close(this.formModel())}allMonths=Array.from({length:12},(o,e)=>{let t=(0,ce.default)().month(e);return{label:t.format("MMMM"),value:t.format("MM"),date:t}});years=[2025,2026];createdSnapshots=this.data.createdMonths.map(o=>(0,ce.default)(o.month));static \u0275fac=function(e){return new(e||i)};static \u0275cmp=_({type:i,selectors:[["app-create-month-dialog"]],decls:9,vars:8,consts:[[1,"flex","flex-col","items-center","justify-center","p-4","**:text-white!"],["mat-dialog-title",""],["mat-dialog-content","",1,"flex!","w-full","flex-col","gap-2"],[1,"grid","w-full","grid-cols-2","gap-2"],["placeholder","Jahr ausw\xE4hlen","appendTo",".mat-mdc-dialog-title",3,"items","clearable","formField"],["bindLabel","label","bindValue","value","placeholder","Monat ausw\xE4hlen","appendTo",".mat-mdc-dialog-title",3,"items","clearable","formField"],["maffiButton","","icon","CirclePlus",1,"w-full","!justify-center",3,"click"]],template:function(e,t){e&1&&(r(0,"div",0)(1,"h1",1),p(2,"Monat anlegen"),s(),r(3,"div",2)(4,"div",3),x(5,"ng-select",4),F(),x(6,"ng-select",5),F(),s(),r(7,"button",6),u("click",function(){return t.submitForm()}),p(8," Anlegen "),s()()()),e&2&&(c(5),h("items",t.years)("clearable",!1),I(t.form.year,"formField"),c(),h("items",t.months())("clearable",!1),I(t.form.month,"formField"))},dependencies:[ui,pi,Te,B,j],encapsulation:2})};function hi(i){return Error(`Unable to find icon with the name "${i}"`)}function _n(){return Error("Could not find HttpClient for use with Angular Material icons. Please add provideHttpClient() to your providers.")}function fi(i){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${i}".`)}function gi(i){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${i}".`)}var V=class{url;svgText;options;svgElement=null;constructor(o,e,t){this.url=o,this.svgText=e,this.options=t}},yi=(()=>{class i{_httpClient;_sanitizer;_errorHandler;_document;_svgIconConfigs=new Map;_iconSetConfigs=new Map;_cachedIconsByUrl=new Map;_inProgressUrlFetches=new Map;_fontCssClassesByAlias=new Map;_resolvers=[];_defaultFontSetClass=["material-icons","mat-ligature-font"];constructor(e,t,n,a){this._httpClient=e,this._sanitizer=t,this._errorHandler=a,this._document=n}addSvgIcon(e,t,n){return this.addSvgIconInNamespace("",e,t,n)}addSvgIconLiteral(e,t,n){return this.addSvgIconLiteralInNamespace("",e,t,n)}addSvgIconInNamespace(e,t,n,a){return this._addSvgIconConfig(e,t,new V(n,null,a))}addSvgIconResolver(e){return this._resolvers.push(e),this}addSvgIconLiteralInNamespace(e,t,n,a){let l=this._sanitizer.sanitize(Z.HTML,n);if(!l)throw gi(n);let y=te(l);return this._addSvgIconConfig(e,t,new V("",y,a))}addSvgIconSet(e,t){return this.addSvgIconSetInNamespace("",e,t)}addSvgIconSetLiteral(e,t){return this.addSvgIconSetLiteralInNamespace("",e,t)}addSvgIconSetInNamespace(e,t,n){return this._addSvgIconSetConfig(e,new V(t,null,n))}addSvgIconSetLiteralInNamespace(e,t,n){let a=this._sanitizer.sanitize(Z.HTML,t);if(!a)throw gi(t);let l=te(a);return this._addSvgIconSetConfig(e,new V("",l,n))}registerFontClassAlias(e,t=e){return this._fontCssClassesByAlias.set(e,t),this}classNameForFontAlias(e){return this._fontCssClassesByAlias.get(e)||e}setDefaultFontSetClass(...e){return this._defaultFontSetClass=e,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(e){let t=this._sanitizer.sanitize(Z.RESOURCE_URL,e);if(!t)throw fi(e);let n=this._cachedIconsByUrl.get(t);return n?L(ke(n)):this._loadSvgIconFromConfig(new V(e,null)).pipe(pe(a=>this._cachedIconsByUrl.set(t,a)),J(a=>ke(a)))}getNamedSvgIcon(e,t=""){let n=_i(t,e),a=this._svgIconConfigs.get(n);if(a)return this._getSvgFromConfig(a);if(a=this._getIconConfigFromResolvers(t,e),a)return this._svgIconConfigs.set(n,a),this._getSvgFromConfig(a);let l=this._iconSetConfigs.get(t);return l?this._getSvgFromIconSetConfigs(e,l):Xe(hi(n))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(e){return e.svgText?L(ke(this._svgElementFromConfig(e))):this._loadSvgIconFromConfig(e).pipe(J(t=>ke(t)))}_getSvgFromIconSetConfigs(e,t){let n=this._extractIconWithNameFromAnySet(e,t);if(n)return L(n);let a=t.filter(l=>!l.svgText).map(l=>this._loadSvgIconSetFromConfig(l).pipe(nt(y=>{let K=`Loading icon set URL: ${this._sanitizer.sanitize(Z.RESOURCE_URL,l.url)} failed: ${y.message}`;return this._errorHandler.handleError(new Error(K)),L(null)})));return tt(a).pipe(J(()=>{let l=this._extractIconWithNameFromAnySet(e,t);if(!l)throw hi(e);return l}))}_extractIconWithNameFromAnySet(e,t){for(let n=t.length-1;n>=0;n--){let a=t[n];if(a.svgText&&a.svgText.toString().indexOf(e)>-1){let l=this._svgElementFromConfig(a),y=this._extractSvgIconFromSet(l,e,a.options);if(y)return y}}return null}_loadSvgIconFromConfig(e){return this._fetchIcon(e).pipe(pe(t=>e.svgText=t),J(()=>this._svgElementFromConfig(e)))}_loadSvgIconSetFromConfig(e){return e.svgText?L(null):this._fetchIcon(e).pipe(pe(t=>e.svgText=t))}_extractSvgIconFromSet(e,t,n){let a=e.querySelector(`[id="${t}"]`);if(!a)return null;let l=a.cloneNode(!0);if(l.removeAttribute("id"),l.nodeName.toLowerCase()==="svg")return this._setSvgAttributes(l,n);if(l.nodeName.toLowerCase()==="symbol")return this._setSvgAttributes(this._toSvgElement(l),n);let y=this._svgElementFromString(te("<svg></svg>"));return y.appendChild(l),this._setSvgAttributes(y,n)}_svgElementFromString(e){let t=this._document.createElement("DIV");t.innerHTML=e;let n=t.querySelector("svg");if(!n)throw Error("<svg> tag not found");return n}_toSvgElement(e){let t=this._svgElementFromString(te("<svg></svg>")),n=e.attributes;for(let a=0;a<n.length;a++){let{name:l,value:y}=n[a];l!=="id"&&t.setAttribute(l,y)}for(let a=0;a<e.childNodes.length;a++)e.childNodes[a].nodeType===this._document.ELEMENT_NODE&&t.appendChild(e.childNodes[a].cloneNode(!0));return t}_setSvgAttributes(e,t){return e.setAttribute("fit",""),e.setAttribute("height","100%"),e.setAttribute("width","100%"),e.setAttribute("preserveAspectRatio","xMidYMid meet"),e.setAttribute("focusable","false"),t&&t.viewBox&&e.setAttribute("viewBox",t.viewBox),e}_fetchIcon(e){let{url:t,options:n}=e,a=n?.withCredentials??!1;if(!this._httpClient)throw _n();if(t==null)throw Error(`Cannot fetch icon from URL "${t}".`);let l=this._sanitizer.sanitize(Z.RESOURCE_URL,t);if(!l)throw fi(t);let y=this._inProgressUrlFetches.get(l);if(y)return y;let H=this._httpClient.get(l,{responseType:"text",withCredentials:a}).pipe(J(K=>te(K)),ot(()=>this._inProgressUrlFetches.delete(l)),at());return this._inProgressUrlFetches.set(l,H),H}_addSvgIconConfig(e,t,n){return this._svgIconConfigs.set(_i(e,t),n),this}_addSvgIconSetConfig(e,t){let n=this._iconSetConfigs.get(e);return n?n.push(t):this._iconSetConfigs.set(e,[t]),this}_svgElementFromConfig(e){if(!e.svgElement){let t=this._svgElementFromString(e.svgText);this._setSvgAttributes(t,e.options),e.svgElement=t}return e.svgElement}_getIconConfigFromResolvers(e,t){for(let n=0;n<this._resolvers.length;n++){let a=this._resolvers[n](t,e);if(a)return yn(a)?new V(a.url,null,a.options):new V(a,null)}}static \u0275fac=function(t){return new(t||i)(oe(Mt,8),oe(wt),oe(he,8),oe(fe))};static \u0275prov=z({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function ke(i){return i.cloneNode(!0)}function _i(i,o){return i+":"+o}function yn(i){return!!(i.url&&i.options)}var Cn=["*"],vn=new $("MAT_ICON_DEFAULT_OPTIONS"),bn=new $("mat-icon-location",{providedIn:"root",factory:()=>{let i=m(he),o=i?i.location:null;return{getPathname:()=>o?o.pathname+o.search:""}}}),Ci=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],xn=Ci.map(i=>`[${i}]`).join(", "),Mn=/^url\(['"]?#(.*?)['"]?\)$/,vi=(()=>{class i{_elementRef=m(ge);_iconRegistry=m(yi);_location=m(bn);_errorHandler=m(fe);_defaultColor;get color(){return this._color||this._defaultColor}set color(e){this._color=e}_color;inline=!1;get svgIcon(){return this._svgIcon}set svgIcon(e){e!==this._svgIcon&&(e?this._updateSvgIcon(e):this._svgIcon&&this._clearSvgElement(),this._svgIcon=e)}_svgIcon;get fontSet(){return this._fontSet}set fontSet(e){let t=this._cleanupFontValue(e);t!==this._fontSet&&(this._fontSet=t,this._updateFontIconClasses())}_fontSet;get fontIcon(){return this._fontIcon}set fontIcon(e){let t=this._cleanupFontValue(e);t!==this._fontIcon&&(this._fontIcon=t,this._updateFontIconClasses())}_fontIcon;_previousFontSetClass=[];_previousFontIconClass;_svgName=null;_svgNamespace=null;_previousPath;_elementsWithExternalReferences;_currentIconFetch=Je.EMPTY;constructor(){let e=m(new yt("aria-hidden"),{optional:!0}),t=m(vn,{optional:!0});t&&(t.color&&(this.color=this._defaultColor=t.color),t.fontSet&&(this.fontSet=t.fontSet)),e||this._elementRef.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(e){if(!e)return["",""];let t=e.split(":");switch(t.length){case 1:return["",t[0]];case 2:return t;default:throw Error(`Invalid icon name: "${e}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){let e=this._elementsWithExternalReferences;if(e&&e.size){let t=this._location.getPathname();t!==this._previousPath&&(this._previousPath=t,this._prependPathToReferences(t))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(e){this._clearSvgElement();let t=this._location.getPathname();this._previousPath=t,this._cacheChildrenWithExternalReferences(e),this._prependPathToReferences(t),this._elementRef.nativeElement.appendChild(e)}_clearSvgElement(){let e=this._elementRef.nativeElement,t=e.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();t--;){let n=e.childNodes[t];(n.nodeType!==1||n.nodeName.toLowerCase()==="svg")&&n.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;let e=this._elementRef.nativeElement,t=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(n=>n.length>0);this._previousFontSetClass.forEach(n=>e.classList.remove(n)),t.forEach(n=>e.classList.add(n)),this._previousFontSetClass=t,this.fontIcon!==this._previousFontIconClass&&!t.includes("mat-ligature-font")&&(this._previousFontIconClass&&e.classList.remove(this._previousFontIconClass),this.fontIcon&&e.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(e){return typeof e=="string"?e.trim().split(" ")[0]:e}_prependPathToReferences(e){let t=this._elementsWithExternalReferences;t&&t.forEach((n,a)=>{n.forEach(l=>{a.setAttribute(l.name,`url('${e}#${l.value}')`)})})}_cacheChildrenWithExternalReferences(e){let t=e.querySelectorAll(xn),n=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let a=0;a<t.length;a++)Ci.forEach(l=>{let y=t[a],H=y.getAttribute(l),K=H?H.match(Mn):null;if(K){let me=n.get(y);me||(me=[],n.set(y,me)),me.push({name:l,value:K[1]})}})}_updateSvgIcon(e){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),e){let[t,n]=this._splitIconName(e);t&&(this._svgNamespace=t),n&&(this._svgName=n),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(n,t).pipe(O(1)).subscribe(a=>this._setSvgElement(a),a=>{let l=`Error retrieving icon ${t}:${n}! ${a.message}`;this._errorHandler.handleError(new Error(l))})}}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=_({type:i,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:10,hostBindings:function(t,n){t&2&&(ye("data-mat-icon-type",n._usingFontIcon()?"font":"svg")("data-mat-icon-name",n._svgName||n.fontIcon)("data-mat-icon-namespace",n._svgNamespace||n.fontSet)("fontIcon",n._usingFontIcon()?n.fontIcon:null),le(n.color?"mat-"+n.color:""),q("mat-icon-inline",n.inline)("mat-icon-no-color",n.color!=="primary"&&n.color!=="accent"&&n.color!=="warn"))},inputs:{color:"color",inline:[2,"inline","inline",Ct],svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],ngContentSelectors:Cn,decls:1,vars:0,template:function(t,n){t&1&&(ut(),pt(0))},styles:[`mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color, inherit)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}
`],encapsulation:2,changeDetection:0})}return i})();var Ca=bi(24,i=>String(i)),va=bi(60,i=>String(i));function bi(i,o){let e=Array(i);for(let t=0;t<i;t++)e[t]=o(t);return e}var xi=(()=>{class i{transform(e){return Ze(e)?e:L(e)}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275pipe=lt({name:"toObservable",type:i,pure:!0})}}return i})();function wn(i,o){if(i&1){let e=C();r(0,"button",4),u("click",function(){f(e);let n=d(2);return g(n._onClose())}),r(1,"mat-icon"),p(2,"close"),s()()}}function Dn(i,o){if(i&1&&(r(0,"h1",0)(1,"span"),p(2),v(3,"toObservable"),v(4,"async"),s(),M(5,wn,3,0,"button",3),s()),i&2){let e=d();c(2),P(b(4,4,b(3,2,e.data.title))),c(3),w(e.data.showCloseIcon?5:-1)}}function Tn(i,o){if(i&1&&(r(0,"div",1)(1,"p"),p(2),v(3,"toObservable"),v(4,"async"),s()()),i&2){let e=d();c(2),P(b(4,3,b(3,1,e.data.description)))}}function Fn(i,o){if(i&1){let e=C();r(0,"button",7),u("click",function(){f(e);let n=d().$implicit,a=d();return g(a._onClick(n.onClick))}),p(1),v(2,"toObservable"),v(3,"async"),s()}if(i&2){let e=d().$implicit;le(e.class),h("matButton",e.type||"text")("color",e.color),c(),S(" ",b(3,7,b(2,5,e.text))," ")}}function In(i,o){if(i&1){let e=C();r(0,"button",8),u("click",function(){f(e);let n=d().$implicit,a=d();return g(a._onClick(n.onClick))}),p(1),v(2,"toObservable"),v(3,"async"),s()}if(i&2){let e=d().$implicit;le(e.class),h("matButton",e.type||"text")("color",e.color),c(),S(" ",b(3,7,b(2,5,e.text))," ")}}function Sn(i,o){if(i&1&&M(0,Fn,4,9,"button",5)(1,In,4,9,"button",6),i&2){let e=o.$implicit;w(e.focusInitial?0:1)}}var Mi=(()=>{class i{constructor(){this.dialogRef=m(Y),this.data=m(de)}_onClick(e){e&&e.call(this),this._onClose()}_onClose(){this.dialogRef.close()}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=_({type:i,selectors:[["mtx-dialog-container"]],hostAttrs:[1,"mtx-dialog-container"],exportAs:["mtxDialogContainer"],decls:5,vars:2,consts:[[1,"mtx-dialog-title"],[1,"mtx-dialog-content"],[1,"mtx-dialog-actions"],["matIconButton",""],["matIconButton","",3,"click"],["cdkFocusInitial","",3,"matButton","color","class"],[3,"matButton","color","class"],["cdkFocusInitial","",3,"click","matButton","color"],[3,"click","matButton","color"]],template:function(t,n){t&1&&(M(0,Dn,6,6,"h1",0),M(1,Tn,5,5,"div",1),r(2,"div",2),Ce(3,Sn,2,1,null,null,mt),s()),t&2&&(w(n.data.title?0:-1),c(),w(n.data.description?1:-1),c(2),ve(n.data.buttons))},dependencies:[At,Rt,vi,vt,xi],styles:[`.mtx-dialog-title{display:flex;justify-content:space-between;align-items:center;padding:8px 24px;margin:0;line-height:48px;font-weight:500;font-size:20px}.mtx-dialog-title .mat-mdc-button-base{margin-right:-16px}[dir=rtl] .mtx-dialog-title .mat-mdc-button-base{margin-right:0;margin-left:-16px}.mtx-dialog-content{display:block;max-height:65vh;padding:0 24px;overflow:auto;-webkit-overflow-scrolling:touch}.mtx-dialog-content p{margin-top:0}.mtx-dialog-actions{display:flex;flex-wrap:wrap;align-items:center;justify-content:flex-end;padding:8px}.mtx-dialog-actions .mat-mdc-button-base{margin-left:8px}[dir=rtl] .mtx-dialog-actions .mat-mdc-button-base{margin-left:0;margin-right:8px}
`],encapsulation:2,changeDetection:0})}}return i})(),En={title:"",description:"",buttons:[{text:"Cancel",onClick:()=>{}},{color:"warn",text:"OK",focusInitial:!0,onClick:()=>{}}],showCloseIcon:!1,disableClose:!0,width:"300px"},wi=(()=>{class i{constructor(){this.dialog=m(Ke)}originalOpen(e=Mi,t){return this.dialog.open(e,t)}open(e,t=Mi){let n=Object.assign({},En,e);return this.dialog.open(t,ue(Q({},n),{data:n}))}alert(e,t="",n=()=>{}){this.open({title:e,description:t,buttons:[{color:"warn",text:"OK",onClick:()=>n()}]})}confirm(e,t="",n=()=>{},a=()=>{}){this.open({title:e,description:t,buttons:[{text:"Cancel",onClick:()=>a()},{color:"warn",text:"OK",focusInitial:!0,onClick:()=>n()}]})}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=z({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var Ne=class i{facade=m(E);budgets=this.facade.budgets;total=this.facade.totalBudgets;isLoading=this.facade.isMonthLoading;isSaving=this.facade.isSavingFixedCost;isAdded=this.facade.isBudgetAdded;add(){this.facade.addBudget()}delete(o){this.facade.deleteBudget(o)}update(o){this.facade.updateBudget(o)}addHistory(o){this.facade.addBudgetHistoryEntry(o)}deleteHistory({rowId:o,historyId:e}){this.facade.deleteBudgetHistoryEntry(o,e)}updateHistory({rowId:o,entry:e}){this.facade.updateBudgetHistoryEntry(o,e)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=_({type:i,selectors:[["app-monthly-budgets-table"]],decls:1,vars:7,consts:[["title","Budgets",3,"addRow","deleteRow","updateRow","addHistory","deleteHistory","updateHistory","expanded","showForecast","data","isAdded","isLoading","isSaving","total"]],template:function(e,t){e&1&&(r(0,"app-money-with-history-table",0),u("addRow",function(){return t.add()})("deleteRow",function(a){return t.delete(a)})("updateRow",function(a){return t.update(a)})("addHistory",function(a){return t.addHistory(a)})("deleteHistory",function(a){return t.deleteHistory(a)})("updateHistory",function(a){return t.updateHistory(a)}),s()),e&2&&h("expanded",!1)("showForecast",!0)("data",t.budgets())("isAdded",t.isAdded())("isLoading",t.isLoading())("isSaving",t.isSaving())("total",t.total())},dependencies:[ie],encapsulation:2})};function Rn(i,o){if(i&1&&x(0,"app-revenue-month-table")(1,"app-fixed-costs-month-table")(2,"app-monthly-budgets-table")(3,"app-variable-costs-table")(4,"app-balance",7),i&2){let e=d();c(4),h("balance",e.balance())}}var Di=class i{facade=m(E);mtxDialog=m(wi);year=T();month=T();snapshots=this.facade.snapshots;createdYears=this.facade.createdYears;formModel=_t(()=>{let o=(0,Ve.default)().format("YYYY-MM-DD"),e=this.year();return this.year()&&this.month()&&(o=`${this.year()}-${this.month()}`),e&&!this.isYearValid(e)&&(e=null),{snapshot:o,year:e}});form=W(this.formModel);currentYearSnapshots=D(()=>{let o=this.selectedYear();return this.snapshots().filter(e=>(0,Ve.default)(e.month).format("YYYY").includes(o||""))});selectedMonth=D(()=>this.formModel().snapshot);selectedYear=D(()=>this.formModel().year);balance=D(()=>{let o=this.facade.totalFixedCosts(),e=this.facade.totalVariableCosts();return this.facade.totalRevenue()-(o+e)});loadMonth=U(()=>{let o=this.selectedMonth(),e=this.selectedYear();o&&e&&this.isYearValid(e)&&this.isSnapshotCreated(o)&&this.facade.getMonth(o)});navigateOnFormModelChange=U(()=>{let{snapshot:o,year:e}=this.formModel(),t=this.facade.areMonthsLoaded();X(()=>{if(!t)return;let n=o?(0,Ve.default)(o).format("MM"):null;if(e&&!o){this.facade.navigateTo(e);return}o&&this.facade.navigateTo(e,n)})});constructor(){this.facade.getCreatedMonths()}openCreateMonthDialog(){this.mtxDialog.originalOpen(He,{height:"400px",data:{createdMonths:this.snapshots()}}).afterClosed().pipe(O(1)).subscribe(e=>{this.createMonth(e)})}createMonth(o){let e=`${o.year}-${o.month}-01`;this.facade.createMonth(e)}isYearValid(o){return this.createdYears().includes(o)}isSnapshotCreated(o){return this.snapshots().map(e=>e.month).includes(o)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=_({type:i,selectors:[["app-monthly-check"]],inputs:{year:[1,"year"],month:[1,"month"]},decls:9,vars:9,consts:[["title","Monatscheck"],["maffiButton","","icon","CirclePlus",3,"click"],[1,"container-max-sm","mt-2","flex","flex-col","items-center","gap-2","p-2","md:p-6"],[1,"grid","w-full","grid-cols-2","gap-4"],["placeholder","Jahr ausw\xE4hlen",3,"items","clearable","formField"],["bindLabel","translated","bindValue","month","placeholder","Monat ausw\xE4hlen",1,"higher",3,"items","clearable","formField"],[1,"flex","w-full","flex-col","gap-2","*:w-full"],[3,"balance"]],template:function(e,t){e&1&&(r(0,"app-header",0)(1,"button",1),u("click",function(){return t.openCreateMonthDialog()}),p(2," Monat anlegen "),s()(),r(3,"section",2)(4,"div",3),x(5,"ng-select",4),F(),x(6,"ng-select",5),F(),s(),r(7,"cdk-accordion",6),ae("animate-fade-in"),M(8,Rn,5,1),s()()),e&2&&(c(5),h("items",t.createdYears())("clearable",!1),I(t.form.year,"formField"),c(),h("items",t.currentYearSnapshots())("clearable",!1),I(t.form.snapshot,"formField"),c(2),w(t.selectedMonth()?8:-1))},dependencies:[Et,It,Te,Nt,Fe,Ie,Jt,Ee,B,ii,Ne,j],encapsulation:2})};export{Di as MonthlyCheckComponent};
